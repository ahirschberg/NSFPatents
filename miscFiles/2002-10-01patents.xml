<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PATDOC SYSTEM "ST32-US-Grant-025xml.dtd" [
<!ENTITY US06457538-20021001-D00000.TIF SYSTEM "US06457538-20021001-D00000.TIF" NDATA TIF>
<!ENTITY US06457538-20021001-D00001.TIF SYSTEM "US06457538-20021001-D00001.TIF" NDATA TIF>
<!ENTITY US06457538-20021001-D00002.TIF SYSTEM "US06457538-20021001-D00002.TIF" NDATA TIF>
<!ENTITY US06457538-20021001-D00003.TIF SYSTEM "US06457538-20021001-D00003.TIF" NDATA TIF>
<!ENTITY US06457538-20021001-D00004.TIF SYSTEM "US06457538-20021001-D00004.TIF" NDATA TIF>
<!ENTITY US06457538-20021001-D00005.TIF SYSTEM "US06457538-20021001-D00005.TIF" NDATA TIF>
]>
<PATDOC DTD="2.5" STATUS="Build 20020101">
<SDOBI>
<B100>
<B110><DNUM><PDAT>06457538</PDAT></DNUM></B110>
<B130><PDAT>B1</PDAT></B130>
<B140><DATE><PDAT>20021001</PDAT></DATE></B140>
<B190><PDAT>US</PDAT></B190>
</B100>
<B200>
<B210><DNUM><PDAT>09789309</PDAT></DNUM></B210>
<B211US><PDAT>09</PDAT></B211US>
<B220><DATE><PDAT>20010220</PDAT></DATE></B220>
</B200>
<B400>
<B472>
<B474US><PDAT>18</PDAT></B474US>
</B472>
</B400>
<B500>
<B510>
<B511><PDAT>E21B 2510</PDAT></B511>
<B512><PDAT>E21B 4718</PDAT></B512>
<B516><PDAT>7</PDAT></B516>
</B510>
<B520>
<B521><PDAT>175 46</PDAT></B521>
<B522><PDAT>175244</PDAT></B522>
</B520>
<B540><STEXT><PDAT>Advanced coring apparatus and method</PDAT></STEXT></B540>
<B560>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4735269</PDAT></DNUM>
<DATE><PDAT>19880400</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Park et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>175244</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4955438</PDAT></DNUM>
<DATE><PDAT>19900900</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Juergens et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>166 64</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5010765</PDAT></DNUM>
<DATE><PDAT>19910400</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Duckworth et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>175 40</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>6006844</PDAT></DNUM>
<DATE><PDAT>19991200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Van Puymbroeck et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>175246</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>6009960</PDAT></DNUM>
<DATE><PDAT>20000100</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Leitko, Jr. et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</PCIT><CITED-BY-OTHER/>
</B561>
</B560>
<B570>
<B577><PDAT>25</PDAT></B577>
<B578US><PDAT>1</PDAT></B578US>
</B570>
<B580>
<B582><PDAT>175 40</PDAT></B582>
<B582><PDAT>175 44</PDAT></B582>
<B582><PDAT>175 46</PDAT></B582>
<B582><PDAT>175 58</PDAT></B582>
<B582><PDAT>175250</PDAT></B582>
<B582><PDAT>175252</PDAT></B582>
<B582><PDAT>175253</PDAT></B582>
<B582><PDAT>175254</PDAT></B582>
<B582><PDAT>175256</PDAT></B582>
<B582><PDAT>3408531</PDAT></B582>
<B582><PDAT>3408533</PDAT></B582>
<B582><PDAT>3408535</PDAT></B582>
<B582><PDAT>3408544</PDAT></B582>
<B582><PDAT>3408546</PDAT></B582>
<B582><PDAT> 7386444</PDAT></B582>
<B582><PDAT> 7386445</PDAT></B582>
<B582><PDAT> 7315243</PDAT></B582>
<B582><PDAT> 7315203</PDAT></B582>
<B582><PDAT> 7315228</PDAT></B582>
<B582><PDAT> 7315246</PDAT></B582>
<B582><PDAT> 7315249</PDAT></B582>
<B582><PDAT> 73153</PDAT></B582>
</B580>
<B590><B595><PDAT>5</PDAT></B595><B596><PDAT>11</PDAT></B596><B597US/>
</B590>
</B500>
<B600>
<B680US><DOC><DNUM><PDAT>60/185636</PDAT></DNUM><DATE><PDAT>20000229</PDAT></DATE><KIND><PDAT>00</PDAT></KIND></DOC></B680US>
</B600>
<B700>
<B720>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Gerard T.</PDAT></FNM><SNM><STEXT><PDAT>Pittard</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Houston</PDAT></CITY>
<STATE><PDAT>TX</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>J. Christopher</PDAT></FNM><SNM><STEXT><PDAT>Hetmaniak</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Houston</PDAT></CITY>
<STATE><PDAT>TX</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Curtis</PDAT></FNM><SNM><STEXT><PDAT>Leitko</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Houston</PDAT></CITY>
<STATE><PDAT>TX</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>William J.</PDAT></FNM><SNM><STEXT><PDAT>Mcdonald</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Houston</PDAT></CITY>
<STATE><PDAT>TX</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
</B720>
<B730>
<B731>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Maurer Engineering, Inc.</PDAT></STEXT></ONM></NAM>
<ADR><CITY><PDAT>Houston</PDAT></CITY><STATE><PDAT>TX</PDAT></STATE></ADR>
</PARTY-US>
</B731>
<B732US>
<PDAT>02</PDAT>
</B732US>
</B730>
<B740>
<B741>
<PARTY-US>
<NAM><FNM><PDAT>Kenneth A.</PDAT></FNM><SNM><STEXT><PDAT>Roddy</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B741>
</B740>
<B745>
<B746>
<PARTY-US>
<NAM><FNM><PDAT>David</PDAT></FNM><SNM><STEXT><PDAT>Bagnell</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B746>
<B747>
<PARTY-US>
<NAM><FNM><PDAT>T. Shane</PDAT></FNM><SNM><STEXT><PDAT>Bomar</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B747>
<B748US><PDAT>3672</PDAT></B748US>
</B745>
</B700>
</SDOBI>
<SDOAB>
<BTEXT>
<PARA ID="P-00001" LVL="0"><PTEXT><PDAT>A system of apparatus for use in a coring tool measures the height of a core sample being recovered and transmits data relative thereto to the surface of a formation concurrently during the coring operation. A transmitter of an electromagnetic ranging system rides atop a core sample being formed in the barrel chamber and a receiver member of the electromagnetic ranging system is fixed at a top end of the barrel it known distance above the transmitter. During the coring operation the transmitter transmits a fixed frequency signal to the receiver through drilling fluid disposed therebetween. The distance between the transmitter and receiver decreases and the amplitude of the transmitted signal changes as a function of the separation distance between the transmitter and receiver as the core sample enters the inner barrel and the height of the core sample within the barrel is determined as a function of time and depth. The pressure of the drilling fluid is modulated to transmit a series of pressure pulses from the barrel to the surface encoded to produce a binary digital or pulse-width modulation signal. The electromagnetic ranging system may be incorporated into a coring tool having a core bit disposed at a lower end and a full closure ball valve and core retention assembly movable to a closed position to close the bottom end of the inner barrel and prevent the loss of core collected in the inner barrel chamber.</PDAT></PTEXT></PARA>
</BTEXT>
</SDOAB>
<SDODE>
<RELAPP>
<BTEXT>
<H LVL="1"><STEXT><PDAT>CROSS-REFERENCE TO RELATED APPLICATION</PDAT></STEXT></H>
<PARA ID="P-00002" LVL="0"><PTEXT><PDAT>This application claims priority of U.S. Provisional Patent Application Ser. No. 60/185,636, filed Feb. 29, 2000.</PDAT></PTEXT></PARA>
</BTEXT>
</RELAPP>
<GOVINT>
<BTEXT>
<H LVL="1"><STEXT><PDAT>STATEMENT AS TO FEDERALLY SPONSORED RESEARCH</PDAT></STEXT></H>
<PARA ID="P-00003" LVL="0"><PTEXT><PDAT>The invention described herein was made in the performance of work funded in part by Phase II of Small Business Innovation Research Grant No. DMI-9900706 sponsored by The National Science Foundation. The government may have certain rights in this invention.</PDAT></PTEXT></PARA>
</BTEXT>
</GOVINT>
<BRFSUM>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BACKGROUND OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00004" LVL="0"><PTEXT><PDAT>1. Field of the Invention</PDAT></PTEXT></PARA>
<PARA ID="P-00005" LVL="0"><PTEXT><PDAT>This invention relates generally to wellbore core sampling apparatus and methods, and more particularly to an advanced coring system and method utilizing a core height measurement module that accurately measures the amount of core captured as a function of time and depth, a data telemetry-module that conveys this information to the surface in real time, and a full closure valve assembly that completely closes the bottom of the core barrel under surface control to prevent loss of unconsolidated and highly fractured cores.</PDAT></PTEXT></PARA>
<PARA ID="P-00006" LVL="0"><PTEXT><PDAT>2. Brief Description of the Prior Art</PDAT></PTEXT></PARA>
<PARA ID="P-00007" LVL="0"><PTEXT><PDAT>The taking of core samples is the most accurate means to evaluate rock properties for hydrocarbon and ore body development, scientific investigation and environmental clean up activities. Conventional coring methods and apparatus have two major shortcomings: (1) the absence of real-time monitoring of the core length (recovery) in the core barrel, and (2) the lack of complete closure of the core barrel opening to prevent core loss. While partial or complete core loss is generally not a problem in competent formations, it is an important problem in unconsolidated and highly fractured ones. A review of U.S. and Canadian coring activities showed that partial core loss is experienced in approximately 20% of the wells cored. This lost core translates into considerable costs&mdash;particularly in offshore drilling operations where rig rates can run in excess of $10,000 per hour. Of even greater potential importance is the loss of geologic information.</PDAT></PTEXT></PARA>
<PARA ID="P-00008" LVL="0"><PTEXT><PDAT>It is extremely important to recover the entire interval where the rock is being cored. If any core is not recovered, valuable information is lost. Coring operations are performed under a wide range of operating conditions. These include: (1) variation in wellbore inclination angle from zero (vertical) to ninety degrees (horizontal), (2) use of wide range of drilling fluids such as water and oil-based mixtures, nitrooelltited muds, and air/foam mists, (3) encountering zones of lost circulation and (4) rapid changes in lithology. The net result of these conditions in the standard coring process introduces uncertainties which occur because standpipe pressure, pump speed, mud weight and drill cutting returns (among other things) at the surface are used to &ldquo;assess&rdquo; the progress of the coring operation. None of these parameters are direct measures of the amount of core actually being recovered in the barrel. The present invention eliminates these uncertainties by providing a real-time monitoring device.</PDAT></PTEXT></PARA>
<PARA ID="P-00009" LVL="0"><PTEXT><PDAT>The monitoring feature of the present system accurately measures the amount of core captured as a function of time and depth, and conveys this information to the surface in real combined with the ability to completely close the bottom of the core barrel under surface control and prevent loss of unconsolidated and highly fractured cores, the present system will improve coring success and reduce overall coring costs.</PDAT></PTEXT></PARA>
<PARA ID="P-00010" LVL="0"><PTEXT><PDAT>The present invention provides new hardware modules for core height measurement and core barrel closure that are compatible with conventional and wireline-retrievable coring systems. This present system also does not require any changes to the standard inner and outer core barrel assemblies and it operates with both sealed oil-lubricated and mud-lubricated bearing packs.</PDAT></PTEXT></PARA>
<PARA ID="P-00011" LVL="0"><PTEXT><PDAT>A suitable ball valve assembly for use with the present invention is disclosed in U.S. Pat. No. 6,009,960 titled Coring Tool, issued Jan. 4, 2000 and assigned to Diamond Products International, Inc., of Houston, Tex., which is hereby incorporated by reference to the same extent as if fully set forth herein. U.S. Pat. No. 6,009,960 does not disclose the present electromagnetic ranging system for core height measurement as a function of time and depth, or the present data telemetry system that conveys this information to the surface in real time, however, preliminary testing of the combination utilizing such a valve assembly has proven satisfactory.</PDAT></PTEXT></PARA>
<PARA ID="P-00012" LVL="0"><PTEXT><PDAT>The present invention is distinguished over the prior art in general by an advanced coring system and method utilizing a core height measurement module that accurately measures the amount of core captured as a function of time and depth, a data telemetry module that conveys this information to the surface in real time, and a full closure valve assembly that completely closes the bottom of the core barrel under surface control to prevent loss of unconsolidated and highly fractured cores. The transmitter of the electromagnetic ranging system rides atop a core sample being formed in the barrel chamber and a receiver member of the electromagnetic ranging system is fixed at a top end of the barrel a known distance above the transmitter. During the coring operation the transmitter transmits a fixed frequency signal to the receiver through drilling fluid disposed therebetween. The distance between the transmitter and receiver decreases and the amplitude of the transmitted signal changes as a function of the separation distance between the transmitter and receiver as the core sample enters the inner barrel and the height of the core sample within the barrel is determined as a function of time and depth. The pressure of the drilling fluid is modulated to transmit a series of pressure pulses from the barrel to the surface encoded to produce a binary digital or pulse-width modulation signal. The electromagnetic ranging system may be incorporated into a coring tool having a core bit disposed at a lower end and a full closure ball valve and core retention assembly movable to a closed position to close the bottom end of the inner barrel and prevent the loss of core collected in the inner barrel chamber.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>SUMMARY OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00013" LVL="0"><PTEXT><PDAT>It is therefore an object of the present invention to provide an advanced coring system and method which will eliminate uncertainties that may occur due to variations in standpipe pressure, pump speed, mud weight and drill cutting returns, among other things.</PDAT></PTEXT></PARA>
<PARA ID="P-00014" LVL="0"><PTEXT><PDAT>It is another object of this invention to provide an advanced coring system and method utilizing a core height measurement module that produces direct accurate measurement of the amount of core actually being recovered in the barrel of the coring tool.</PDAT></PTEXT></PARA>
<PARA ID="P-00015" LVL="0"><PTEXT><PDAT>Another object of this invention is to provide an advanced coring system and method that conveys accurate core height data of the core being recovered in the barrel of the coring tool to the surface in real time.</PDAT></PTEXT></PARA>
<PARA ID="P-00016" LVL="0"><PTEXT><PDAT>Another object of this invention is to provide an advanced coring system and method that will prevent loss of unconsolidated and highly fractured cores.</PDAT></PTEXT></PARA>
<PARA ID="P-00017" LVL="0"><PTEXT><PDAT>Another object of this invention is to provide an advanced coring system and method utilizing core height measurement modules and core barrel closure modules that are compatible with conventional and wireline-retrievable coring systems.</PDAT></PTEXT></PARA>
<PARA ID="P-00018" LVL="0"><PTEXT><PDAT>A further object of this invention is to provide an advanced coring system and method utilizing core height measurement modules and core barrel closure modules that does not require any significant changes to standard inner and outer core barrel assemblies and will operate with both sealed oil-lubricated and mud-lubricated bearing packs.</PDAT></PTEXT></PARA>
<PARA ID="P-00019" LVL="0"><PTEXT><PDAT>A still further object of this invention is to provide an advanced coring system and method which will improve coring success and reduce overall coring costs.</PDAT></PTEXT></PARA>
<PARA ID="P-00020" LVL="0"><PTEXT><PDAT>Other objects of the invention will become apparent from time to time throughout the specification as hereinafter related.</PDAT></PTEXT></PARA>
<PARA ID="P-00021" LVL="0"><PTEXT><PDAT>The above noted objects and other objects of the invention are accomplished by an advanced coring system and method utilizing a core height measurement module that accurately measures the amount of core captured as a function of time and depth, a data telemetry module that conveys this information to the surface in real time, and a full closure valve assembly that completely closes the bottom of the core barrel under surface control to prevent loss of unconsolidated and highly fractured cores.</PDAT></PTEXT></PARA>
</BTEXT>
</BRFSUM>
<DRWDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BRIEF DESCRIPTION OF THE DRAWINGS</PDAT></STEXT></H>
<PARA ID="P-00022" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> is a schematic illustration of the electromagnetic core height measurement module.</PDAT></PTEXT></PARA>
<PARA ID="P-00023" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 2A</PDAT></FGREF><PDAT> is a schematic illustration of the weighted fluted transmitter housing that rides on the top of the core and contains the battery-powered data transmitter.</PDAT></PTEXT></PARA>
<PARA ID="P-00024" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 2B</PDAT></FGREF><PDAT> is a schematic top plan view of the weighted fluted transmitter housing.</PDAT></PTEXT></PARA>
<PARA ID="P-00025" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT> is a graph showing the signal-to-noise ratio as a function the separation distance obtained in a typical coring operation.</PDAT></PTEXT></PARA>
<PARA ID="P-00026" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT> is a top plan view of the orifice plate of the mud pulser unit employed in the present invention.</PDAT></PTEXT></PARA>
<PARA ID="P-00027" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT> is a schematic block diagram illustrating the signal transmitting process.</PDAT></PTEXT></PARA>
<PARA ID="P-00028" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 6</PDAT></FGREF><PDAT> is a graph showing raw pressure data taken directly at the output of a triplex pump with the pulser set in an extended &ldquo;On&rdquo; position prior to processing the left side of the graph representing the pressure before the positive pressure pulse is initiated, and the right side representing the pressure change with some of the orifices closed.</PDAT></PTEXT></PARA>
<PARA ID="P-00029" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> is a graph showing the raw pressure data processed with a 50 point moving average applied.</PDAT></PTEXT></PARA>
<PARA ID="P-00030" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 8</PDAT></FGREF><PDAT> is a graph illustrating the binary byte pressure patterns of encoded core heights in core barrels of 5, 10, 20 and 60 and feet; respectively.</PDAT></PTEXT></PARA>
<PARA ID="P-00031" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIGS. 9A and 9B</PDAT></FGREF><PDAT> are longitudinal cross sections of the coring tool showing the spring-armed ball valve in a closed position and in an opened position, respectively.</PDAT></PTEXT></PARA>
</BTEXT>
</DRWDESC>
<DETDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>DESCRIPTION OF THE PREFERRED EMBODIMENT</PDAT></STEXT></H>
<PARA ID="P-00032" LVL="0"><PTEXT><PDAT>In the advanced coring system of the present invention core height measurement is made using an electromagnetic ranging system </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> comprising a matched transmitter </PDAT><HIL><BOLD><PDAT>11</PDAT></BOLD></HIL><PDAT> and receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> pair, as schematically illustrated in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 1</PDAT></FGREF><PDAT>, </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>A and </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>B. The transmitter </PDAT><HIL><BOLD><PDAT>11</PDAT></BOLD></HIL><PDAT> with its associated electronics and oscillator circuitry and on-board battery power supply resides inside of a weighted fluted housing </PDAT><HIL><BOLD><PDAT>13</PDAT></BOLD></HIL><PDAT> (</PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2A</PDAT></FGREF><PDAT>, </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>B) which rides on the top of the core C as it moves upward through the inner core barrel </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> of a coring tool. The transmitter </PDAT><HIL><BOLD><PDAT>11</PDAT></BOLD></HIL><PDAT> outputs a fixed frequency signal whose operating parameters can be set prior to running into the hole. The matched receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is installed in a pup sub directly above the top of the core barrel. The matched receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> has a filter and level detection circuit capable of measuring the received amplitude of the transmitted signal. The signal amplitude changes in a well-defined manner, with the separation distance between the receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and transmitter </PDAT><HIL><BOLD><PDAT>11</PDAT></BOLD></HIL><PDAT> providing a direct measurement of the core height.</PDAT></PTEXT></PARA>
<PARA ID="P-00033" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT> shows the signal-to-noise ratio as a function the separation distance obtained in a typical coring operation. The change in signal strength versus separation distance is quite steep over the first 150 feet. This behavior allows accurate core height measurements to he made since small changes in distance produce relatively large changes in signal strength. A beneficial aspect of this approach is that the core height measurement can be self calibrated for use in different drilling fluids or muds by taking a short series of readings directly below the rotary table in the fluid filled hole.</PDAT></PTEXT></PARA>
<PARA ID="P-00034" LVL="0"><PTEXT><PDAT>The receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> includes an on-board analog-to-digital (A/D) converter connected with the level detection circuit and a micro-controller or microprocessor. The signal strength reading is taken from the A/D converter and processed by the on-board microprocessor. The micro-controller converts the signal level into core height data and sends this information to the surface by controlling the operation of a mud pulse telemetry system.</PDAT></PTEXT></PARA>
<PARA ID="P-00035" LVL="0"><PTEXT><PDAT>Unlike conventional mud pulse telemetry of downhole sensor data to the surface employed in many modern measurement-while-drilling and logging-while-drilling instrumentation systems, the present system provides real-time core height monitoring in a simple, low cost, highly reliable unit.</PDAT></PTEXT></PARA>
<PARA ID="P-00036" LVL="0"><PTEXT><PDAT>Three options are available for modulating the pressure of the drilling fluid to encode and transmit data from the well bottom to the surface. These are the creation of positive, negative or variable frequency pressure pulses. The first two approaches selectively vary the cross sectional flow area available for the drilling fluid to momentarily change pressure and, by creating a series of these events, produce a binary digital or pulse-width modulation encoding scheme. The third system consist of a spinning vane or disc assembly whose rate of rotation can be selectively retarded to support frequency shift keying (FSK) encoding.</PDAT></PTEXT></PARA>
<PARA ID="P-00037" LVL="0"><PTEXT><PDAT>The preferred mud pulse unit </PDAT><HIL><BOLD><PDAT>15</PDAT></BOLD></HIL><PDAT> employed in the advanced coring system is a multi-orifice positive-pressure pulse design, as seen in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>, disposed in the drilling fluid path. The drilling fluid entering the pup sub located directly above the core barrel assembly is forced to flow through a six nozzle orifice plate </PDAT><HIL><BOLD><PDAT>15</PDAT></BOLD></HIL><PDAT>. The nozzles or orifices </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> in this plate can be individually sized to support a wide range of flow rates and produce a given pressure drop. One or more of the nozzles </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> can be selectively opened and closed to modulate the pressure of the drilling fluid. Opening and closing of the nozzles is controlled by the microprocessor in the receiver </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> to reduce the flow area therethrough and create a series of positive-pressure pulses corresponding to the amplitude of the transmitted signal changes. For example, two of the six nozzles can be momentarily closed to increase pressure from 50 to 250 psi above normal standpipe pressure. Table 2 below, shows the flow rates for various core barrel sizes.</PDAT></PTEXT></PARA>
<PARA ID="P-00038" LVL="0"><PTEXT><PDAT>Tests have been carried out using a 6&frac34;&Prime;&times;4&Prime;&times;90&prime; coring tool rated at 10.000 psi capable of collecting 4 inch diameter cores up to 90 feet in length (accuracy &plusmn;&frac12; feet) and using conventional coring hardware with conventional oil and water based drilling fluids and operating at a maximum depth of 18,000 feet. The tool was equipped with the core height measurement module, the data telemetry module, and the full closure valve assembly described hereinafter. The tool had a temperature rating of 150&deg; C. and at minimum battery life of 50 hours. Tests were conducted using positive-pressure mud pulse data telemetry with transmission triggers wherein information was sent on first satisfied time or distance criteria. The coring tool was sized to support the normal range of mud flows used to cut 4 inch diameter cores which is 200 to 340 gallons per minute (gpmii) as shown in Table 2.</PDAT></PTEXT></PARA>
<CWU>
<TABLE-US ID="TABLE-US-00001">
<TABLE-CALS>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1"><PTEXT><PDAT>TABLE 2</PDAT></PTEXT></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry><PTEXT><PDAT>Flow Rates For Various Core Barrel Sizes</PDAT></PTEXT></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="84pt" align="center"/>
<colspec colname="2" colwidth="42pt" align="center"/>
<colspec colname="3" colwidth="91pt" align="center"/>
<tbody valign="top">
<row>
<entry><PTEXT><PDAT>Hole Size</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Barrel Size</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Flow Rate</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>(Inches)</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(Inches)</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(GPM)</PDAT></PTEXT></entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry><PTEXT><PDAT>4&frac34;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>3&frac12; &times; 1&frac34;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>50-90</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>5&frac12;-6&frac12;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>4 &times; 2</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>&ensp;90-160</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>5&frac34;-6&frac34;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>4&frac34; &times; 2</PDAT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>100-180</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL><PDAT>6-6&frac34;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>5&frac34; &times; 3&frac12;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>150-250</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>7&frac12;-7</PDAT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>6&frac14; &times; 4</PDAT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>180-300</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>8-9</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>6&frac34; &times; 4</PDAT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>200-340</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>8&frac12;-9</PDAT><HIL><SP><PDAT>&emsp;</PDAT></SP></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>7 &times; 4</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>220-370</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>9&frac12;-12&frac14;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>8&frac14;&times; 5&frac14;</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>225-450</PDAT></PTEXT></entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</TABLE-CALS>
</TABLE-US>
</CWU>
<PARA ID="P-00039" LVL="0"><PTEXT><PDAT>As shown schematically in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT>, the pressure pulses move up the drill string sued are read using a 0-5000 psi, 4-20 mA pressure transducer </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> connected to the standpipe using a 1502 hammer union. The pressure transducer </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> is connected by way of a cable to a signal conditioning/power supply circuit </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> and a laptop computer </PDAT><HIL><BOLD><PDAT>19</PDAT></BOLD></HIL><PDAT>. The computer </PDAT><HIL><BOLD><PDAT>19</PDAT></BOLD></HIL><PDAT> contains a 16-channel, high-speed data acquisition card, appropriate processing software, and a display for displaying core height in real time. The signal conditioner </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> modifies the output of the pressure transducer </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> to a form suitable for acquisition and processing by the computer </PDAT><HIL><BOLD><PDAT>19</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00040" LVL="0"><PTEXT><PDAT>One of the key features of the present mud pulse telemetry system is that it does not use pulsation dampers (accumulators), but instead takes event data directly out of the pump plunger noise through simple mathematical processing routines. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6</PDAT></FGREF><PDAT> shows raw pressure data taken directly at the output of a triplex pump with the mud pulser set in an extended &ldquo;On&rdquo; position prior to processing. Tile left side of the graph shows the pressure before the positive pressure pulse is initiated, and the right side shows the pressure chance with some of the orifices closed. The pressure variations caused by the individual plunger strokes is nearly the same magnitude as the pressure change caused by the orifice closure. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> shows the same raw data processed with a 50 point moving average applied. The transition from a low (binary value 0) to high state (binary value&equals;1) is clear without the need for accumulators. The data were collected at a sample rate of 50 Hz.</PDAT></PTEXT></PARA>
<PARA ID="P-00041" LVL="0"><PTEXT><PDAT>Thus, the present mud pulser 15 is capable of creating pulses that ale repeatable in magnitude, duration and shape and therefore capable of supporting digital encoding. The digital,encoding scheme is relatively straightforward. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 8</PDAT></FGREF><PDAT> illustrates the binary byte pressure patterns of encoded core heights in core barrels of 5, 10, 20 and 60 feet, respectively.</PDAT></PTEXT></PARA>
<PARA ID="P-00042" LVL="0"><PTEXT><PDAT>The electrical circuitry of the transmitter and oscillator, the receiver, the signal filter and level detection circuit, the analog-to-digital converter, microprocessor the mud-pulse telemetry, and mud pulse transmitter and transducer is conventional in nature and readily apparent to those skilled in the art, and therefore not shown and described in detail.</PDAT></PTEXT></PARA>
<PARA ID="P-00043" LVL="0"><PTEXT><PDAT>Referring now to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 9A and 9B</PDAT></FGREF><PDAT>, a spring-armed ball valve assembly </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> is disposed between the core bit </PDAT><HIL><BOLD><PDAT>21</PDAT></BOLD></HIL><PDAT> and the lower end of the core barrel </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> which closes the bottom of the core barrel after the maximum length of core has been captured. The ball valve assembly </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> shown somewhat schematically in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 9A</PDAT></FGREF><PDAT>, </PDAT><HIL><BOLD><PDAT>9</PDAT></BOLD></HIL><PDAT>B. A suitable ball valve assembly for use is disclosed in U.S. Pat. No. 6,009,960 titled Coring Tool, issued Jan. 4, 2000 and assigned to Diamond Products International, Inc., of Houston, Tex., which is hereby incorporated by reference to the same extent as if fully set forth herein. U.S. Pat. No. 6,009,960 does not disclose the present electromagnetic ranging system for core height measurement as a function of time and depth, or the present data telemetry system that conveys this information to the surface in real time, however, preliminary testing of the combination utilizing such a valve assembly has proven satisfactory. This incorporation-by-reference is for the purpose of simplifying the drawings and descriptions of the preferred full closure valve assembly and providing a more comprehensive detailed description thereof. The reader may refer to the above patent for a more detailed description of particular structural components and operation of the full closure ball valve assembly.</PDAT></PTEXT></PARA>
<PARA ID="P-00044" LVL="0"><PTEXT><PDAT>The full closure ball valve and core retention assembly </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> has a tubular housing </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> securable to the inner tubular barrel </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> and has an inner bore disposed therethrough. A ball valve </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT> is rotatably disposed in the housing </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> adjacent to the bottom end of the inner barrel </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> and is rotatable between a closed (</PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 9A</PDAT></FGREF><PDAT>) and an open position (FIG. </PDAT><HIL><BOLD><PDAT>9</PDAT></BOLD></HIL><PDAT>B). An actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> keyed to the valve ball is slidably disposed on the housing to move between an upper (valve closed) and a lower position (valve open), and is normally biased in the upper (closed) position by a plurality of disc springs (Belleville springs) </PDAT><HIL><BOLD><PDAT>25</PDAT></BOLD></HIL><PDAT> longitudinally disposed about the tubular housing and operably engaged with the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT>. The bore of the valve ball </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT>, in the open (sleeve lower) position is aligned in communication with the inner barrel longitudinal chamber. The actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT>, in its lower position, engages a stop shoulder </PDAT><HIL><BOLD><PDAT>26</PDAT></BOLD></HIL><PDAT> and alignment of a spring retainer ring </PDAT><HIL><BOLD><PDAT>27</PDAT></BOLD></HIL><PDAT> with a clearance groove releases the compression on the Belleville springs </PDAT><HIL><BOLD><PDAT>25</PDAT></BOLD></HIL><PDAT>. The assembly includes means for locking the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> in the lower (valve open) position, and fluid actuated means to release the locking means so as to enable the actuator sleeve to move to the upper (valve closed) position, thereby moving the ball valve to a closed position whereby the inner barrel bottom end is closed to prevent the loss of core collected in the inner barrel chamber. A flow restriction is created when the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> is disposed in the upper (closed) position wherein fluid flow through the flow restriction is substantially increased when the sleeve is moved to the lower (open) position which is detectable by the operator and serves as a &ldquo;telltale&rdquo; for determining when the ball valve </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT> is in a closed position.</PDAT></PTEXT></PARA>
<PARA ID="P-00045" LVL="0"><PTEXT><PDAT>The ball valve </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT> (sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT>) is actuated under surface operator control such that the closure trigger is substantially away from normal operating conditions to prevent it from being tripped inadvertently. Once the ball valve has been tripped, it provides a clear indication or &ldquo;tattletale&rdquo; that it has closed properly.</PDAT></PTEXT></PARA>
<PARA ID="P-00046" LVL="0"><PTEXT><PDAT>In a preferred embodiment, the spring-armed ball valve </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT> is caused to close by first momentarily increasing the drilling fluid flow rate above a pre-set operating level and then reducing the flow back to normal flow ranges. This provides ail absolute pressure indication when the ball valve has closed due to the significant difference in cross sectional flow areas between the open and closed states.</PDAT></PTEXT></PARA>
<PARA ID="P-00047" LVL="0"><PTEXT><PDAT>The actuation force required to rotate the ball valve closed is provided by the stacked series of Belleville springs </PDAT><HIL><BOLD><PDAT>25</PDAT></BOLD></HIL><PDAT> which have been compressed (&ldquo;armed&rdquo;) at the surface prior to running into the hole using appropriate conventional tooling. The ball valve is in its full open position in the armed state. In the open state the ball valve has the same internal diameter as the drift diameter of the inner core barrel.</PDAT></PTEXT></PARA>
<PARA ID="P-00048" LVL="0"><PTEXT><PDAT>With the tool armed, the coring assembly is run into the hole, the bottom tagged, and coring operations commenced. For mud flow rates below the pre-set trigger point, the fluid pressure drop acting across a restriction inside the ball valve assembly </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> causes the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> to be pumped down towards, but not all the way to, the lower stop shoulder </PDAT><HIL><BOLD><PDAT>26</PDAT></BOLD></HIL><PDAT>. For flows below the trigger flow, the movement is not enough to bring the spring retaining ring </PDAT><HIL><BOLD><PDAT>27</PDAT></BOLD></HIL><PDAT> into alignment with the clearance groove cut into the actuator nut. Thus, the ball valve </PDAT><HIL><BOLD><PDAT>23</PDAT></BOLD></HIL><PDAT> remains fully open at all flow rates below the trigger level.</PDAT></PTEXT></PARA>
<PARA ID="P-00049" LVL="0"><PTEXT><PDAT>When the desired length of core has been taken, the flow rate is brought to at level above the trigger flow for a period of about 30-60 seconds. In this case, the movement of the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> is now sufficient to pump the sleeve down to the stop shoulder </PDAT><HIL><BOLD><PDAT>26</PDAT></BOLD></HIL><PDAT> and align the spring retaining ring </PDAT><HIL><BOLD><PDAT>27</PDAT></BOLD></HIL><PDAT> with the clearance groove. This allows the spring retaining ring </PDAT><HIL><BOLD><PDAT>27</PDAT></BOLD></HIL><PDAT> to expand outward into the actuator housing. Then, by stopping the flow, the Belleville spring assembly </PDAT><HIL><BOLD><PDAT>25</PDAT></BOLD></HIL><PDAT> forces the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> away from the stop shoulder </PDAT><HIL><BOLD><PDAT>26</PDAT></BOLD></HIL><PDAT>. Because the actuator sleeve </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> is mechanically keyed to the ball valve </PDAT><HIL><BOLD><PDAT>293</PDAT></BOLD></HIL><PDAT>. this movement causes the ball valve to be rotated closed. The Belleville spring stack </PDAT><HIL><BOLD><PDAT>25</PDAT></BOLD></HIL><PDAT> generates a large closure force capable of shearing off the core and closing the inner barrel.</PDAT></PTEXT></PARA>
<PARA ID="P-00050" LVL="0"><PTEXT><PDAT>While this invention has been described fully and completely with special emphasis upon preferred embodiments, it should be understood that within the scope of the appended claims the invention may be practiced otherwise than as specifically described herein.</PDAT></PTEXT></PARA>
</BTEXT>
</DETDESC>
</SDODE>
<SDOCL>
<H LVL="1"><STEXT><PDAT>We claim: </PDAT></STEXT></H>
<CL>
<CLM ID="CLM-00001">
<PARA ID="P-00051" LVL="0"><PTEXT><PDAT>1. A method for measuring the height of a core sample being recovered in a barrel of a coring tool and transmitting data relative thereto to the surface of a formation concurrently during a coring operation, comprising the steps of:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>providing in the coring tool at least an inner barrel having an internal longitudinal chamber for accommodating a core sample; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>providing a transmitter of an electromagnetic ranging system within a lower end of the barrel to ride atop a core sample being formed in the barrel chamber, and fixing a receiver member of the electromagnetic ranging system at a top end of the barrel a known distance above the transmitter; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>introducing drilling fluid from the surface into the inner barrel between said transmitter and said receiver; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>during the coring operation, transmitting a fixed frequency signal from said transmitter to said receiver through the drilling fluid therebetween; wherein </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>the distance between said transmitter and said receiver decreases and the amplitude of the transmitted signal changes as a function of the separation distance between said transmitter and said receiver as the core sample enters the inner barrel and the height of the core sample within the barrel is determined as a function of time and depth; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>transmitting a signal representing the core height depth to the surface of the formation. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00002">
<PARA ID="P-00052" LVL="0"><PTEXT><PDAT>2. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said step of transmitting a fixed frequency signal from said transmitter to said receiver comprises: </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="3"><PTEXT><PDAT>detecting the amplitude of the transmitted signal changes with a level detection circuit; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="3"><PTEXT><PDAT>converting the detected amplitude of the transmitted signal changes from an analog signal to a digital signal; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="3"><PTEXT><PDAT>processing the digital signal into a data signal representing the core height. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00003">
<PARA ID="P-00053" LVL="0"><PTEXT><PDAT>3. The method according to </PDAT><CLREF ID="CLM-00002"><PDAT>claim 2</PDAT></CLREF><PDAT>, including the step of</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>filtering the transmitted signal with a signal filter prior to detecting the amplitude of the transmitted signal changes. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00004">
<PARA ID="P-00054" LVL="0"><PTEXT><PDAT>4. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said step of transmitting a signal representing the core height depth to the surface of the formation comprises: </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="3"><PTEXT><PDAT>modulating the pressure of the drilling fluid using mud-pulse telemetry to transmit a series of pressure pulses from the barrel to the surface encoded to produce a binary digital or pulse-width modulation signal. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00005">
<PARA ID="P-00055" LVL="0"><PTEXT><PDAT>5. The method according to </PDAT><CLREF ID="CLM-00004"><PDAT>claim 4</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said step of modulating the pressure of the drilling fluid using mud-pulse telemetry comprises: </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="3"><PTEXT><PDAT>forcing the drilling fluid through a multiple nozzle orifice plate, at least one of which nozzles is selectively opened and closed to reduce the flow area therethrough and create a series of positive-pressure pulses. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00006">
<PARA ID="P-00056" LVL="0"><PTEXT><PDAT>6. The method according to </PDAT><CLREF ID="CLM-00005"><PDAT>claim 5</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>the opening and closing of at least one of said nozzles of said multiple nozzle orifice plate is controlled by a microprocessor in said receiver corresponding to the amplitude of the transmitted signal changes. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00007">
<PARA ID="P-00057" LVL="0"><PTEXT><PDAT>7. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT>, comprising the step of</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>calibrating the signal strength of the electromagnetic ranging system relative to the separation distance between said transmitter and said receiver for use with the particular drilling fluid being used by taking several readings of the change in signal strength when said barrel, said transmitter and said receiver are disposed at an upper end of a borehole of the formation filled with the drilling fluid. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00008">
<PARA ID="P-00058" LVL="0"><PTEXT><PDAT>8. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT>, comprising the step of</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>selecting a frequency for use as the frequency of the fixed frequency signal that will minimize electromagnetic attenuation and shielding effects of said inner barrel when formed of metallic material and is disposed in an outer core barrel formed of metallic material. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00009">
<PARA ID="P-00059" LVL="0"><PTEXT><PDAT>9. A system of apparatus for use in a coring tool to measure the height of a core sample being recovered and transmitting data relative thereto to the surface of a formation concurrently during a coring operation, comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>an inner barrel adapted to be received in the coring tool and having, an internal longitudinal chamber for accommodating a core sample; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a transmitter of an electromagnetic ranging system movably disposed within a lower end of the barrel to ride atop a core sample being formed in said barrel chamber, and a receiver member of the electromagnetic ranging system fixed it a top end of said barrel a known distance above said transmitter wherein a quantity of drilling fluid introduced from the surface into said inner barrel is disposed between said transmitter and said received </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>said transmitter during the coring operation, transmitting a fixed frequency signal from said transmitter to said receiver during the coring operation through said drilling fluid therebetween; and wherein </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>the distance between said transmitter and said receiver decreases and the amplitude of the transmitted signal changes as a function of the separation distance between said transmitter and said receiver as the core sample enters said inner barrel and the height of the core sample within the barrel is determined as a function of time and depth. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00010">
<PARA ID="P-00060" LVL="0"><PTEXT><PDAT>10. The system of apparatus according to </PDAT><CLREF ID="CLM-00009"><PDAT>claim 9</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said receiver includes a signal level detection circuit for detecting the amplitude of said transmitted signal changes; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>an analog-to-digital converter connected with said level detection circuit for converting the detected amplitude of said transmitted signal changes from an analog signal to a digital signal; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a microprocessor connected with said analog-to-digital circuit for processing the digital signal into a data signal representing the core height. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00011">
<PARA ID="P-00061" LVL="0"><PTEXT><PDAT>11. The system of apparatus according to </PDAT><CLREF ID="CLM-00010"><PDAT>claim 10</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said receiver includes a signal filter connected with said signal level detection circuit for filtering the signal transmitted by said transmitter. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00012">
<PARA ID="P-00062" LVL="0"><PTEXT><PDAT>12. The system of apparatus according to </PDAT><CLREF ID="CLM-00010"><PDAT>claim 10</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>signal transmitting means connected with said microprocessor for transmitting a signal representing the core height depth to the surface of the formation. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00013">
<PARA ID="P-00063" LVL="0"><PTEXT><PDAT>13. The system of apparatus according to </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said signal transmitting means comprises means for modulating the pressure of the drilling fluid using mud-pulse telemetry to transmit a series of pressure pulses from said barrel to the surface that are encoded to produce a binary digital or pulse-width modulation signal. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00014">
<PARA ID="P-00064" LVL="0"><PTEXT><PDAT>14. The system of apparatus according to </PDAT><CLREF ID="CLM-00013"><PDAT>claim 13</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>a pressure transducer disposed in the drilling fluid path above said barrel for detecting said pressure pulses, said pressure transducer producing a pressure measurement in response to said pressure pulses; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a computer at the surface of the formation including data acquisition means processing software, and display means for displaying core height data in real time; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a signal conditioner and power supply circuit interposed between said pressure transducer and said computer, said signal conditioner modifying the output of said pressure transducer to a form suitable for acquisition and processing by said computer. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00015">
<PARA ID="P-00065" LVL="0"><PTEXT><PDAT>15. The system of apparatus according to </PDAT><CLREF ID="CLM-00013"><PDAT>claim 13</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said means for modulating the pressure of the drilling fluid comprises a multiple nozzle orifice plate disposed in the drilling fluid path, and having at least one nozzle controlled by said microprocessor to be selectively opened and closed to reduce the flow area therethrough and create a series of positive-pressure pulses corresponding to the amplitude of the transmitted signal changes. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00016">
<PARA ID="P-00066" LVL="0"><PTEXT><PDAT>16. A subterranean formation coring apparatus, comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>a tubular outer barrel including structure at an upper end thereof for connection to a drill string, and defining a longitudinal bore; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a core bit disposed at a lower end of the tubular barrel; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>an inner barrel housed in said outer barrel and having an internal longitudinal chamber for accommodating a core sample; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>electromagnetic ranging instrumentation operable to obtain data relating to at least the height of a core sample being recovered and transmit data relative thereto to the surface of a formation concurrently during a coring operation, wherein the electromagnetic ranging instrumentation includes a transmitter movably disposed within a lower end of said inner barrel to ride atop a core sample being formed in said barrel chamber and a receiver fixed at a top end of said inner barrel a known distance above said transmitter wherein a quantity of drilling fluid introduced from the surface into said inner barrel is disposed between said transmitter and said receiver; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>said transmitter transmitting a fixed frequency signal from said transmitter to said receiver during the coring operation through said drilling fluid therebetween wherein the amplitude of the transmitted signal changes as a function of the separation distance between said transmitter and said receiver as the core sample enters said inner barrel and the height of the core sample within the barrel is determined as a function of time and depth. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00017">
<PARA ID="P-00067" LVL="0"><PTEXT><PDAT>17. The coring apparatus according to </PDAT><CLREF ID="CLM-00016"><PDAT>claim 16</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said receiver includes a signal level detection circuit for detecting the amplitude of said transmitted signal changes; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>an analog-to-digital converter connected with said level detection circuit for converting the detected amplitude of said transmitted signal changes from an analog signal to a digital signal; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a microprocessor connected with said analog-to-digital circuit for processing the digital signal into a data signal representing the core height. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00018">
<PARA ID="P-00068" LVL="0"><PTEXT><PDAT>18. The coring apparatus according to </PDAT><CLREF ID="CLM-00017"><PDAT>claim 17</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said receiver includes a signal filter connected with said signal level detection circuit for filtering the signal transmitted by said transmitter. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00019">
<PARA ID="P-00069" LVL="0"><PTEXT><PDAT>19. The coring apparatus according to </PDAT><CLREF ID="CLM-00017"><PDAT>claim 17</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>signal transmitting means connected with said microprocessor for transmitting a signal representing the core height depth to the surface of the formation. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00020">
<PARA ID="P-00070" LVL="0"><PTEXT><PDAT>20. The system of apparatus according to </PDAT><CLREF ID="CLM-00019"><PDAT>claim 19</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said signal transmitting means comprises means for modulating the pressure of the drilling fluid using mud-pulse telemetry to transmit a series of pressure pulses from said barrel to the surface that are encoded to produce a binary digital or pulse-width modulation signal. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00021">
<PARA ID="P-00071" LVL="0"><PTEXT><PDAT>21. The coring apparatus according to </PDAT><CLREF ID="CLM-00020"><PDAT>claim 20</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>a pressure transducer disposed in the drilling fluid path above said inner barrel for detecting said pressure pulses, said pressure transducer producing a pressure measurement in response to said pressure pulses; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a computer at the surface of the formation including data acquisition means processing software, and display means for displaying core height data in real time; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a signal conditioner and power supply circuit interposed between said pressure transducer and said computer, said signal conditioner modifying the output of said pressure transducer to a form suitable for acquisition and processing by said computer. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00022">
<PARA ID="P-00072" LVL="0"><PTEXT><PDAT>22. The coring apparatus according to </PDAT><CLREF ID="CLM-00020"><PDAT>claim 20</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said means for modulating the pressure of the drilling fluid comprises a multiple nozzle orifice plate disposed in the drilling fluid path, and having at least one nozzle controlled by said microprocessor to be selectively opened and closed to reduce the flow area therethrough and create a series of positive-pressure pulses corresponding to the amplitude of the transmitted signal changes. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00023">
<PARA ID="P-00073" LVL="0"><PTEXT><PDAT>23. The coring apparatus according to </PDAT><CLREF ID="CLM-00016"><PDAT>claim 16</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>a full closure ball valve and core retention assembly including a tubular body securable to said inner tube at its upper end and having an inner bore disposed therethrough, said body defining a housing for receiving a ball closure valve; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>an actuator sleeve slidably disposed on said body between an upper and a lower position, said sleeve operably engaged with said ball closure valve and being normally biased in said upper position by biasing means; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>a ball valve rotatably disposed in said housing adjacent to a bottom end of said inner barrel and rotatable between an open and a closed position said ball having a bore disposed therethrough which, in the open position corresponding to said lower position of said sleeve, is in communication with said inner barrel longitudinal chamber; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>means for locking said actuator sleeve in said lower position; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>fluid actuated means to release said locking means so as to enable said actuator sleeve to move to said upper position, thereby moving said ball valve to a closed position whereby said inner barrel bottom end is closed to prevent the loss of core collected in said inner barrel chamber, and means to vary the force necessary to unlock said actuator sleeve. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00024">
<PARA ID="P-00074" LVL="0"><PTEXT><PDAT>24. The coring apparatus according to </PDAT><CLREF ID="CLM-00023"><PDAT>claim 23</PDAT></CLREF><PDAT>, wherein</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>said biasing means includes a plurality of disc springs longitudinally disposed about said tubular body and operably disposed with said actuator sleeve. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00025">
<PARA ID="P-00075" LVL="0"><PTEXT><PDAT>25. The coring apparatus according to </PDAT><CLREF ID="CLM-00016"><PDAT>claim 16</PDAT></CLREF><PDAT>, further comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>means detectable by an operator for determining when the ball valve is in a closed position, including a flow restriction created when said actuator sleeve is disposed in in upper position wherein fluid flow through said flow restriction is substantially increased when said sleeve is moved to said lower position.</PDAT></PTEXT></CLMSTEP>
</CLM>
</CL>
</SDOCL>
<SDODR ID="DRAWINGS">
<EMI ID="EMI-D00000" ALT="embedded image" FILE="US06457538-20021001-D00000.TIF"/>
<EMI ID="EMI-D00001" ALT="embedded image" FILE="US06457538-20021001-D00001.TIF"/>
<EMI ID="EMI-D00002" ALT="embedded image" FILE="US06457538-20021001-D00002.TIF"/>
<EMI ID="EMI-D00003" ALT="embedded image" FILE="US06457538-20021001-D00003.TIF"/>
<EMI ID="EMI-D00004" ALT="embedded image" FILE="US06457538-20021001-D00004.TIF"/>
<EMI ID="EMI-D00005" ALT="embedded image" FILE="US06457538-20021001-D00005.TIF"/>
</SDODR>
</PATDOC>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PATDOC SYSTEM "ST32-US-Grant-025xml.dtd" [
<!ENTITY US06459095-20021001-D00000.TIF SYSTEM "US06459095-20021001-D00000.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00001.TIF SYSTEM "US06459095-20021001-D00001.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00002.TIF SYSTEM "US06459095-20021001-D00002.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00003.TIF SYSTEM "US06459095-20021001-D00003.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00004.TIF SYSTEM "US06459095-20021001-D00004.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00005.TIF SYSTEM "US06459095-20021001-D00005.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00006.TIF SYSTEM "US06459095-20021001-D00006.TIF" NDATA TIF>
<!ENTITY US06459095-20021001-D00007.TIF SYSTEM "US06459095-20021001-D00007.TIF" NDATA TIF>
]>
<PATDOC DTD="2.5" STATUS="Build 20020101">
<SDOBI>
<B100>
<B110><DNUM><PDAT>06459095</PDAT></DNUM></B110>
<B130><PDAT>B1</PDAT></B130>
<B140><DATE><PDAT>20021001</PDAT></DATE></B140>
<B190><PDAT>US</PDAT></B190>
</B100>
<B200>
<B210><DNUM><PDAT>09282048</PDAT></DNUM></B210>
<B211US><PDAT>09</PDAT></B211US>
<B220><DATE><PDAT>19990329</PDAT></DATE></B220>
</B200>
<B500>
<B510>
<B511><PDAT>H01L 2906</PDAT></B511>
<B516><PDAT>7</PDAT></B516>
</B510>
<B520>
<B521><PDAT>257 14</PDAT></B521>
</B520>
<B540><STEXT><PDAT>Chemically synthesized and assembled electronics devices</PDAT></STEXT></B540>
<B560>
<B561>
<PCIT>
<DOC><DNUM><PDAT>3975623</PDAT></DNUM>
<DATE><PDAT>19760800</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Weinberger</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>235152</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4208728</PDAT></DNUM>
<DATE><PDAT>19800600</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Blahut et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>365154</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4371883</PDAT></DNUM>
<DATE><PDAT>19830200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Potember et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>357  8</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5272359</PDAT></DNUM>
<DATE><PDAT>19931200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Nagasubramanian et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>257 40</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5475341</PDAT></DNUM>
<DATE><PDAT>19951200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Reed</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>327566</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5519629</PDAT></DNUM>
<DATE><PDAT>19960500</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Snider</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>364490</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5640343</PDAT></DNUM>
<DATE><PDAT>19970600</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Gallagher et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>365171</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5729752</PDAT></DNUM>
<DATE><PDAT>19980300</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Snider et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>395800</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5790771</PDAT></DNUM>
<DATE><PDAT>19980800</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Culbertson et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>39518201</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B562><NCIT><STEXT><PDAT>J.R. Heath et al, &ldquo;A Defect-Tolerant Computer Architecture: Opportunities for Nanotechnology&rdquo;, Science, vol. 280, pp. 1716-1721 (Jun. 12, 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>L. Guo et al, &ldquo;Nanoscale Silicon Field Effect Transistors Fabricated Using Imprint Lithography&rdquo;, Applied Physics Letters, vol. 71, pp. 1881-1883 (Sep. 29, 1997). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>A.M. Morales et al, &ldquo;A Laser Ablation Method For The Synthesis Of Crystalline Semiconductor Nanowires&rdquo;, Science, vol. 279, pp. 208-268 (Jan. 9, 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>J.R. Heath et al, &ldquo;A Liquid Solution Synthesis Of Single Crystal Germanium Quantum Wires&rdquo;, Chemical Physics Letters, vol. 208, No. 3, 4, pp. 263-268 (Jun. 11, 1993). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>V.P. Menon et al, &ldquo;Fabrication and Evaluation Of Nanoelectrode Ensembles&rdquo;, Analytical Chemistry, vol. 67, pp. 1920-1928 (Jul. 1, 1995). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>L. Guo et al, &ldquo;A Silicon Single-Electron Transistor Memory Operating At Room Temperature&rdquo;, Science, vol. 275, pp. 649-651 (Jan. 31, 1997). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>S.J. Tans et al, &ldquo;Room-Temperature Transistor Base On A Single Carbon Nanotube&rdquo;, Nature, vol. 393, pp. 49-52 (May 7, 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>K.K. Likharev, &ldquo;Correlated Discrete Transfer Of Single Electrons In Ultrasmall Tunnel Junctions&rdquo;, IBM Journal of Research and Development, vol. 32, No. 1, pp. 144-158 (Jan. 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>R.E. Jones Jr., et al, &ldquo;Ferroelectric Non-Volatile Memories For Low-Voltage, Low-Power Applications&rdquo;, Thin Solid Films, vol. 270, pp. 584-588 (Dec. 1, 1995). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>D.B. Amabilino et al, &ldquo;Aggregation Of Self-Assembling Branched &lsqb;n&rsqb;-Rotaxanes&rdquo;, New Journal of Chemistry, vol. 22, No. 9, pp. 959-972 (Sep. 11, 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>T. Vossmeyer et al, &ldquo;Combinatorial Approaches Toward Patterning Nanocrystals&rdquo;, Journal of Applied Physics, vol. 84, No. 7, pp. 3664-3670 (Oct. 1, 1998). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>D.V. Leff et al, &ldquo;Thermodynamic Control Of Gold Nanocrystal Size: Experiment and Theory&rdquo;, The Journal of Physical Chemistry, vol. 99, pp. 7036-7041 (May 4, 1995). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>J.D.L. Holloway et al, &ldquo;Electron-Transfer Reactions Of Metallocenes: Influences Of Metal Oxidation State On Structure And Reactivity&rdquo;, Journal of the American Chemical Society, vol. 101, pp. 2038-2044 (Apr. 11, 1979). </PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
<B562><NCIT><STEXT><PDAT>C. Mead et al, &ldquo;Introduction to VLSI Systems&rdquo;, Addison-Wesley, Ch. 3, Section 10, pp. 79-82 (1980).</PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
</B560>
<B570>
<B577><PDAT>18</PDAT></B577>
<B578US><PDAT>1</PDAT></B578US>
</B570>
<B580>
<B582><PDAT>257 14</PDAT></B582>
</B580>
<B590><B595><PDAT>7</PDAT></B595><B596><PDAT>16</PDAT></B596><B597US/>
</B590>
</B500>
<B700>
<B720>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>James R.</PDAT></FNM><SNM><STEXT><PDAT>Heath</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Santa Monica</PDAT></CITY>
<STATE><PDAT>CA</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>R. Stanley</PDAT></FNM><SNM><STEXT><PDAT>Williams</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Mountain View</PDAT></CITY>
<STATE><PDAT>CA</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Philip J.</PDAT></FNM><SNM><STEXT><PDAT>Kuekes</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Menlo Park</PDAT></CITY>
<STATE><PDAT>CA</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
</B720>
<B730>
<B731>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Hewlett-Packard Company</PDAT></STEXT></ONM></NAM>
<ADR><CITY><PDAT>Palo Alto</PDAT></CITY><STATE><PDAT>CA</PDAT></STATE></ADR>
</PARTY-US>
</B731>
<B732US>
<PDAT>02</PDAT>
</B732US>
</B730>
<B745>
<B746>
<PARTY-US>
<NAM><FNM><PDAT>Olik</PDAT></FNM><SNM><STEXT><PDAT>Chaudhuri</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B746>
<B747>
<PARTY-US>
<NAM><FNM><PDAT>Douglas A.</PDAT></FNM><SNM><STEXT><PDAT>Wille</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B747>
<B748US><PDAT>2814</PDAT></B748US>
</B745>
</B700>
</SDOBI>
<SDOAB>
<BTEXT>
<PARA ID="P-00001" LVL="0"><PTEXT><PDAT>A route to the fabrication of electronic devices is provided, in which the devices consist of two crossed wires sandwiching an electrically addressable molecular species. The approach is extremely simple and inexpensive to implement, and scales from wire dimensions of several micrometers down to nanometer-scale dimensions. The device of the present invention can be used to produce crossbar switch arrays, logic devices, memory devices, and communication and signal routing devices. The present invention enables construction of molecular electronic devices on a length scale than can range from micrometers to nanometers via a straightforward and inexpensive chemical assembly procedure. The device is either partially or completely chemically assembled, and the key to the scaling is that the location of the devices on the substrate are defined once the devices have been assembled, not prior to assembly.</PDAT></PTEXT></PARA>
</BTEXT>
</SDOAB>
<SDODE>
<RELAPP>
<BTEXT>
<H LVL="1"><STEXT><PDAT>CROSS-REFERENCE TO RELATED APPLICATIONS</PDAT></STEXT></H>
<PARA ID="P-00002" LVL="0"><PTEXT><PDAT>The present application is related to the following applications/patents: Ser. No. 09/280,225, now U.S. Pat. No. 6,314,019, issued Nov. 6, 2001 (&ldquo;Molecular Wire Crossbar Interconnects for Signal Routing and Communications&rdquo;); Ser. No. 09/280,189, now U.S. Pat. No. 6,128,214, issued Oct. 3, 2000 (&ldquo;Molecular Wire Crossbar Memory&rdquo;); Ser. No. 09/282,045 (&ldquo;Molecular Wire Crossbar Logic&rdquo;); Ser. No. 09/282,049, now U.S. Pat. No. 6,256,767, issued Jul. 3, 2001 (&ldquo;Demultiplexer for a Molecular Wire Crossbar Network (MWCN Demux)&rdquo;); and Ser. No. 09/280,188 (&ldquo;Molecular Wire Transistors&rdquo;), all filed on even date herewith. The present application is the foundational application, upon which the related applications depend for construction of the various devices and apparati disclosed and claimed therein.</PDAT></PTEXT></PARA>
</BTEXT>
</RELAPP>
<GOVINT>
<BTEXT>
<PARA ID="P-00003" LVL="0"><PTEXT><PDAT>This invention was made with Government support under (DMR-9726597) awarded by the National Science Foundation. The Government has certain rights in this invention.</PDAT></PTEXT></PARA>
</BTEXT>
</GOVINT>
<BRFSUM>
<BTEXT>
<H LVL="1"><STEXT><PDAT>TECHNICAL FIELD</PDAT></STEXT></H>
<PARA ID="P-00004" LVL="0"><PTEXT><PDAT>The present invention relates generally to electronic devices whose functional length scales are measured in nanometers, and, more particularly, to simple devices used as building blocks to form more complicated structures, and to the methods for forming such devices. Devices both of micrometer and nanometer scale may be constructed in accordance with the teachings herein.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>BACKGROUND ART</PDAT></STEXT></H>
<PARA ID="P-00005" LVL="0"><PTEXT><PDAT>The silicon (Si) integrated circuit (IC) has dominated electronics and has helped it grow to become one of the world&apos;s largest and most critical industries over the past thirty-five years. However, because of a combination of physical and economic reasons, the miniaturization that has accompanied the growth of Si ICs is reaching its limit. The present scale of devices is on the order of tenths of micrometers. New solutions are being proposed to take electronics to ever smaller levels; such current solutions are directed to constructing nanometer-scale devices.</PDAT></PTEXT></PARA>
<PARA ID="P-00006" LVL="0"><PTEXT><PDAT>Prior proposed solutions to the problem of constructing nanometer-scale devices have involved (1) the utilization of extremely fine scale lithography using X-rays, electrons, ions, scanning probes, or stamping to define the device components; (2) direct writing of the device components by electrons, ions, or scanning probes; or (3) the direct chemical synthesis and linking of components with covalent bonds. The major problem with (1) is that the wafer on which the devices are built must be aligned to within a small fraction of the size of the device features in at least two dimensions for several successive stages of lithography, followed by etching or deposition to build the devices. This level of control does not scale well as device sizes are reduced to nanometer scale dimensions. It becomes extremely expensive to implement as devices are scaled down to nanometer scale dimensions. The major problem with (2) is that it is a serial process, and direct writing a wafer full of complex devices, each containing trillions of components, could well require many years. Finally, the problem with (3) is that high information content molecules are typically macromolecular structures such as proteins or DNA, and both have extremely complex and, to date, unpredictable secondary and tertiary structures that cause them to twist into helices, fold into sheets, and form other complex 3D structures that will have a significant and usually deleterious effect on their desired electrical properties as well as make interfacing them to the outside world impossible.</PDAT></PTEXT></PARA>
<PARA ID="P-00007" LVL="0"><PTEXT><PDAT>There remains a need for a basic approach to form nanometer-scale devices that can be used to form more complex circuits and systems, and that scale readily and cheaply down to nanometer-scale dimensions.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>DISCLOSURE OF INVENTION</PDAT></STEXT></H>
<PARA ID="P-00008" LVL="0"><PTEXT><PDAT>In accordance with the present invention, a route to the fabrication of electronic devices is provided, in which the devices consist of two crossed wires sandwiching an electrically addressable molecular species. The approach is extremely simple and inexpensive to implement, and scales from wire dimensions of several micrometers down to nanometer-scale dimensions. The device of the present invention can be used to produce crossbar switch arrays, logic devices, memory devices, and communication and signal routing devices.</PDAT></PTEXT></PARA>
<PARA ID="P-00009" LVL="0"><PTEXT><PDAT>The present invention enables construction of molecular electronic devices on a length scale than can range from micrometers to nanometers via a straightforward and inexpensive chemical assembly procedure. The device is either partially or completely chemically assembled, and the key to the scaling is that the location of the devices on the substrate are defined once the devices have been assembled, not prior to assembly.</PDAT></PTEXT></PARA>
<PARA ID="P-00010" LVL="0"><PTEXT><PDAT>The electronic device of the present invention, in one realization, is a quantum-state molecular switch comprising an electrically adjustable tunnel junction between two wires. Only at the intersection of the two wires is an actual device defined. The exact position of this intersection is not important for this architecture. The molecular devices sandwiched between the wires can be electrochemically oxidized or reduced. Oxidation or reduction of the molecule forms the basis of a switch. Oxidation or reduction will affect the tunneling distance or the tunneling barrier height between the two wires, thereby exponentially altering the rate of charge transport across the wire junction. Some types of molecules can be cycled reversibly, while others will act irreversibly. The chemical state of the molecular switches determines the tunneling resistance between the two wires.</PDAT></PTEXT></PARA>
<PARA ID="P-00011" LVL="0"><PTEXT><PDAT>The present invention solves several problems that currently plague current solid state electronic device technology. First, the fundamental device unit is a molecule or a layer of molecules at the junction of two wires, and so the devices will scale down from wires of micrometer length scales to wires of molecular length scales (a nanometer, for example) without appreciable change in device operation. Second, molecular devices are voltage, not electric field, addressable. This means that molecular switches can be set at one voltage, and the state of the switch can be read at another voltage (either smaller in magnitude or a different polarity), and only two wires are required for the entire process. In most solid-state devices, a total of four wires are required to set and subsequently read the state of a switch. These include two wires that are required to set the state of a switch, and two different wires that are required to read the state of that switch. Third, the devices that are fabricated are extremely versatile, and can be configured to carry out any number of tasks, ranging from memory to logic to communication and signal routing to energy storage. Finally, since only two wires are needed to address and read these devices, and since the device itself is defined not by high resolution lithographic templating, but rather by the relatively arbitrary intersection of two wires, the fabrication process for these wires is substantially simpler and more tolerant of manufacturing deficiencies than is the current art.</PDAT></PTEXT></PARA>
</BTEXT>
</BRFSUM>
<DRWDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BRIEF DESCRIPTION OF THE DRAWINGS</PDAT></STEXT></H>
<PARA ID="P-00012" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 1A</PDAT></FGREF><PDAT> is a schematic representation of two crossed wires, with at least one molecule at the intersection of the two wires, in accordance with the invention;</PDAT></PTEXT></PARA>
<PARA ID="P-00013" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 1B</PDAT></FGREF><PDAT> is a perspective elevational view, depicting the device shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1A</PDAT></FGREF><PDAT>;</PDAT></PTEXT></PARA>
<PARA ID="P-00014" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT> is a schematic representation of the steps that might be employed to reduce this invention to practice using lithographically deposited (micrometer or sub-micrometer scale diameter) wires;</PDAT></PTEXT></PARA>
<PARA ID="P-00015" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT> is a schematic representation of the steps that might be employed to reduce this invention to practice using chemically fabricated (nanometer-scale diameter) wires;</PDAT></PTEXT></PARA>
<PARA ID="P-00016" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIGS. 4A</PDAT></FGREF><PDAT>, </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>B, and </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>C depict the molecular structure of three molecular compounds, each of which was utilized to successfully reduce this invention to practice;</PDAT></PTEXT></PARA>
<PARA ID="P-00017" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT> depicts the energy level diagram of devices made according to the scheme outlined in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT>, and utilizing the molecule depicted in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4C</PDAT></FGREF><PDAT>;</PDAT></PTEXT></PARA>
<PARA ID="P-00018" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 6A</PDAT></FGREF><PDAT>, on coordinates of current (in amps) and voltage (in volts), is a plot depicting the electrical responses that were measured when a device of the present invention was reduced to practice using the scheme outlined in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT>, and utilizing the specific molecule depicted in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4C</PDAT></FGREF><PDAT>;</PDAT></PTEXT></PARA>
<PARA ID="P-00019" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 6B</PDAT></FGREF><PDAT>, on coordinates of normalized density of states (dI/dV&times;V/I) and voltage (in volts), is a plot depicting an experimental measurement of the electronic energy levels of the molecular switch that was measured in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6A</PDAT></FGREF><PDAT>; the measurements indicate that the wire/molecule/wire junction acts as a resonant tunneling resistor in the &lsquo;switch-closed&rsquo; state, and as a tunneling resistor in the &lsquo;switch-open&rsquo; state; and</PDAT></PTEXT></PARA>
<PARA ID="P-00020" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> is a schematic representation of a two-dimensional array of switches of the present invention, depicting a 6&times;6 crossbar switch.</PDAT></PTEXT></PARA>
</BTEXT>
</DRWDESC>
<DETDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BEST MODES FOR CARRYING OUT THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00021" LVL="7"><PTEXT><PDAT>Definitions</PDAT></PTEXT></PARA>
<PARA ID="P-00022" LVL="0"><PTEXT><PDAT>As used herein, the term &ldquo;self-aligned&rdquo; as applied to &ldquo;junction&rdquo; means that the junction that forms the switch and/or other electrical connection between two wires is created wherever two wires, either of which may be coated or functionalized, cross each other, because it is the act of crossing that creates the junction.</PDAT></PTEXT></PARA>
<PARA ID="P-00023" LVL="0"><PTEXT><PDAT>The term &ldquo;self-assembled&rdquo; as used herein refers to a system that naturally adopts some geometric pattern because of the identity of the components of the system; the system achieves at least a local minimum in its energy by adopting this configuration.</PDAT></PTEXT></PARA>
<PARA ID="P-00024" LVL="0"><PTEXT><PDAT>The term &ldquo;singly configurable&rdquo; means that a switch can change its state only once via an irreversible process such as an oxidation or reduction reaction; such a switch can be the basis of a programmable read-only memory (PROM), for example.</PDAT></PTEXT></PARA>
<PARA ID="P-00025" LVL="0"><PTEXT><PDAT>The term &ldquo;reconfigurable&rdquo; means that a switch can change its state multiple times via a reversible process such as an oxidation or reduction; in other words, the switch can be opened and closed multiple times, such as the memory bits in a random access memory (RAM).</PDAT></PTEXT></PARA>
<PARA ID="P-00026" LVL="0"><PTEXT><PDAT>The term &ldquo;bi-stable&rdquo; as applied to a molecule means a molecule having two relatively low energy states. The molecule may be either irreversibly switched from one state to the other (singly configurable) or reversibly switched from one state to the other (reconfigurable).</PDAT></PTEXT></PARA>
<PARA ID="P-00027" LVL="0"><PTEXT><PDAT>Micron-scale dimensions refers to dimensions that range from 1 micrometer to a few micrometers in size.</PDAT></PTEXT></PARA>
<PARA ID="P-00028" LVL="0"><PTEXT><PDAT>Sub-micron scale dimensions refers to dimensions that range from 1 micrometer down to 0.04 micrometers.</PDAT></PTEXT></PARA>
<PARA ID="P-00029" LVL="0"><PTEXT><PDAT>Nanometer scale dimensions refers to dimensions that range from 0.1 nanometers to 50 nanometers (0.05 micrometers).</PDAT></PTEXT></PARA>
<PARA ID="P-00030" LVL="0"><PTEXT><PDAT>Micron-scale and submicron-scale wires refers to rod or ribbon-shaped conductors or semiconductors with widths or diameters having the dimensions of 1 to 10 micrometers, heights that can range from a few tens of nanometers to a micrometer, and lengths of several micrometers and longer.</PDAT></PTEXT></PARA>
<PARA ID="P-00031" LVL="7"><PTEXT><PDAT>Crossed Wire Switch</PDAT></PTEXT></PARA>
<PARA ID="P-00032" LVL="0"><PTEXT><PDAT>The essential device features are shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 1A-1B</PDAT></FGREF><PDAT>. A crossed wire switch </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> comprises two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, each either a metal or semiconductor wire, that are crossed at some non-zero angle. In between those wires is a layer of molecules or molecular compounds </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT>, denoted R in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 1A and 1B</PDAT></FGREF><PDAT>. The particular molecules </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> (denoted R</PDAT><HIL><SB><PDAT>s</PDAT></SB></HIL><PDAT>) that are sandwiched at the intersection of the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> are identified as switch molecules. When an appropriate voltage is applied across the wires, the switch molecules are either oxidized or reduced. When a molecule is oxidized (reduced), then a second species is reduced (oxidized) so that charge is balanced. These two species are then called a redox pair. One example of this device would be for one molecule to be reduced, and then a second molecule (the other half of the redox pair) is oxidized. In another example, a molecule is reduced, and one of the wires is oxidized. In a third example, a molecule is oxidized, and one of the wires is reduced. In a fourth example, one wire is oxidized, and an oxide associated with the other wire is reduced. In all cases, oxidation or reduction will affect the tunneling distance or the tunneling barrier height between the two wires, thereby exponentially altering the rate of charge transport across the wire junction, and serving as the basis for a switch.</PDAT></PTEXT></PARA>
<PARA ID="P-00033" LVL="0"><PTEXT><PDAT>The electrical tasks performed by these devices are largely determined by the types of wires (electrodes) and the interwire materials that are used. Table I presents the various types of devices that might be fabricated from various combinations of the wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> in FIGS </PDAT><HIL><BOLD><PDAT>1</PDAT></BOLD></HIL><PDAT>A-</PDAT><HIL><BOLD><PDAT>1</PDAT></BOLD></HIL><PDAT>B.</PDAT></PTEXT></PARA>
<CWU>
<TABLE-US ID="TABLE-US-00001">
<TABLE-CALS>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1"><PTEXT><PDAT>TABLE I</PDAT></PTEXT></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry><PTEXT><PDAT>Wire (Electrode) Materials</PDAT></PTEXT></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="6">
<colspec colname="1" colwidth="35pt" align="left"/>
<colspec colname="2" colwidth="28pt" align="left"/>
<colspec colname="3" colwidth="35pt" align="left"/>
<colspec colname="4" colwidth="35pt" align="left"/>
<colspec colname="5" colwidth="49pt" align="left"/>
<colspec colname="6" colwidth="35pt" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry><PTEXT><PDAT>Semi-</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry><PTEXT><PDAT>conductor-</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry></entry>
<entry><PTEXT><PDAT>semi-</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Metal-</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Metal-</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Metal-</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Semiconductor-</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>conductor</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Device</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>metal</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>metal</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>semicon-</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Semiconductor</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(hetero-</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Type</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(same)</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(different)</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>ductor</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>(p-n junction)</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>junction</PDAT></PTEXT></entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"></entry>
</row>
<row>
<entry><PTEXT><PDAT>Resistor</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry></entry>
<entry></entry>
</row>
<row>
<entry><PTEXT><PDAT>Tunneling</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>resistor</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Resonant</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>tunneling</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>resistor</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Diode</PDAT></PTEXT></entry>
<entry></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Tunneling</PDAT></PTEXT></entry>
<entry></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>diode</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Resonant</PDAT></PTEXT></entry>
<entry></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>tunneling</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>diode</PDAT></PTEXT></entry>
</row>
<row>
<entry><PTEXT><PDAT>Battery</PDAT></PTEXT></entry>
<entry></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
<entry></entry>
<entry><PTEXT><PDAT>X</PDAT></PTEXT></entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</TABLE-CALS>
</TABLE-US>
</CWU>
<PARA ID="P-00034" LVL="0"><PTEXT><PDAT>Depending on the molecules or materials that are used between the wires (the electrodes), each junction can either display the types of electrical function described below immediately on contact of the wires or the junction can have a switching function that acts to connect or disconnect the two wires together electrically. This switch can either be singly configurable or reconfigurable. In the first case, the initial state of the switch is open or closed. Electrically biasing the switch beyond a particular threshold voltage that is determined by the materials in the junction, which is essentially an electrochemical cell, oxidizes or reduces the material or molecules between the wires to irreversibly close or open the switch, respectively, thus permanently reversing its initial state. In the second case, by cycling the polarity and magnitude of the voltage on the switch beyond the appropriate threshold values, it is possible to reversibly oxidize or reduce the properly selected materials or molecules to close or open the switch many times. In either case, when closed, the type of electrical connection that is made between the wires depends upon the materials from which the wires (or electrodes) are fabricated as well as the identity of the molecules or materials between the wires.</PDAT></PTEXT></PARA>
<PARA ID="P-00035" LVL="0"><PTEXT><PDAT>Table I above shows a matrix of the various types of functions that can be obtained from various combinations of electrode materials and materials or molecules used in the junction. A resistor has a linear current-voltage characteristic, and is made by intentionally over-reducing the junction between various types of wires to essentially form a short circuit between the wires. The opposite of this process is to over-oxidize a junction, which will consume the wire in a localized region and effectively break the wire (create an open circuit) in that wire at the position of the junction. A tunneling resistor maintains a thin, approximately 2 nanometer thick, insulating barrier between wires and has an exponential current-voltage characteristic. In the case that junction molecules or materials have a sharply defined energy state inside the band gap of an electrically insulating barrier that can be accessed by electrically biasing the junction, the connection between the wires can exhibit a flow of electrical current that is dominated by the process of resonant tunneling. The resonant tunneling can produce one or more inflection points in the otherwise exponential current-voltage characteristic of a tunneling resistor. A diode is a junction that passes current more easily in one direction than in the other, and thus has an asymmetry in the current-voltage characteristic for positive and negative voltages. A tunneling diode has both the positive-negative voltage asymmetry of the diode and the exponential current-voltage characteristic of the tunneling resistor. A resonant tunneling diode has a positive-negative voltage asymmetry plus it has a peak in its current-voltage characteristic, such that over a restricted range of increasing magnitude of the voltage the magnitude of the current actually decreases, a phenomenon that is known as negative differential resistivity. Finally, a battery is a circuit element that acts to hold a constant voltage difference between its electrodes as long as the battery is sufficiently charged, e.g., there is a sufficient supply of oxidizing and reducing agents separated by an insulating barrier. Charging the battery is accomplished by placing the appropriate voltage across the junction, which as stated before is an electrochemical cell, to only partially oxidize or reduce the material or molecules in the junction. In general, any real junction between wires formed by the processes described above will actually have two or more of the electrical functions described, with the effective circuit elements connected in series.</PDAT></PTEXT></PARA>
<PARA ID="P-00036" LVL="0"><PTEXT><PDAT>Thus, the present invention may be executed with any number of metallic or semiconducting wire/molecule combinations, depending on the device properties desired from the assembled circuit.</PDAT></PTEXT></PARA>
<PARA ID="P-00037" LVL="7"><PTEXT><PDAT>Fabrication of Wire Electrodes</PDAT></PTEXT></PARA>
<PARA ID="P-00038" LVL="2"><PTEXT><PDAT>1. Process-Defined Wires (defined as wires that are prepared by conventional electronic-circuit processing techniques; wires are typically prepared on a substrate as part of a circuit):</PDAT></PTEXT></PARA>
<PARA ID="P-00039" LVL="0"><PTEXT><PDAT>Metallic and semiconductor wires, with diameters ranging from several micrometers to a single micrometer (defined as micrometer-scale), or with diameters ranging from a single micrometer down to 40 nanometers (defined as sub-micrometer scale) in diameter, may be prepared using well-established art, including lithographic (optical, ultraviolet, or electron beam) technologies. These wires normally have a ribbon shape or rectangular cross section, although circular cross sections are not precluded, with the width of the wire being determined by the lithographic process used to define the wire and its height being defined by the amount of material deposited in the region defined by lithography.</PDAT></PTEXT></PARA>
<PARA ID="P-00040" LVL="2"><PTEXT><PDAT>2. Chemically-Prepared Wires (these wires are prepared by techniques other than conventional electronic processing technology; wires are typically prepared as a bulk material, rather than as part of a circuit board):</PDAT></PTEXT></PARA>
<PARA ID="P-00041" LVL="0"><PTEXT><PDAT>Metal and semiconductor nanowires are defined as wires with diameters below 50 nanometers (typically 2 to 20 nanometers), and with lengths in the range of 0.1 micrometers to 50 micrometers (typically 5 to 10 micrometers). These may be prepared chemically using any one of a number of techniques described in the references given below.</PDAT></PTEXT></PARA>
<PARA ID="P-00042" LVL="0"><PTEXT><PDAT>One example of a reported technique for the production of semiconductor nanowires of the semiconducting element germanium is to react germanium tetrachloride and phenyltrichlorogermanium with a dispersion of sodium metal in the solvent toluene, and at a temperature near 300&deg; C. in a closed vessel, under an inert environment, for a period of several days. That preparation produces single-crystal germanium nanowires of diameters three to thirty nanometers, and of lengths from 0.5 to 10 micrometers.</PDAT></PTEXT></PARA>
<PARA ID="P-00043" LVL="0"><PTEXT><PDAT>A second example of a reported technique for the production of semiconductor nanowires of the semiconducting element silicon, is to laser vaporize a target containing elemental silicon and iron. The target is placed in a vacuum oven at 1300&deg; C., and an inert gas is flowed through the oven during the vaporization process. This technique produces silicon wires that have diameters in the range of 20 to 30 nanometers, and lengths ranging from 1 to 20 micrometers.</PDAT></PTEXT></PARA>
<PARA ID="P-00044" LVL="0"><PTEXT><PDAT>One example of a reported technique for the production of metallic nanowires of the metallic element gold is to electrochemically grow gold wires within the pores of an anodically etched aluminum oxide thin film. The aluminum oxide is dissolved in acidic solution, releasing the gold nanowires, which are then collected. Gold nanowires grown in this manner are characterized by diameters ranging from 20 to 30 nanometers, and lengths ranging from 0.5 to 5 micrometers.</PDAT></PTEXT></PARA>
<PARA ID="P-00045" LVL="0"><PTEXT><PDAT>Nanowires of various metallic and semiconducting materials may be prepared in a variety of fashions that are listed below. Some of these devices will require doped semiconductor wires, such as doped Si.</PDAT></PTEXT></PARA>
<PARA ID="P-00046" LVL="0"><PTEXT><PDAT>For the case of Si wires, the wires can be doped when the wires are physically prepared. In this case, it is necessary to add the dopant into the reaction vessel as the wires are formed. For example, in the laser ablation/vacuum oven preparation technique described above, a small amount of dopant gas, such as phosphorus trihydride (PH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>) or arsenic trihydride (AsH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>) is added into the inert gas (argon, for example) that flows through the vacuum oven during the laser ablation/wire formation process.</PDAT></PTEXT></PARA>
<PARA ID="P-00047" LVL="0"><PTEXT><PDAT>Conversely, these wires can be modulation-doped by coating their surfaces with appropriate molecules&mdash;either electron-withdrawing groups (Lewis acids, such as boron trifluoride (BF</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)) or electron-donating groups (Lewis bases, such as alkylamines) to make them p-type or n-type conductors, respectively. See wire preparation routes listed below. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1B</PDAT></FGREF><PDAT> depicts a coating </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> on wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and a coating </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> on wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>. The coatings </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> may be modulation-doping coatings, tunneling barriers (e.g., oxides), or other nano-scale functionally suitable materials. Alternatively, the wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> themselves may be coated with one or more R species </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT>, and where the wires cross, R</PDAT><HIL><SB><PDAT>s </PDAT></SB></HIL><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> is formed. Or yet alternatively, the wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> may be coated with molecular species </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT>, respectively, for example, that enable one or both wires to be suspended to form colloidal suspensions, as discussed below.</PDAT></PTEXT></PARA>
<PARA ID="P-00048" LVL="0"><PTEXT><PDAT>To dope the wires via modulation-doping, it is necessary to chemically functionalize the surface of the wires using organic or inorganic molecules that will covalently bind to the Si&mdash;O&mdash;H groups at the surface of the wires. When silicon nanowires are exposed to air, a thin surface layer (1 nm) of SiO</PDAT><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>will naturally form, and at the SiO</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>/air interface, the SiO</PDAT><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>surface is terminated by Si&mdash;O&mdash;H bonds. Groups that will bind to or replace Si&mdash;O&mdash;H groups are not limited to but include R&mdash;Si(CH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)</PDAT><HIL><SB><PDAT>x</PDAT></SB></HIL><PDAT>(OCH</PDAT><HIL><SB><PDAT>3&minus;x</PDAT></SB></HIL><PDAT>), R&mdash;Si(CH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)</PDAT><HIL><SB><PDAT>x</PDAT></SB></HIL><PDAT>(OCH</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>CH</PDAT><HIL><SB><PDAT>3&minus;x</PDAT></SB></HIL><PDAT>), R&mdash;Si(CH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)</PDAT><HIL><SB><PDAT>x</PDAT></SB></HIL><PDAT>Cl</PDAT><HIL><SB><PDAT>3&minus;x</PDAT></SB></HIL><PDAT>, and others. In this case, R represents an organic or inorganic moiety that can contain electron-withdrawing (a Lewis acid) or electron-donating groups (a Lewis base). This chemistry of binding molecules to a SiO</PDAT><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>passivated silicon surface is well established. One published example reaction for binding molecules to the surface of SiO</PDAT><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>passivated silicon is:</PDAT></PTEXT></PARA>
<PARA ID="P-00049" LVL="0"><PTEXT><F><PTEXT><PDAT>Si&mdash;O&mdash;H</PDAT><HIL><SB><PDAT>(surface)</PDAT></SB></HIL><PDAT>&plus;R&mdash;Si(CH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Cl&rarr;Si&mdash;O&mdash;Si(CH</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>)</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>R&plus;HCl</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00050" LVL="0"><PTEXT><PDAT>Other semiconductor wires can be functionalized with organo-amines, organo-thiols, organo-phosphates, etc.</PDAT></PTEXT></PARA>
<PARA ID="P-00051" LVL="0"><PTEXT><PDAT>No previous description of how to modulation-dope chemically synthesized semiconductor nanowires has yet appeared in the literature.</PDAT></PTEXT></PARA>
<PARA ID="P-00052" LVL="0"><PTEXT><PDAT>For the case of other nanowires, such as metal nanowires, the wires can be chemically functionalized with R&mdash;SH (for gold or silver wires), or R&mdash;NH</PDAT><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>(for platinum wires and palladium wires), or R&mdash;CO</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>H for other metals such as Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>-coated aluminum wires or titanium wires), where the R-group denotes some organic moiety that will lend the wire certain chemical properties&mdash;such as the property that will allow the person skilled in the art to disperse the wires, as a colloid, in a solvent. In one example, gold wires might be functionalized with dodecanethiol (C</PDAT><HIL><SB><PDAT>12</PDAT></SB></HIL><PDAT>H</PDAT><HIL><SB><PDAT>25</PDAT></SB></HIL><PDAT>SH). The dodecanethiol not only will provide the wires with a thin surface tunneling barrier, but will also allow for the wires to be dispersed in simple organic solvents, such as hexane or chloroform.</PDAT></PTEXT></PARA>
<PARA ID="P-00053" LVL="7"><PTEXT><PDAT>Wire Preparation Routes</PDAT></PTEXT></PARA>
<PARA ID="P-00054" LVL="0"><PTEXT><PDAT>The following materials may be prepared as nanowires according to the reference listed.</PDAT></PTEXT></PARA>
<PARA ID="P-00055" LVL="2"><PTEXT><PDAT>1. Silicon: A. M. Morales et al, &ldquo;A laser ablation method for the synthesis of crystalline semiconductor nanowires&rdquo;, </PDAT><HIL><ITALIC><PDAT>Science, </PDAT></ITALIC></HIL><PDAT>Vol. 279, pp. 208-211 (Jan. 9, 1998).</PDAT></PTEXT></PARA>
<PARA ID="P-00056" LVL="2"><PTEXT><PDAT>2. Germanium: J. R. Heath et al, &ldquo;A liquid solution synthesis of single crystal germanium quantum wires&rdquo;, Chemical Physics Letters, Vol. 208, pp. 263&mdash;268 (Jun. 11, 1993).</PDAT></PTEXT></PARA>
<PARA ID="P-00057" LVL="2"><PTEXT><PDAT>3. Metal Nanowires: V. P. Menon et al, &ldquo;Fabrication and Evaluation of Nanoelectrode Ensembles&rdquo;, </PDAT><HIL><ITALIC><PDAT>Analytical Chemistry, </PDAT></ITALIC></HIL><PDAT>Vol. 67, pp. 1920-1928 (Jul. 1, 1995).</PDAT></PTEXT></PARA>
<PARA ID="P-00058" LVL="2"><PTEXT><PDAT>4. Functionalizing Silicon: T. Vossmeyer et al, &ldquo;Combinatorial approaches toward patterning nanocrystals&rdquo;, </PDAT><HIL><ITALIC><PDAT>Journal of Applied Physics, </PDAT></ITALIC></HIL><PDAT>Vol. 84, pp. 3664-3670 (Oct. 1, 1998) (one of a number of references).</PDAT></PTEXT></PARA>
<PARA ID="P-00059" LVL="2"><PTEXT><PDAT>5. Functionalizing the Surfaces of Gold Nanostructures: D. V. Leff et al, &ldquo;Thermodynamic Size Control of Au Nanocrystals: Experiment and Theory&rdquo;, </PDAT><HIL><ITALIC><PDAT>The Journal of Physical Chemistry, </PDAT></ITALIC></HIL><PDAT>Vol. 99, p. 7036-7041 (May 4, 1995).</PDAT></PTEXT></PARA>
<PARA ID="P-00060" LVL="0"><PTEXT><PDAT>Molecular switching components may come from any number of different classes of molecules, depending, again, on the desired properties of the device. The key requirement of the molecules is that, when they are sandwiched between two wires, they may be electrochemically modified (i.e. oxidized or reduced) by applying a voltage across the wires. When the molecular components are so modified, the net effect is that the tunneling barrier between the two wires is modified, and the rate of current flow is changed. This forms the basis of a switch that can, in turn, be used for memory, logic operations, and communication and signal routing networks. Molecular switches can include redox pairs of molecules, in which application of a voltage reduces one of the molecules and oxidizes the other. An example of such a molecular redox pair might be: nickelocene (di-cyclopentadienyl nickel), or Cp</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Ni, with tetra-butylammonium hexafluorophosphate (Bu</PDAT><HIL><SB><PDAT>4</PDAT></SB></HIL><PDAT>NPF</PDAT><HIL><SB><PDAT>6</PDAT></SB></HIL><PDAT>). The reaction, then, would be:</PDAT></PTEXT></PARA>
<PARA ID="P-00061" LVL="0"><PTEXT><F><PTEXT><PDAT>(reduction) Cp</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Ni&plus;Bu</PDAT><HIL><SB><PDAT>4</PDAT></SB></HIL><PDAT>NPF</PDAT><HIL><SB><PDAT>6</PDAT></SB></HIL><PDAT>&rarr;Cp</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Ni</PDAT><HIL><SP><PDAT>&minus;</PDAT></SP></HIL><PDAT>&plus;Bu</PDAT><HIL><SB><PDAT>4</PDAT></SB></HIL><PDAT>NPF</PDAT><HIL><SB><PDAT>6</PDAT></SB></HIL><HIL><SP><PDAT>&plus;</PDAT></SP></HIL><PDAT>(&minus;1.7 V)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00062" LVL="7"><PTEXT><PDAT>or</PDAT></PTEXT></PARA>
<PARA ID="P-00063" LVL="0"><PTEXT><F><PTEXT><PDAT>(oxidation) Cp</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Ni&plus;Bu</PDAT><HIL><SB><PDAT>4</PDAT></SB></HIL><PDAT>NPF</PDAT><HIL><SB><PDAT>6</PDAT></SB></HIL><PDAT>&rarr;Cp</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>Ni</PDAT><HIL><SP><PDAT>&plus;</PDAT></SP></HIL><PDAT>&plus;Bu</PDAT><HIL><SB><PDAT>4</PDAT></SB></HIL><PDAT>NPF</PDAT><HIL><SB><PDAT>6</PDAT></SB></HIL><HIL><SP><PDAT>&minus;</PDAT></SP></HIL><PDAT>(&minus;0.1 V)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00064" LVL="0"><PTEXT><PDAT>The nickelocene system is of particular interest in that the reduction, as probed by solution phase cyclic voltammetry, is highly asymmetric. Such asymmetry is analogous to magnetization hysteresis curves that form the basis for stable and re-writeable magnetic memory. However, in the presence of oxygen, the reduction of nickelocene is irreversible, as probed by solution phase voltammetry. In either case, reduction or oxidation of this system will modify the tunneling barrier between the two wires between which the molecules are sandwiched. Thus, this system could operate as either a reconfigurable, or a singly configurable molecular switch. For metallocene systems, see, e.g., J. D. L. Holloway et al, &ldquo;Electron-transfer reactions of metallocenes: Influence of metal oxidation state on structure and reactivity&rdquo;, </PDAT><HIL><ITALIC><PDAT>Journal of the American Chemical Society, </PDAT></ITALIC></HIL><PDAT>Vol. 101, pp. 2038-2044 (Apr. 11, 1979).</PDAT></PTEXT></PARA>
<PARA ID="P-00065" LVL="0"><PTEXT><PDAT>The connector species </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> comprises a material that displays a significant, or measurable, hysteresis in its current-voltage curve, obtained either from solution electrochemistry or from current-voltage characteristics in a solid-state junction. Examples of such species include metalocenes, rotaxanes, pseudo-rotaxanes, and catenanes.</PDAT></PTEXT></PARA>
<PARA ID="P-00066" LVL="0"><PTEXT><PDAT>The present invention can be utilized to form a useful device in any one of three ways. First, if at least one of the wires is a doped semiconductor, then resonant tunneling between the two wires through the electronic states of the molecules will form a resonant-tunneling diode that, among other things, might serve as an inverter logic element. Second, if the redox pair can be reversibly oxidized or reduced, and if there is voltage hysteresis in the oxidation or reduction current/voltage scan, then the device forms the basis for a random access memory element, a re-settable switch, molecular logic gates, or a signal communication/routing network. Finally, if the redox pair can be irreversibly oxidized or reduced, then the device forms the basis for a read-only memory element, a singly configurable switch, logic gates, and a signal communication/routing network.</PDAT></PTEXT></PARA>
<PARA ID="P-00067" LVL="0"><PTEXT><PDAT>For micrometer-scale wires, devices made from redox pairs could be prepared according to the method depicted in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2A-2D</PDAT></FGREF><PDAT>. An insulating substrate </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> (SiO</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>, or example) is coated with a photosensitive resist </PDAT><HIL><BOLD><PDAT>26</PDAT></BOLD></HIL><PDAT> and then covered with a shadow mask </PDAT><HIL><BOLD><PDAT>28</PDAT></BOLD></HIL><PDAT> and exposed to light </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>, as illustrated in FIG. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>A. The exposed pattern is developed, and a metallic wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> (Al, for example) is deposited onto the substrate </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT>. A thin (1 to 2 nm) insulating layer </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> (Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>) is formed on the Al surface&mdash;in this case by simple exposure of the patterned substrate to air, as shown in FIG. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>B. Next, a re-dox pair </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT>, labeled R in the figure, is deposited either by chemically selective deposition onto the Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>, as a Langmuir film over the entire substrate, or by sublimation of the molecules onto the entire substrate. In the latter case, redox pairs exist both on </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and off </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b </PDAT></ITALIC></HIL><PDAT>the deposited wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and its insulating layer </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, as shown in FIG. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>C. Next, a second wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> is deposited perpendicular to the first wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> through a shadow mask. The second wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> may include a buffer layer </PDAT><HIL><BOLD><PDAT>38</PDAT></BOLD></HIL><PDAT> (Ti or Cr, for example) which will form an interface with the deposited molecules, followed by the thicker wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>&prime; deposited on top of the buffer layer, or it may just consist of a single wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>. Only where the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> cross is a device </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> defined, since an application of a voltage across the two wires is necessary to address the device. Thus, as long as the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> intersect, no further alignment of the two lithographic steps is necessary in order to make a single device </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00068" LVL="0"><PTEXT><PDAT>For nanometer scale wires, devices made from redox pairs could be prepared according to the method depicted in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 3A-3C</PDAT></FGREF><PDAT>. On this case, a metal (i.e., gold) or semiconductor (i.e., silicon) nanowire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, possibly with an insulating surface layer </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> (for silicon, this is the naturally occurring SiO</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>; for gold, this can be an alkylthiol molecular layer) is deposited on a substrate </PDAT><HIL><BOLD><PDAT>34</PDAT></BOLD></HIL><PDAT>, as illustrated in FIG. </PDAT><HIL><BOLD><PDAT>3</PDAT></BOLD></HIL><PDAT>A. Second, a redox pair of molecules </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> (labeled R in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 3B</PDAT></FGREF><PDAT>) is transferred as either a Langmuir-Blodgett film, or via some other form of deposition such as vacuum sublimation. The redox pair </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> can cover both the wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and the substrate </PDAT><HIL><BOLD><PDAT>34</PDAT></BOLD></HIL><PDAT>. In the last step, either a metal or a semiconductor nanowire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, possibly with an insulating layer (not shown), is deposited across the first wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>. Only those redox pairs </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> that are sandwiched between the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> are defined, or can function, as molecular switches </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT>, as illustrated in FIG. </PDAT><HIL><BOLD><PDAT>3</PDAT></BOLD></HIL><PDAT>C.</PDAT></PTEXT></PARA>
<PARA ID="P-00069" LVL="0"><PTEXT><PDAT>In one realization of the present invention, the functional groups on the molecular wires fit together like a lock and key. One wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is coated with one molecular species </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, and the other wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> is coated with the other molecular species </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT>. By the simple process of crossing one type of coated wire over another, the two types of molecules recognize and form links R</PDAT><HIL><SB><PDAT>s </PDAT></SB></HIL><PDAT>to each other, thus connecting the two wires at a point, and forming a redox pair at that point.</PDAT></PTEXT></PARA>
<PARA ID="P-00070" LVL="0"><PTEXT><PDAT>In another realization, one wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is deposited on a substrate, a set of molecular switches is uniformly deposited over the entire substrate, and then a second wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> is laid across the first wire. By the simple process of crossing one type of wire over another, a switch </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> is defined at the crossing point of the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, since it is only at that crossing point that a voltage can be applied to the molecular switch. The remaining molecular switch material could be washed off the substrate, reacted chemically, or simply left in place, depending on subsequent processing requirements. One example of such a device </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> would be to use the scheme described in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2A-2D</PDAT></FGREF><PDAT>, in which an aluminum electrode </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is deposited using conventional lithography techniques. Upon exposure of the electrode to air, a thin (1 nm) Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3 </PDAT></SB></HIL><PDAT>layer </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> naturally forms on the surface of the electrode. Second, a thin film </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> of nickelocene is deposited by vacuum sublimation. Finally, a second metal electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> (gold, for example) is deposited perpendicular to the first electrode </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> through a lithographically defined shadow mask. A device </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> fabricated in this way might serve as a reconfigurable switch in which the &lsquo;switch-closed&rsquo; state was a resonant tunneling resistor, and the &lsquo;switch-open&rsquo; state was a tunneling resistor. This device could form the basis of a random access memory, a communications and signal routing network, and a configurable logic network.</PDAT></PTEXT></PARA>
<PARA ID="P-00071" LVL="0"><PTEXT><PDAT>In yet another realization, the junction </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> between each pair of crossing wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> is a small electrochemical cell that functions as a battery. For operation, the two electrodes </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> are held at a constant potential with respect to each other because the structure of the battery separates two parts of an oxidation-reduction reaction by an insulating barrier, and the only way for the chemical reaction to proceed is to allow current to flow from one electrode to another through an external circuit. The general requirement to form a battery is the two wires or electrodes have to be composed of different elements or compounds. In the junctions described here, each electrode material </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> should have an oxide coating </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT>, respectively, and may also have an intervening layer of molecules </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> or material that acts to isolate the two electrodes with their oxides from each other (or this isolating may be achieved if the two oxides are thick enough). The battery is charged by applying a voltage of the appropriate polarity and magnitude to drive the junction chemical reaction in the opposite direction that would occur naturally in the junction </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT>, if the materials were mixed directly. The battery is drained either by shorting the appropriate wires externally or by applying an external voltage to overcome kinetic barriers to the reaction to allow it to go to completion. The battery function of the junction is in effect in series with one of the other functions described for such junctions, e.g., tunneling resistor, etc.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>EXAMPLES</PDAT></STEXT></H>
<PARA ID="P-00072" LVL="0"><PTEXT><PDAT>The present invention was reduced to practice to make a molecular switch-based device that could be configured as an electrically configurable read-only-memory, nonlinear logic gates that operated as diode-based logic, or a signal routing device. The device was made according to the method described in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2A-2D</PDAT></FGREF><PDAT>, with the following modifications: A 5 micrometer wide aluminum wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> was deposited on a silica substrate </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> using conventional lithographic procedures. The wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> was provided with an oxide coating </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> of Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3</PDAT></SB></HIL><PDAT>, which naturally formed to a thickness of about 1.0 to 1.5 nm when the aluminum wire was exposed to air. One of the molecular species shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 4A-4C</PDAT></FGREF><PDAT> was dissolved in tetrahydrofuran solvent, prepared as a Langmuir monolayer, and transferred as a Langmuir-Blodgett single molecular monolayer film </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> that covered the Al wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and the silica substrate </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT>. The molecular compounds shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 4A-4C</PDAT></FGREF><PDAT> are from a class of molecular compounds known as rotaxanes. Each molecular compound consists of a dumbbell component </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT>, a counterion </PDAT><HIL><BOLD><PDAT>38</PDAT></BOLD></HIL><PDAT>, and 0, 1, or 2 (bis-para-phenylene-34-crown-10) rings </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT> (</PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 4A</PDAT></FGREF><PDAT>, </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>C, and </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>B, respectively).</PDAT></PTEXT></PARA>
<PARA ID="P-00073" LVL="0"><PTEXT><PDAT>The conditions for the preparation of the Langmuir monolayer </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> were a surface pressure of 28 milliNewtons/meter which yields a 1 nm</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>/molecule surface coverage. Previous work on LB films of similar molecules has been reported; see, D. B. Amabilino et al, &ldquo;Aggregation of self-assembling branched &lsqb;n&rsqb;-rotaxanes&rdquo;, </PDAT><HIL><ITALIC><PDAT>New Journal of Chemistry, </PDAT></ITALIC></HIL><PDAT>Vol. 22, No. 9, pp. 959-972 (Sep. 11, 1998).</PDAT></PTEXT></PARA>
<PARA ID="P-00074" LVL="0"><PTEXT><PDAT>A second, top wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> was deposited perpendicular to the first wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>. The second wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> was deposited through a shadow mask using electron beam deposition techniques while the substrate </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> was held at room temperature. For this top wire </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, a thin (5 nm) titanium layer </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> was first deposited across the first wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, sandwiching a certain part </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> of the molecular monolayer </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> between the Ti layer </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> and the lower Al wire </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00075" LVL="0"><PTEXT><PDAT>Next, the top wire of aluminum </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>&prime; was deposited directly on top of the 11 micrometer wide Ti wire </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> through the same shadow mask to an approximate thickness of one micrometer. This titanium/aluminum electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> could be substituted with titanium/gold or chromium/aluminum electrodes, without affecting the basic device properties. Over 100 devices were made this way from each of the three molecular compounds shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 4A-4C</PDAT></FGREF><PDAT>, and the yield of operational switch junctions for each case was greater than 90%.</PDAT></PTEXT></PARA>
<PARA ID="P-00076" LVL="0"><PTEXT><PDAT>The electronic energy level diagram of the device </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> is shown in FIG. </PDAT><HIL><BOLD><PDAT>5</PDAT></BOLD></HIL><PDAT>. The energy levels (Fermi level) of the bottom aluminum electrode </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and the top titanium/aluminum electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> are indicated at either side of the diagram. The Al</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>O</PDAT><HIL><SB><PDAT>3 </PDAT></SB></HIL><PDAT>passivating layer </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT>, and the titanium/molecular interface layer </PDAT><HIL><BOLD><PDAT>42</PDAT></BOLD></HIL><PDAT> are indicated as tunneling barriers. The energy levels of one of the molecular compounds (</PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4C</PDAT></FGREF><PDAT>) (this particular molecule contained a dumbbell </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT>, a counterion </PDAT><HIL><BOLD><PDAT>38</PDAT></BOLD></HIL><PDAT> and a single ring </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT>) are indicated as either empty reducing levels </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> or as filled oxidation states </PDAT><HIL><BOLD><PDAT>46</PDAT></BOLD></HIL><PDAT>. These energy levels were measured for this molecule using solution phase pulsed voltammetry. The operation of this device is demonstrated in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 6A-6B</PDAT></FGREF><PDAT>. For all device measurements, the titanium/aluminum electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> was held at ground.</PDAT></PTEXT></PARA>
<PARA ID="P-00077" LVL="0"><PTEXT><PDAT>If a negative voltage is applied across the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, then current tunnels between them. If the applied voltage is such that the empty electronic states </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> of the rotaxane are &lsquo;lined up&rsquo; with the Fermi levels of one of the wires </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, then current flow is greatly enhanced by a resonant tunneling process, and a &lsquo;high&rsquo; rate of current flow is measured in the area of the curve denoted </PDAT><HIL><BOLD><PDAT>48</PDAT></BOLD></HIL><PDAT> in FIG. </PDAT><HIL><BOLD><PDAT>6</PDAT></BOLD></HIL><PDAT>A. This is defined as the &lsquo;switch closed&rsquo; state. The normalized density-of-states measurement of this resonant tunneling process </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> (</PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6B</PDAT></FGREF><PDAT>) reveals that tunneling is occurring through the empty electronic states </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> of the rotaxane, thereby forming a resonant tunneling resistor that acts as a closed switch.</PDAT></PTEXT></PARA>
<PARA ID="P-00078" LVL="0"><PTEXT><PDAT>If a positive voltage is applied across the two wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, then current again tunnels between them. If the applied voltage is such that the filled electronic states </PDAT><HIL><BOLD><PDAT>46</PDAT></BOLD></HIL><PDAT> (see also Curve </PDAT><HIL><BOLD><PDAT>52</PDAT></BOLD></HIL><PDAT> in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6B</PDAT></FGREF><PDAT>) of the molecules are &lsquo;lined up&rsquo; with the Fermi levels of one of the electrodes </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, then the rotaxane is oxidized (see the portion of the curve denoted </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> in FIG. </PDAT><HIL><BOLD><PDAT>6</PDAT></BOLD></HIL><PDAT>A). Oxidation of the rotaxane is irreversible, and physically changes its chemical structure, and thus the molecular electronic energy levels in the device </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>46</PDAT></BOLD></HIL><PDAT>. When a second current voltage scan from 0 to &minus;2 Volts, denoted </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT> in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6A</PDAT></FGREF><PDAT>, is again applied across the wires </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, no resonant tunneling occurs from 0 to &minus;1 V because the empty electronic states </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> of the rotaxane are no longer available (see Curve </PDAT><HIL><BOLD><PDAT>58</PDAT></BOLD></HIL><PDAT> in FIG. </PDAT><HIL><BOLD><PDAT>6</PDAT></BOLD></HIL><PDAT>B). This forms a tunneling resistor that acts as an open switch. This is seen in the plot of the normalized density of states </PDAT><HIL><BOLD><PDAT>58</PDAT></BOLD></HIL><PDAT> for this scan </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT>. As a result, a &lsquo;low&rsquo; rate of current flow is measured at </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00079" LVL="0"><PTEXT><PDAT>The foregoing description is that of a singly configurable molecular switch, and can form the basis of certain types of memory, signal routing network, and certain types of logic circuits. The performance of this molecular switch is such that, at &minus;1.8 volts, the ratio of the current flow between a switch &lsquo;closed&rsquo; state </PDAT><HIL><BOLD><PDAT>48</PDAT></BOLD></HIL><PDAT> and a switch &lsquo;open&rsquo; state </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT> is a factor of sixty to eighty, depending on the particular device.</PDAT></PTEXT></PARA>
<PARA ID="P-00080" LVL="0"><PTEXT><PDAT>In the &lsquo;switch-closed&rsquo; state, this device could be utilized as a resonant tunneling resistor (with an aluminum bottom electrode </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and a titanium/aluminum top electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>), or a resonant tunneling diode (with a semiconductor, e.g. silicon, bottom electrode </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> and a titanium/gold top electrode </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>). In the &lsquo;switch-open&rsquo; state, this device was a tunneling resistor. A device that switches between a resonant tunneling resistor and a tunneling resistor or between a resonant tunneling diode and a tunneling resistor can be utilized to generate wired-logic gates, communications and signal routing circuitry, and programmable read-only memory. The fact that the electronic switching properties of these molecules is the same whether they are isolated molecules in solution (as probed by pulsed voltammetry), or as the junction molecules in these solid-state devices, indicates that these devices will scale from the micrometer-scale dimensions of the working devices discussed here, to nanometer, or molecular scale dimensions.</PDAT></PTEXT></PARA>
<PARA ID="P-00081" LVL="0"><PTEXT><PDAT>The technology disclosed and claimed herein for forming crossed wires (micrometer or nanometer) may be used to perform a variety of fictions and to form a variety of useful devices and circuits for implementing computing on a microscale and even on a nanoscale. Molecular wire crossbar interconnects (MWCI) for signal routing and communications arc disclosed and claimed in related application Ser. No. 09/280,225 (U.S. Pat. No. 6,314,019); molecular wire crossbar memory is disclosed and claimed in related application Ser. No. 09280,189 (U.S. Pat. No. 6,128,214); molecular wire crossbar logic (MWCL) employing programmable logic arrays is disclosed and claimed in related application Ser. No. 09/282,045; a demultiplexer for a MWC network is disclosed and claimed in related application Ser. No. 09/282,049 (U.S. Pat. No. 6,256,767); and molecular wire transistors are disclosed and claimed in related application Ser. No. 09/280,188, all filed on even date herewith.</PDAT></PTEXT></PARA>
<PARA ID="P-00082" LVL="0"><PTEXT><PDAT>As illustrated in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT>, the switch </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> of the present can be replicated in a two-dimensional array to form a plurality, or array, </PDAT><HIL><BOLD><PDAT>60</PDAT></BOLD></HIL><PDAT> of switches to form a crossbar switch. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> depicts a 6&times;6 array </PDAT><HIL><BOLD><PDAT>60</PDAT></BOLD></HIL><PDAT>, but the invention is not so limited to the particular number of elements, or switches, in the array. Access to a single point, e.g., </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b, </PDAT></ITALIC></HIL><PDAT>is done by impressing voltage on wires </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT> and b to cause a change in the state of the molecular species </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><PDAT> at the junction thereof, as described above. Details of the option of the crossbar switch array </PDAT><HIL><BOLD><PDAT>60</PDAT></BOLD></HIL><PDAT> are further discussed in related application Ser. No. 09/280,225 (U.S. Pat. No. 6,314,019).</PDAT></PTEXT></PARA>
<PARA ID="P-00083" LVL="0"><PTEXT><PDAT>Thus, there has been disclosed chemically synthesized and assembled electronic devices comprising crossed wires joined by electrochemically switchable molecular species at the intersecting junctions. It will be apparent to those skilled in this art that various changes and modifications of an obvious nature may be made, and all such changes and modifications are considered to fall within the scope of the appended claims.</PDAT></PTEXT></PARA>
</BTEXT>
</DETDESC>
</SDODE>
<SDOCL>
<H LVL="1"><STEXT><PDAT>What is claimed is: </PDAT></STEXT></H>
<CL>
<CLM ID="CLM-00001">
<PARA ID="P-00084" LVL="0"><PTEXT><PDAT>1. A crossed-wire device comprising a pair of crossed wires that form a junction where one wire crosses another at an angle other than zero degrees and at least one connector species connecting said pair of crossed wires in said junction, said junction having a functional dimension in nanometers, wherein said at least one connector species and said pair of crossed wires forms an electrochemical cell and wherein said at least one connector species comprises an electrically addressable molecular species.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00002">
<PARA ID="P-00085" LVL="0"><PTEXT><PDAT>2. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein said at least one connector species forms a quantum state molecular switch comprising an electrically adjustable tunnel junction between said two wires.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00003">
<PARA ID="P-00086" LVL="0"><PTEXT><PDAT>3. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein at least one of said two wires has a thickness that is about the same size as said at least one connector species, and over an order of magnitude longer than its diameter.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00004">
<PARA ID="P-00087" LVL="0"><PTEXT><PDAT>4. The device of </PDAT><CLREF ID="CLM-00003"><PDAT>claim 3</PDAT></CLREF><PDAT> wherein both of said two wires have a thickness that is about the same size as said at least one connector species.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00005">
<PARA ID="P-00088" LVL="0"><PTEXT><PDAT>5. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein both of said two wires have a thickness that ranges from sub-micrometer to micrometer.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00006">
<PARA ID="P-00089" LVL="0"><PTEXT><PDAT>6. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein said junction is a singly configurable or reconfigurable switch.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00007">
<PARA ID="P-00090" LVL="0"><PTEXT><PDAT>7. The device of </PDAT><CLREF ID="CLM-00006"><PDAT>claim 6</PDAT></CLREF><PDAT> wherein said junction is at least one of elements selected from the group consisting of resistors, tunneling resistors, diodes, tunneling diodes, resonant tunneling diodes, and batteries.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00008">
<PARA ID="P-00091" LVL="0"><PTEXT><PDAT>8. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein each said wire independently comprises a conductor or a semiconductor.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00009">
<PARA ID="P-00092" LVL="0"><PTEXT><PDAT>9. The device of </PDAT><CLREF ID="CLM-00008"><PDAT>claim 8</PDAT></CLREF><PDAT> further including an insulating layer or a modulation-doped coating on at least one of said wires.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00010">
<PARA ID="P-00093" LVL="0"><PTEXT><PDAT>10. The device of </PDAT><CLREF ID="CLM-00009"><PDAT>claim 9</PDAT></CLREF><PDAT> wherein said insulating layer comprises an oxide.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00011">
<PARA ID="P-00094" LVL="0"><PTEXT><PDAT>11. The device of </PDAT><CLREF ID="CLM-00008"><PDAT>claim 8</PDAT></CLREF><PDAT> wherein at least one of said wires is a semiconductor and wherein said semiconductor is internally doped.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00012">
<PARA ID="P-00095" LVL="0"><PTEXT><PDAT>12. The device of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein said at least one connector species comprises a bi-stable molecule.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00013">
<PARA ID="P-00096" LVL="0"><PTEXT><PDAT>13. The device of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> wherein said bi-stable molecule is one that displays a significant hysteresis in its current-voltage curve, obtained either from solution electrochemistry or from current-voltage characteristics in a solid-state junction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00014">
<PARA ID="P-00097" LVL="0"><PTEXT><PDAT>14. The device of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> wherein said device is irreversibly switchable from a first chemical state to a second chemical state of said bi-stable molecule.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00015">
<PARA ID="P-00098" LVL="0"><PTEXT><PDAT>15. The device of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> wherein said device is reversibly switchable between a first chemical state and a second chemical state of said bi-stable molecule.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00016">
<PARA ID="P-00099" LVL="0"><PTEXT><PDAT>16. The device of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> wherein said connector species comprises a layer of said bi-stable molecules.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00017">
<PARA ID="P-00100" LVL="0"><PTEXT><PDAT>17. The device of </PDAT><CLREF ID="CLM-00016"><PDAT>claim 16</PDAT></CLREF><PDAT> wherein said layer of said bi-stable molecules has a thickness of a monolayer of said bi-stable molecules.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00018">
<PARA ID="P-00101" LVL="0"><PTEXT><PDAT>18. The device of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> wherein said connector species is selected from the group consisting of metalocenes, rotaxanes, pseudo-rotaxanes, and catenanes.</PDAT></PTEXT></PARA>
</CLM>
</CL>
</SDOCL>
<SDODR ID="DRAWINGS">
<EMI ID="EMI-D00000" ALT="embedded image" FILE="US06459095-20021001-D00000.TIF"/>
<EMI ID="EMI-D00001" ALT="embedded image" FILE="US06459095-20021001-D00001.TIF"/>
<EMI ID="EMI-D00002" ALT="embedded image" FILE="US06459095-20021001-D00002.TIF"/>
<EMI ID="EMI-D00003" ALT="embedded image" FILE="US06459095-20021001-D00003.TIF"/>
<EMI ID="EMI-D00004" ALT="embedded image" FILE="US06459095-20021001-D00004.TIF"/>
<EMI ID="EMI-D00005" ALT="embedded image" FILE="US06459095-20021001-D00005.TIF"/>
<EMI ID="EMI-D00006" ALT="embedded image" FILE="US06459095-20021001-D00006.TIF"/>
<EMI ID="EMI-D00007" ALT="embedded image" FILE="US06459095-20021001-D00007.TIF"/>
</SDODR>
</PATDOC>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PATDOC SYSTEM "ST32-US-Grant-025xml.dtd" [
<!ENTITY US06459940-20021001-M00001.NB SYSTEM "US06459940-20021001-M00001.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00001.TIF SYSTEM "US06459940-20021001-M00001.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00002.NB SYSTEM "US06459940-20021001-M00002.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00002.TIF SYSTEM "US06459940-20021001-M00002.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00003.NB SYSTEM "US06459940-20021001-M00003.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00003.TIF SYSTEM "US06459940-20021001-M00003.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00004.NB SYSTEM "US06459940-20021001-M00004.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00004.TIF SYSTEM "US06459940-20021001-M00004.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00005.NB SYSTEM "US06459940-20021001-M00005.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00005.TIF SYSTEM "US06459940-20021001-M00005.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00006.NB SYSTEM "US06459940-20021001-M00006.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00006.TIF SYSTEM "US06459940-20021001-M00006.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00007.NB SYSTEM "US06459940-20021001-M00007.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00007.TIF SYSTEM "US06459940-20021001-M00007.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00008.NB SYSTEM "US06459940-20021001-M00008.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00008.TIF SYSTEM "US06459940-20021001-M00008.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00009.NB SYSTEM "US06459940-20021001-M00009.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00009.TIF SYSTEM "US06459940-20021001-M00009.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00010.NB SYSTEM "US06459940-20021001-M00010.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00010.TIF SYSTEM "US06459940-20021001-M00010.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00011.NB SYSTEM "US06459940-20021001-M00011.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00011.TIF SYSTEM "US06459940-20021001-M00011.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00012.NB SYSTEM "US06459940-20021001-M00012.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00012.TIF SYSTEM "US06459940-20021001-M00012.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00013.NB SYSTEM "US06459940-20021001-M00013.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00013.TIF SYSTEM "US06459940-20021001-M00013.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00014.NB SYSTEM "US06459940-20021001-M00014.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00014.TIF SYSTEM "US06459940-20021001-M00014.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00015.NB SYSTEM "US06459940-20021001-M00015.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00015.TIF SYSTEM "US06459940-20021001-M00015.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00016.NB SYSTEM "US06459940-20021001-M00016.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00016.TIF SYSTEM "US06459940-20021001-M00016.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00017.NB SYSTEM "US06459940-20021001-M00017.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00017.TIF SYSTEM "US06459940-20021001-M00017.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-M00018.NB SYSTEM "US06459940-20021001-M00018.NB" NDATA NB>
<!ENTITY US06459940-20021001-M00018.TIF SYSTEM "US06459940-20021001-M00018.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00000.TIF SYSTEM "US06459940-20021001-D00000.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00001.TIF SYSTEM "US06459940-20021001-D00001.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00002.TIF SYSTEM "US06459940-20021001-D00002.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00003.TIF SYSTEM "US06459940-20021001-D00003.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00004.TIF SYSTEM "US06459940-20021001-D00004.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00005.TIF SYSTEM "US06459940-20021001-D00005.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00006.TIF SYSTEM "US06459940-20021001-D00006.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00007.TIF SYSTEM "US06459940-20021001-D00007.TIF" NDATA TIF>
<!ENTITY US06459940-20021001-D00008.TIF SYSTEM "US06459940-20021001-D00008.TIF" NDATA TIF>
]>
<PATDOC DTD="2.5" STATUS="Build 20020101">
<SDOBI>
<B100>
<B110><DNUM><PDAT>06459940</PDAT></DNUM></B110>
<B130><PDAT>B1</PDAT></B130>
<B140><DATE><PDAT>20021001</PDAT></DATE></B140>
<B190><PDAT>US</PDAT></B190>
</B100>
<B200>
<B210><DNUM><PDAT>09566163</PDAT></DNUM></B210>
<B211US><PDAT>09</PDAT></B211US>
<B220><DATE><PDAT>20000505</PDAT></DATE></B220>
</B200>
<B500>
<B510>
<B511><PDAT>G05B 1918</PDAT></B511>
<B516><PDAT>7</PDAT></B516>
</B510>
<B520>
<B521><PDAT>700 56</PDAT></B521>
<B522><PDAT>700170</PDAT></B522>
<B522><PDAT>369 43</PDAT></B522>
</B520>
<B540><STEXT><PDAT>Closed-loop compensation for kinematic error in harmonic driver for precision control applications</PDAT></STEXT></B540>
<B560>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4457165</PDAT></DNUM>
<DATE><PDAT>19840700</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Wiederrich</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT> 73116</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4616353</PDAT></DNUM>
<DATE><PDAT>19861000</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Kaneda et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>369 43</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5719480</PDAT></DNUM>
<DATE><PDAT>19980200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Bock et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>318561</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5971091</PDAT></DNUM>
<DATE><PDAT>19991000</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Kamen et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>180218</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>6011762</PDAT></DNUM>
<DATE><PDAT>20000100</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Watanabe et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>369 4427</PDAT></PNC></PCIT><CITED-BY-OTHER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>6138493</PDAT></DNUM>
<DATE><PDAT>20001000</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Zeitlin</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT> 73  101</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
</B560>
<B570>
<B577><PDAT>10</PDAT></B577>
<B578US><PDAT>1</PDAT></B578US>
</B570>
<B580>
<B582><PDAT>700170</PDAT></B582>
<B582><PDAT>700 56</PDAT></B582>
<B582><PDAT>700 28</PDAT></B582>
<B582><PDAT>700 29</PDAT></B582>
<B582><PDAT>700 37</PDAT></B582>
<B582><PDAT>700 42</PDAT></B582>
<B582><PDAT>700 45</PDAT></B582>
<B582><PDAT>369 43</PDAT></B582>
<B582><PDAT>369 4427</PDAT></B582>
</B580>
<B590><B595><PDAT>8</PDAT></B595><B596><PDAT>11</PDAT></B596><B597US/>
</B590>
</B500>
<B600>
<B680US><DOC><DNUM><PDAT>60/132906</PDAT></DNUM><DATE><PDAT>19990506</PDAT></DATE><KIND><PDAT>00</PDAT></KIND></DOC></B680US>
</B600>
<B700>
<B720>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Fathi</PDAT></FNM><SNM><STEXT><PDAT>Ghorbel</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Houston</PDAT></CITY>
<STATE><PDAT>TX</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Prasanna S.</PDAT></FNM><SNM><STEXT><PDAT>Ghandi</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Maharashtra</PDAT></CITY>
<CTRY><PDAT>IN</PDAT></CTRY>
</ADR>
</PARTY-US>
</B721>
</B720>
<B730>
<B731>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Wm. Marsh Rice University</PDAT></STEXT></ONM></NAM>
<ADR><CITY><PDAT>Houston</PDAT></CITY><STATE><PDAT>TX</PDAT></STATE></ADR>
</PARTY-US>
</B731>
<B732US>
<PDAT>02</PDAT>
</B732US>
</B730>
<B740>
<B741>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Conley, Rose &amp; Tayon, P.C.</PDAT></STEXT></ONM></NAM>
</PARTY-US>
</B741>
</B740>
<B745>
<B746>
<PARTY-US>
<NAM><FNM><PDAT>Leo</PDAT></FNM><SNM><STEXT><PDAT>Picard</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B746>
<B747>
<PARTY-US>
<NAM><FNM><PDAT>Zoila</PDAT></FNM><SNM><STEXT><PDAT>Cabrera</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B747>
<B748US><PDAT>2125</PDAT></B748US>
</B745>
</B700>
</SDOBI>
<SDOAB>
<BTEXT>
<PARA ID="P-00001" LVL="0"><PTEXT><PDAT>Nonlinear control algorithms to compensate for kinematic error in harmonic drives provide a solid basis to improve their performance of harmonic drives in precision positioning applications. The present closed loop control algorithms compensate for kinematic error irrespective of its form in both set-point and trajectory tracking applications.</PDAT></PTEXT></PARA>
</BTEXT>
</SDOAB>
<SDODE>
<RELAPP>
<BTEXT>
<H LVL="1"><STEXT><PDAT>RELATED APPLICATIONS</PDAT></STEXT></H>
<PARA ID="P-00002" LVL="0"><PTEXT><PDAT>This application claims the benefit of U.S. Provisional application Serial No. 60/132,906, filed May 6, 1999, and entitled &ldquo;Closed Loop Compensation of Kinematic Error in Harmonic Drives for Precision Control Applications.&rdquo;</PDAT></PTEXT></PARA>
</BTEXT>
</RELAPP>
<GOVINT>
<BTEXT>
<H LVL="1"><STEXT><PDAT>STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH OR DEVELOPMENT</PDAT></STEXT></H>
<PARA ID="P-00003" LVL="0"><PTEXT><PDAT>This work is partially funded by the National Science Foundation under Grant No. INT-9819869.</PDAT></PTEXT></PARA>
</BTEXT>
</GOVINT>
<BRFSUM>
<BTEXT>
<H LVL="1"><STEXT><PDAT>TECHNICAL FIELD OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00004" LVL="0"><PTEXT><PDAT>The present invention relates generally to a precisely controlling a harmonic drive and more particularly to a system for compensating for kinematic error in harmonic drives. Still more particularly, the present invention relates to an error algorithm for harmonic drives that takes into account both static and dynamic components of kinematic error.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>BACKGROUND OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00005" LVL="0"><PTEXT><PDAT>Harmonic drives are special flexible gear transmission systems. A typical harmonic drive </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> as shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT>, comprises a wave generator </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>, a flexible race ball bearing (not shown), a flexible spline </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>, and a circular spline </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT>. Wave generator </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is a rigid steel core having an elliptical shape with a very small but non-zero eccentricity. Wave generator </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> is surrounded by the flexible race ball bearing. The flexible spline </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> (or &ldquo;flexspline&rdquo;) is a thin-walled hollow cup preferably of alloy steel. External gear teeth </PDAT><HIL><BOLD><PDAT>13</PDAT></BOLD></HIL><PDAT> are machined at the open end of this cup and the closed end is connected to an output shaft. Circular spline </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> is a rigid internal gear having two teeth more than the number of teeth on flexspline </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT>. When assembled, wave generator </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> fits into the open end of the flexspline cup and gives it an elliptical shape at that end. The teeth of circular spline </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> then mesh with the flexspline teeth at the major axis of the ellipse defined by the wave generator. A fully assembled harmonic drive is shown in FIG. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>. In the most common speed reduction configuration, wave generator </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> serves as the input port, flexspline </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> acts as an output port, and circular spline </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> is held immobile.</PDAT></PTEXT></PARA>
<PARA ID="P-00006" LVL="0"><PTEXT><PDAT>This typical construction, with meshing at two diametrically opposite ends, gives harmonic drives many useful characteristics. These include compact design with less weight, higher gear reduction with almost zero backlash, and higher torque-to-weight ratio. Hence, these drives are popular in many precision positioning applications, such as in wafer handling machines in the semiconductor industry, in lens grinding machines, and in rotary adjustment mechanisms of reconnaissance cameras. Harmonic drives are also ideal for space robots because of their higher torque-to-weight ratio, which enables them to be directly mounted at robot joints. Additionally, they are widely used in precision measuring devices and in the semiconductor industry for laser mirror positioning.</PDAT></PTEXT></PARA>
<PARA ID="P-00007" LVL="0"><PTEXT><PDAT>The concept of harmonic drives was conceived and developed during the mid-1950s. Their industrial use in different applications has been growing since then. However, the research in the theoretical aspects of their transmission characteristics has not been extensive. Most of the work in this area has addressed nonlinear transmission attributes including kinematic error, flexibility, and hysteresis, and in design attributes including tooth stresses and geometry.</PDAT></PTEXT></PARA>
<PARA ID="P-00008" LVL="0"><PTEXT><PDAT>Of the different transmission attributes mentioned above, kinematic error is of foremost concern for precision positioning applications. The kinematic error &thgr;</PDAT><HIL><SB><PDAT>K </PDAT></SB></HIL><PDAT>is defined as the deviation between the expected output position and the actual output position. It is illustrated in FIG. </PDAT><HIL><BOLD><PDAT>3</PDAT></BOLD></HIL><PDAT> and given by the following equation</PDAT></PTEXT></PARA>
<PARA ID="P-00009" LVL="0"><PTEXT><F><PTEXT><PDAT>{tilde over (&thgr;)}&equals;&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>/N</PDAT></ITALIC></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>J</PDAT></SB></HIL><HIL><SB><HIL><SB><PDAT>3</PDAT></SB></HIL></SB></HIL><PDAT>&emsp;&emsp;(1)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00010" LVL="7"><PTEXT><PDAT>where &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>is the rotational position of the motor shaft attached to the wave generator, N is the gear reduction ratio, and &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>is the rotational position of the output shaft connected to the flexspline or the circular spline as the case may be. The experimental kinematic error waveforms presented in the literature show small magnitude with periodic nature; for instance, the waveform shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT> is periodic with magnitude of 0.05 deg. Also, the fundamental frequency of these waveforms is reported to be twice the frequency of wave generator rotation. In addition to the fundamental error, small high frequency error components are observed. Besides producing a static error in load position, kinematic error acts as a periodic exciter and causes undesirable vibration effects. These vibrations serve as an energy sink and produce dramatic torque losses and velocity fluctuations. Thus, kinematic error has both static and dynamic effects, which lead to performance degradation in both precision regulation and tracking. Hence, compensation of kinematic error is of utmost importance for precision positioning with harmonic drives.</PDAT></PTEXT></PARA>
<PARA ID="P-00011" LVL="0"><PTEXT><PDAT>Properties of kinematic error and causes of its occurrence have been studied in the past by several researchers, but a complete characterization of kinematic error has been done only recently. As set out in &ldquo;On the Kinematic Error in Harmonic Drive Gears&rdquo;, Ghorbel et al., which is appended hereto and incorporated herein in its entirety, it has been found that kinematic error differs for different drives, speeds, assemblies, and loading conditions. In particular, as motor speed is increased, the kinematic error waveform is colored by flexibility effects. This leads to the concept of a &ldquo;pure form&rdquo; of kinematic error. The pure form, defined at a low speed, varies as the load on output shaft is increased. Also, this form changes with the change in assembly conditions. In addition, kinematic error has been reported to be sensitive to the environmental conditions. Thus, compensation for this nonlinear, operating condition-dependent, drive-specific kinematic error poses a challenging task.</PDAT></PTEXT></PARA>
<PARA ID="P-00012" LVL="0"><PTEXT><PDAT>Heretofore, the complete compensation for kinematic error in set-point and trajectory tracking with harmonic drives not heretofore been achieved. One previous attempt to compensate for kinematic error constituted approximating the kinematic error with a simple sinusoid</PDAT></PTEXT></PARA>
<PARA ID="P-00013" LVL="0"><PTEXT><F><PTEXT><PDAT>{overscore (&thgr;)}&equals;</PDAT><HIL><ITALIC><PDAT>A </PDAT></ITALIC></HIL><PDAT>sin 2&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>.&emsp;&emsp;(2)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00014" LVL="7"><PTEXT><PDAT>by neglecting the higher frequency components in the error and determining the trajectory to be traversed by the motor &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>(t) was determined using equation (1) for a given load trajectory &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>(t). Next, the motor position was controlled to follow the trajectory &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>(t), thereby partially compensating for the kinematic error when the output tracked the trajectory &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>(t). This scheme required prior knowledge of the error waveform, and it did not account for the error sensitivity to different factors mentioned above. This compensation can be considered open loop because no load side feedback is used.</PDAT></PTEXT></PARA>
<PARA ID="P-00015" LVL="0"><PTEXT><PDAT>The second previously known approach is an active compensation approach, which differs from the open loop approach described above in that the disturbance is injected as the current controller input to compensate for the error. Before implementing this scheme, the disturbance injection signal has to be calibrated based on the kinematic error profile, for which the measurement of acceleration at the output is used. Thus, this scheme, too, requires prior knowledge of the kinematic error in a different way. Additionally, once calibrated, this scheme does not ensure complete compensation if the assembly, loading or environmental conditions change. Thus, both these approaches seek to compensate for the error in an open loop sense, using the stored information of the kinematic error.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>SUMMARY OF THE PRESENT INVENTION</PDAT></STEXT></H>
<PARA ID="P-00016" LVL="0"><PTEXT><PDAT>The present invention includes the use of control algorithms in controllers to completely compensate for kinematic error without using prior information of the error. The present algorithms are based on a mathematical model that represents nonlinear dynamic effects of kinematic error in harmonic drives. A general form of kinematic error is assumed while deriving the equations of dynamics using the Lagrange formulation. With reference to this model, the present nonlinear control algorithms compensate completely for the kinematic error both in set-point and trajectory tracking.</PDAT></PTEXT></PARA>
<PARA ID="P-00017" LVL="0"><PTEXT><PDAT>The asymptotic stability of error dynamics equilibrium with the present controllers is demonstrated using the Lyapunov theory. Simulation and the experimental results obtained using a dedicated harmonic drive test setup verify the effectiveness of these controllers. The present controllers achieve the compensation task independent of the form of kinematic error and no prior information regarding the form is necessary. Instead, the present control scheme uses both load side and motor side feedback. Hence, the present compensation approach provides complete compensation irrespective of the error form, using a closed loop approach. This is in contrast to previous open loop approaches, which use only motor side feedback.</PDAT></PTEXT></PARA>
</BTEXT>
</BRFSUM>
<DRWDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BRIEF DESCRIPTION OF THE DRAWINGS</PDAT></STEXT></H>
<PARA ID="P-00018" LVL="0"><PTEXT><PDAT>In the detailed description of the preferred embodiments of the present invention that follows, reference is made to the Figures, wherein:</PDAT></PTEXT></PARA>
<PARA ID="P-00019" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> is an exploded isometric view of a conventional harmonic drive;</PDAT></PTEXT></PARA>
<PARA ID="P-00020" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT> is an isometric view of an assembled conventional harmonic drive;</PDAT></PTEXT></PARA>
<PARA ID="P-00021" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT> is a schematic diagram illustrating Equation (1);</PDAT></PTEXT></PARA>
<PARA ID="P-00022" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT> is a plot of kinematic error in a conventional harmonic drive system;</PDAT></PTEXT></PARA>
<PARA ID="P-00023" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIGS. 5 and 6</PDAT></FGREF><PDAT> are schematic diagrams of control systems for set-point control and tracking control, respectively, of harmonic drive systems.</PDAT></PTEXT></PARA>
<PARA ID="P-00024" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> is a schematic diagram of an experimental setup;</PDAT></PTEXT></PARA>
<PARA ID="P-00025" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 8</PDAT></FGREF><PDAT> is a schematic diagram of one feature of the present invention;</PDAT></PTEXT></PARA>
<PARA ID="P-00026" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 9</PDAT></FGREF><PDAT> is two plots of errors in set-point control of load position output of a harmonic drive constructed in accordance with the present invention;</PDAT></PTEXT></PARA>
<PARA ID="P-00027" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 10</PDAT></FGREF><PDAT> is two plots of errors in trajectory-tracking control of load position output of a harmonic drive constructed in accordance with the present invention; and</PDAT></PTEXT></PARA>
<PARA ID="P-00028" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 11</PDAT></FGREF><PDAT> is a plot comparing errors in steady state tracking of load position output to kinematic error for a harmonic drive constructed in accordance with the present invention.</PDAT></PTEXT></PARA>
</BTEXT>
</DRWDESC>
<DETDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>DETAILED DESCRIPTION OF A PREFERRED EMBODIMENT</PDAT></STEXT></H>
<PARA ID="P-00029" LVL="7"><PTEXT><PDAT>Dynamic Model of a Harmonic Drive Test Setup</PDAT></PTEXT></PARA>
<PARA ID="P-00030" LVL="0"><PTEXT><PDAT>This section presents a mathematical model of a dedicated harmonic drive test setup developed in accordance with the present invention. In addition, the properties of this model that are important from a control perspective are presented. Since the focus of this work is the kinematic error, it is represented in its most general form &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&equals;&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>), and the flexibility and friction effects are neglected while deriving the equations that govern the system dynamics. The experimental conditions are tailored to compensate for omission of flexibility and friction from mathematical model. In particular, the static friction effects are compensated for by using a Coulomb friction model, and unidirectional motion with slow speeds is maintained in all the experiments.</PDAT></PTEXT></PARA>
<PARA ID="P-00031" LVL="0"><PTEXT><PDAT>The discussion below presents the mathematical aspects of the control mechanisms of the present invention. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 5 and 6</PDAT></FGREF><PDAT> are schematic diagrams of control systems for set-point control and tracking control, respectively, of harmonic drive systems. The variables discussed below and their usage in the present control schemes are schematically illustrated.</PDAT></PTEXT></PARA>
<PARA ID="P-00032" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 7</PDAT></FGREF><PDAT> shows a schematic diagram of a harmonic drive test setup. The diagram shows all the parameters of the system; Table 1 lists their values. These values are obtained experimentally using standard system identification techniques and are further verified using manufacturers&apos; data. Note that the torque sensor shown in the figure is not used for the purpose of this work.</PDAT></PTEXT></PARA>
<CWU>
<TABLE-US ID="TABLE-US-00001">
<TABLE-CALS>
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1"><PTEXT><PDAT>TABLE 1</PDAT></PTEXT></entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"></entry>
</row>
<row>
<entry><PTEXT><PDAT>System Parameters Used for Simulation</PDAT></PTEXT></entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="77pt" align="left"/>
<colspec colname="2" colwidth="56pt" align="center"/>
<colspec colname="3" colwidth="70pt" align="left"/>
<tbody valign="top">
<row>
<entry></entry>
<entry><PTEXT><PDAT>Parameter</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Symbol</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>Numerical Value</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Inertia on Motor Side</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>J</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>4.5 &times; 10</PDAT><HIL><SP><PDAT>&minus;4 </PDAT></SP></HIL><PDAT>kgm</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Inertia on Load Side</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>J</PDAT><HIL><SB><PDAT>1</PDAT></SB></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>5.0 &times; 10</PDAT><HIL><SP><PDAT>&minus;2 </PDAT></SP></HIL><PDAT>kgm</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Damping on Motor Side</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>B</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>3.3 &times; 10</PDAT><HIL><SP><PDAT>&minus;3 </PDAT></SP></HIL><PDAT>Nm-s</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Damping on Load Side</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>B</PDAT><HIL><SB><PDAT>1</PDAT></SB></HIL></PTEXT></entry>
<entry><PTEXT><PDAT>5.0 &times; 10</PDAT><HIL><SP><PDAT>&minus;4 </PDAT></SP></HIL><PDAT>Nm-s</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry><PTEXT><PDAT>Gear Ratio</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>N</PDAT></PTEXT></entry>
<entry><PTEXT><PDAT>50</PDAT></PTEXT></entry>
</row>
<row>
<entry></entry>
<entry namest="OFFSET" nameend="3" align="center" rowsep="1"></entry>
</row>
</tbody>
</tgroup>
</table>
</TABLE-CALS>
</TABLE-US>
</CWU>
<PARA ID="P-00033" LVL="0"><PTEXT><PDAT>Considering the assumptions mentioned above, the kinetic energy T of the system and the Rayleigh function D for energy dissipation are given, respectively, by</PDAT></PTEXT></PARA>
<PARA ID="P-00034" LVL="0"><PTEXT><F><PTEXT><HIL><ITALIC><PDAT>T&equals;</PDAT></ITALIC></HIL><PDAT>&frac12;</PDAT><HIL><ITALIC><PDAT>J</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>&plus;&frac12;</PDAT><HIL><ITALIC><PDAT>J</PDAT></ITALIC></HIL><HIL><SB><PDAT>t</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>t</PDAT></SB></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>.&emsp;&emsp;(3a)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00035" LVL="0"><PTEXT><F><PTEXT><HIL><ITALIC><PDAT>D&equals;</PDAT></ITALIC></HIL><PDAT>&frac12;</PDAT><HIL><ITALIC><PDAT>B</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>&plus;&frac12;</PDAT><HIL><ITALIC><PDAT>B</PDAT></ITALIC></HIL><HIL><SB><PDAT>t</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>t</PDAT></SB></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>.&emsp;&emsp;(3a)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00036" LVL="0"><PTEXT><PDAT>The two variables, namely motor position &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>and load position &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>in equations (3a) and 3(b) above, are constrained by equation (1), which defines the kinematic error &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&equals;&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>). Thus the system has only one degree of freedom, expressed in terms of either the motor variable &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>or the load variable &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>. By rearranging equation (1), we get</PDAT></PTEXT></PARA>
<PARA ID="P-00037" LVL="0"><PTEXT><F><PTEXT><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>&equals;&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>/N&minus;&thgr;</PDAT></ITALIC></HIL><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&emsp;&emsp;(4)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00038" LVL="0"><PTEXT><PDAT>Differentiating this equation with respect to time yields</PDAT></PTEXT></PARA>
<PARA ID="P-00039" LVL="0"><PTEXT><F><PTEXT><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><ITALIC><PDAT>&minus;Y{dot over (&thgr;)}</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>.&emsp;&emsp;(5)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00040" LVL="7"><PTEXT><PDAT>where </PDAT>
<CWU>
<MATH-US ID="MATH-US-00001">
<MATHEMATICA ID="MATHEMATICA-00001" ALT="mathematica file" FILE="US06459940-20021001-M00001.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>Y</mi>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mi>Y</mi>
            <mo>&af;</mo>
            <mrow>
              <mo>(</mo>
              <msub>
                <mi>&theta;</mi>
                <mi>m</mi>
              </msub>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>N</mi>
            </mfrac>
            <mo>-</mo>
            <mfrac>
              <mrow>
                <mo>&dd;</mo>
                <mover>
                  <mi>&theta;</mi>
                  <mo>~</mo>
                </mover>
              </mrow>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
            </mfrac>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00001" ALT="embedded image" FILE="US06459940-20021001-M00001.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00041" LVL="0"><PTEXT><PDAT>The variable Y(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>) can be interpreted as a new gear transmission ratio that depends on the motor position &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>due to the effects of kinematic error. Using Equation (5) to define the relationship between motor velocity and load velocity, the kinetic energy T and the Rayleigh energy D can be represented either in terms of motor variables or in terms of load variables. Differentiating Equation (6) with respect to time, we get</PDAT></PTEXT></PARA>
<PARA ID="P-00042" LVL="0"><PTEXT><F><PTEXT><HIL><ITALIC><PDAT>{dot over (Y)}</PDAT></ITALIC></HIL><PDAT>&minus;{overscore (&thgr;)}&Prime;{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&emsp;&emsp;(7)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00043" LVL="7"><PTEXT><PDAT>where </PDAT>
<CWU>
<MATH-US ID="MATH-US-00002">
<MATHEMATICA ID="MATHEMATICA-00002" ALT="mathematica file" FILE="US06459940-20021001-M00002.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msup>
          <mover>
            <mi>&theta;</mi>
            <mo>~</mo>
          </mover>
          <mi>&Prime;</mi>
        </msup>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>-</mo>
            <mfrac>
              <mo>&dd;</mo>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
            </mfrac>
          </mrow>
          <mo>&it;</mo>
          <mrow>
            <mo>(</mo>
            <mfrac>
              <mrow>
                <mo>&dd;</mo>
                <mover>
                  <mi>&theta;</mi>
                  <mo>~</mo>
                </mover>
              </mrow>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
            </mfrac>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>8</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00002" ALT="embedded image" FILE="US06459940-20021001-M00002.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00044" LVL="7"><PTEXT><PDAT>Representing T and D in terms of {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>for Lagrange formulation with &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>as an independent variable and using equations (6) and (7), we get a single second order nonlinear differential equation governing the system dynamics in terms of load variables (&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>, {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>, {umlaut over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>,) as </PDAT>
<CWU>
<MATH-US ID="MATH-US-00003">
<MATHEMATICA ID="MATHEMATICA-00003" ALT="mathematica file" FILE="US06459940-20021001-M00003.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mfrac>
                  <msub>
                    <mi>J</mi>
                    <mi>m</mi>
                  </msub>
                  <msup>
                    <mi>Y</mi>
                    <mn>2</mn>
                  </msup>
                </mfrac>
                <mo>+</mo>
                <msub>
                  <mi>J</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&it;</mo>
            <msub>
              <mover>
                <mi>&theta;</mi>
                <mi>&DoubleDot;</mi>
              </mover>
              <mi>l</mi>
            </msub>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <mrow>
                <msub>
                  <mi>J</mi>
                  <mi>m</mi>
                </msub>
                <mo>&it;</mo>
                <msup>
                  <mover>
                    <mi>&theta;</mi>
                    <mo>~</mo>
                  </mover>
                  <mi>&Prime;</mi>
                </msup>
              </mrow>
              <msup>
                <mi>Y</mi>
                <mn>4</mn>
              </msup>
            </mfrac>
            <mo>&it;</mo>
            <msubsup>
              <mover>
                <mi>&theta;</mi>
                <mo>.</mo>
              </mover>
              <mi>l</mi>
              <mn>2</mn>
            </msubsup>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mfrac>
                  <msub>
                    <mi>B</mi>
                    <mi>m</mi>
                  </msub>
                  <msup>
                    <mi>Y</mi>
                    <mn>2</mn>
                  </msup>
                </mfrac>
                <mo>+</mo>
                <msub>
                  <mi>B</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&it;</mo>
            <msub>
              <mover>
                <mi>&theta;</mi>
                <mo>.</mo>
              </mover>
              <mi>t</mi>
            </msub>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <msub>
              <mi>&tau;</mi>
              <mi>m</mi>
            </msub>
            <mi>Y</mi>
          </mfrac>
          <mo>.</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>9</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00003" ALT="embedded image" FILE="US06459940-20021001-M00003.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00045" LVL="7"><PTEXT><PDAT>The nonlinearity in the system is represented in the nonlinear functions Y and &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;.</PDAT></PTEXT></PARA>
<PARA ID="P-00046" LVL="0"><PTEXT><PDAT>Representing T and D in terms of {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>for Lagrange formulation with {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>as an independent variable, we get a similar second order differential equation governing the same dynamics in terms of motor variables (&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>, {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>, {umlaut over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>) as</PDAT></PTEXT></PARA>
<PARA ID="P-00047" LVL="0"><PTEXT><F><PTEXT><PDAT>(</PDAT><HIL><ITALIC><PDAT>J</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&plus;Y</PDAT></ITALIC></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><HIL><ITALIC><PDAT>J</PDAT></ITALIC></HIL><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>){umlaut over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&minus;Y J</PDAT></ITALIC></HIL><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>{overscore (&thgr;)}&Prime;{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>&plus;(</PDAT><HIL><ITALIC><PDAT>B</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&plus;Y</PDAT></ITALIC></HIL><HIL><SP><PDAT>2</PDAT></SP></HIL><HIL><ITALIC><PDAT>B</PDAT></ITALIC></HIL><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>){dot over (&thgr;)}</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&equals;&tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>.&emsp;&emsp;(10)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00048" LVL="7"><PTEXT><PDAT>We use equation (9) for the purpose of stability analysis presented below and equation (10) for the purpose of simulation. From equation (9) we observe that when the quantity Y(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)&equals;0, the system becomes singular. However, considering the form of kinematic error, we conclude that Y(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>) can not be zero for any &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>and any drive. Next, we state and prove the property of the dynamic model represented by equation (9).</PDAT></PTEXT></PARA>
<PARA ID="P-00049" LVL="0"><PTEXT><PDAT>In reference to equation (9), let D(&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>)&equals;(</PDAT><HIL><ITALIC><PDAT>J</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)/(Y</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>)&plus;J</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>, and C(&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>)&equals;&lsqb;(J</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;)/(Y</PDAT><HIL><SP><PDAT>4</PDAT></SP></HIL><PDAT>)&rsqb;&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>, then {dot over (D)}&minus;</PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>C is zero.</PDAT></PTEXT></PARA>
<PARA ID="P-00050" LVL="0"><PTEXT><PDAT>By differentiating D with respect to time, we get </PDAT>
<CWU>
<MATH-US ID="MATH-US-00004">
<MATHEMATICA ID="MATHEMATICA-00004" ALT="mathematica file" FILE="US06459940-20021001-M00004.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mi>D</mi>
          <mo>.</mo>
        </mover>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mrow>
                <mo>-</mo>
                <mn>2</mn>
              </mrow>
              <mo>&it;</mo>
              <msub>
                <mi>J</mi>
                <mi>m</mi>
              </msub>
            </mrow>
            <msup>
              <mi>Y</mi>
              <mn>3</mn>
            </msup>
          </mfrac>
          <mo>&it;</mo>
          <mrow>
            <mover>
              <mi>Y</mi>
              <mo>.</mo>
            </mover>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>11</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00004" ALT="embedded image" FILE="US06459940-20021001-M00004.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00051" LVL="0"><PTEXT><PDAT>Now, from equation (7) and equation (4) it follows that </PDAT>
<CWU>
<MATH-US ID="MATH-US-00005">
<MATHEMATICA ID="MATHEMATICA-00005" ALT="mathematica file" FILE="US06459940-20021001-M00005.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mi>D</mi>
          <mo>.</mo>
        </mover>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mfrac>
              <mrow>
                <mn>2</mn>
                <mo>&it;</mo>
                <msub>
                  <mi>J</mi>
                  <mi>m</mi>
                </msub>
                <mo>&it;</mo>
                <msup>
                  <mover>
                    <mi>&theta;</mi>
                    <mo>~</mo>
                  </mover>
                  <mi>&Prime;</mi>
                </msup>
              </mrow>
              <msup>
                <mi>Y</mi>
                <mn>4</mn>
              </msup>
            </mfrac>
            <mo>&it;</mo>
            <msub>
              <mi>&theta;</mi>
              <mi>l</mi>
            </msub>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mn>2</mn>
            <mo>&it;</mo>
            <mrow>
              <mi>C</mi>
              <mo>.</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>12</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00005" ALT="embedded image" FILE="US06459940-20021001-M00005.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00052" LVL="7"><PTEXT><PDAT>This property will be used later for the Lyapunov stability analysis of the controllers.</PDAT></PTEXT></PARA>
<PARA ID="P-00053" LVL="0"><PTEXT><PDAT>To carry out simulations using Equation (9) or (10), we need the kinematic error profile &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>) and its two successive derivatives with respect to &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>. This requires that the discrete experimental data for &thgr;</PDAT><HIL><SB><PDAT>k </PDAT></SB></HIL><PDAT>be represented in a continuous and at least twice differentiable function of &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>. This can be achieved by first representing the discrete data in the form of a piece-wise continuous curve and then using a projection of this curve onto the finite dimensional basis of Fourier eigenfunctions. In other words, we use the best approximation of the experimental profile in the subspace spanned by a finite number (in this case 16) of Fourier eigenfunctions. The profile is thus represented by </PDAT>
<CWU>
<MATH-US ID="MATH-US-00006">
<MATHEMATICA ID="MATHEMATICA-00006" ALT="mathematica file" FILE="US06459940-20021001-M00006.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mover>
          <mi>&theta;</mi>
          <mo>~</mo>
        </mover>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <msub>
              <mi>a</mi>
              <mn>0</mn>
            </msub>
            <mn>2</mn>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <munderover>
              <mo>&Sum;</mo>
              <mrow>
                <mi>n</mi>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
              <mi>k</mi>
            </munderover>
            <mo>&it;</mo>
            <mrow>
              <mrow>
                <mo>[</mo>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>a</mi>
                      <mi>n</mi>
                    </msub>
                    <mo>&it;</mo>
                    <mrow>
                      <mi>cos</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>n</mi>
                          <mo>&it;</mo>
                          <mstyle>
                            <mtext>&emsp;</mtext>
                          </mstyle>
                          <mo>&it;</mo>
                          <msub>
                            <mi>&theta;</mi>
                            <mi>m</mi>
                          </msub>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <msub>
                      <mi>b</mi>
                      <mi>n</mi>
                    </msub>
                    <mo>&it;</mo>
                    <mrow>
                      <mi>sin</mi>
                      <mo>&af;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>n</mi>
                          <mo>&it;</mo>
                          <mstyle>
                            <mtext>&emsp;</mtext>
                          </mstyle>
                          <mo>&it;</mo>
                          <msub>
                            <mi>&theta;</mi>
                            <mi>m</mi>
                          </msub>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>]</mo>
              </mrow>
              <mo>&it;</mo>
              <mstyle>
                <mtext>&emsp;</mtext>
              </mstyle>
              <mo>&it;</mo>
              <mi>where</mi>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>Eq&nbsp;&nbsp;12(13)</mtext>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>a</mi>
            <mi>n</mi>
          </msub>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>&pi;</mi>
            </mfrac>
            <mo>&it;</mo>
            <mrow>
              <msubsup>
                <mo>&Integral;</mo>
                <mn>0</mn>
                <mrow>
                  <mn>2</mn>
                  <mo>&it;</mo>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <mi>&pi;</mi>
                </mrow>
              </msubsup>
              <mo>&it;</mo>
              <mrow>
                <mrow>
                  <mover>
                    <mi>&theta;</mi>
                    <mo>~</mo>
                  </mover>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <msub>
                      <mi>&theta;</mi>
                      <mi>m</mi>
                    </msub>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>&it;</mo>
                <mrow>
                  <mi>cos</mi>
                  <mo>&af;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>n</mi>
                      <mo>&it;</mo>
                      <mstyle>
                        <mtext>&emsp;</mtext>
                      </mstyle>
                      <mo>&it;</mo>
                      <msub>
                        <mi>&theta;</mi>
                        <mi>m</mi>
                      </msub>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>&it;</mo>
                <mstyle>
                  <mtext>&emsp;</mtext>
                </mstyle>
                <mo>&it;</mo>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
        <mi>and</mi>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>eq&nbsp;&nbsp;13(14a)</mtext>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>b</mi>
          <mi>n</mi>
        </msub>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mi>&pi;</mi>
          </mfrac>
          <mo>&it;</mo>
          <mrow>
            <msubsup>
              <mo>&Integral;</mo>
              <mn>0</mn>
              <mrow>
                <mn>2</mn>
                <mo>&it;</mo>
                <mi>&pi;</mi>
              </mrow>
            </msubsup>
            <mo>&it;</mo>
            <mrow>
              <mrow>
                <mover>
                  <mi>&theta;</mi>
                  <mo>~</mo>
                </mover>
                <mo>&af;</mo>
                <mrow>
                  <mo>(</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&it;</mo>
              <mrow>
                <mi>sin</mi>
                <mo>&af;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>n</mi>
                    <mo>&it;</mo>
                    <mstyle>
                      <mtext>&emsp;</mtext>
                    </mstyle>
                    <mo>&it;</mo>
                    <msub>
                      <mi>&theta;</mi>
                      <mi>m</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&it;</mo>
              <mstyle>
                <mtext>&emsp;</mtext>
              </mstyle>
              <mo>&it;</mo>
              <mrow>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
                <mo>.</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(14b)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00006" ALT="embedded image" FILE="US06459940-20021001-M00006.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00054" LVL="7"><PTEXT><PDAT>The Fourier coefficients (a</PDAT><HIL><SB><PDAT>n</PDAT></SB></HIL><PDAT>, b</PDAT><HIL><SB><PDAT>n</PDAT></SB></HIL><PDAT>) are obtained by using numerical integration techniques and linear interpolation of the data.</PDAT></PTEXT></PARA>
<PARA ID="P-00055" LVL="7"><PTEXT><PDAT>Set-point Control</PDAT></PTEXT></PARA>
<PARA ID="P-00056" LVL="0"><PTEXT><PDAT>This section sets out set-point and trajectory tracking control strategies that compensate for the kinematic error in order to achieve high precision positioning. Based on the model dynamics derived previously, this section develops a control law to compensate for kinematic error in a set-point control of load position. The asymptotic stability in compensation can be proved using the Lyapunov stability theory, as set out in the Appendix.</PDAT></PTEXT></PARA>
<PARA ID="P-00057" LVL="0"><PTEXT><PDAT>Let the set-point control problem consist of driving the load shaft position &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>to a constant reference position &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>. Let both motor and load state feedback be available as shown in FIG. </PDAT><HIL><BOLD><PDAT>8</PDAT></BOLD></HIL><PDAT>. Note that {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>and {umlaut over (&thgr;)}</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>are zero since &thgr;</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>is constant. In this setting, we have discovered a set-point control strategy for driving the load position &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>to the reference position &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>, thereby compensating completely for the kinematic error. Specifically, this can be accomplished by using the following equation to calculate the control input, &tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>:</PDAT></PTEXT></PARA>
<PARA ID="P-00058" LVL="0"><PTEXT><F><PTEXT><PDAT>&tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&equals;Y</PDAT></ITALIC></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)(</PDAT><HIL><ITALIC><PDAT>K</PDAT></ITALIC></HIL><HIL><SB><PDAT>p</PDAT></SB></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><HIL><ITALIC><PDAT>&minus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>d</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>),&emsp;&emsp;(15)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00059" LVL="7"><PTEXT><PDAT>where K</PDAT><HIL><SB><PDAT>p </PDAT></SB></HIL><PDAT>and K</PDAT><HIL><SB><PDAT>d </PDAT></SB></HIL><PDAT>are positive constants, and &thgr;</PDAT><HIL><SB><PDAT>l,e </PDAT></SB></HIL><PDAT>is defined as &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>. The load will be driven to the reference position &thgr;</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>such that (&thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>)&rarr;0 and {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>&rarr;0 as t&rarr;&infin;, for all kinematic error profiles &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>).</PDAT></PTEXT></PARA>
<PARA ID="P-00060" LVL="0"><PTEXT><PDAT>Note that the control algorithm does not contain an acceleration term.</PDAT></PTEXT></PARA>
<PARA ID="P-00061" LVL="7"><PTEXT><PDAT>Tracking Control</PDAT></PTEXT></PARA>
<PARA ID="P-00062" LVL="0"><PTEXT><PDAT>This section focuses on trajectory tracking with harmonic drives using a nonlinear computed torque and PD-type controller derived above to compensate for kinematic error and sets out a control strategy for tracking the load position along a desired trajectory. With this novel control algorithm, as in the case of set-point control, the tracking error asymptotically approaches zero irrespective of the profile of the kinematic error. To start, we assume that the load position is to track a reference trajectory &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t). Let &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t) be a twice differentiable function of time t. Furthermore, let both motor and load state feedbacks be available, as shown, for example, in FIG. </PDAT><HIL><BOLD><PDAT>8</PDAT></BOLD></HIL><PDAT>. In this setting, the following trajectory tracking control algorithm can be used to calculate the control input, &tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>:</PDAT></PTEXT></PARA>
<PARA ID="P-00063" LVL="0"><PTEXT><F><PTEXT><PDAT>&tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&equals;Y</PDAT></ITALIC></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)(&tgr;</PDAT><HIL><SB><PDAT>md</PDAT></SB></HIL><HIL><ITALIC><PDAT>&plus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>p</PDAT></SB></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><HIL><ITALIC><PDAT>&minus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>d</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>),&emsp;&emsp;(16a)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00064" LVL="7"><PTEXT><PDAT>and </PDAT>
<CWU>
<MATH-US ID="MATH-US-00007">
<MATHEMATICA ID="MATHEMATICA-00007" ALT="mathematica file" FILE="US06459940-20021001-M00007.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>&tau;</mi>
          <mi>md</mi>
        </msub>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mfrac>
                  <msub>
                    <mi>J</mi>
                    <mi>m</mi>
                  </msub>
                  <msup>
                    <mi>Y</mi>
                    <mn>2</mn>
                  </msup>
                </mfrac>
                <mo>+</mo>
                <msub>
                  <mi>J</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&it;</mo>
            <msubsup>
              <mover>
                <mi>&theta;</mi>
                <mi>&DoubleDot;</mi>
              </mover>
              <mi>l</mi>
              <mi>&tau;</mi>
            </msubsup>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <mrow>
                <msub>
                  <mi>J</mi>
                  <mi>m</mi>
                </msub>
                <mo>&it;</mo>
                <msup>
                  <mover>
                    <mi>&theta;</mi>
                    <mo>~</mo>
                  </mover>
                  <mi>&Prime;</mi>
                </msup>
              </mrow>
              <msup>
                <mi>Y</mi>
                <mn>4</mn>
              </msup>
            </mfrac>
            <mo>&it;</mo>
            <msub>
              <mover>
                <mi>&theta;</mi>
                <mo>.</mo>
              </mover>
              <mi>l</mi>
            </msub>
            <mo>&it;</mo>
            <msubsup>
              <mover>
                <mi>&theta;</mi>
                <mo>.</mo>
              </mover>
              <mi>l</mi>
              <mi>&tau;</mi>
            </msubsup>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mfrac>
                <msub>
                  <mi>B</mi>
                  <mi>m</mi>
                </msub>
                <msup>
                  <mi>Y</mi>
                  <mn>2</mn>
                </msup>
              </mfrac>
              <mo>+</mo>
              <msub>
                <mi>B</mi>
                <mi>l</mi>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mstyle>
        <mtext>(16b)</mtext>
      </mstyle>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00007" ALT="embedded image" FILE="US06459940-20021001-M00007.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00065" LVL="7"><PTEXT><PDAT>where K</PDAT><HIL><SB><PDAT>p </PDAT></SB></HIL><PDAT>and K</PDAT><HIL><SB><PDAT>d </PDAT></SB></HIL><PDAT>are positive constants, and &thgr;</PDAT><HIL><SB><PDAT>l,e </PDAT></SB></HIL><PDAT>is defined as &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t)&minus;&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>. The load will be driven to the reference tracking trajectory such that (&thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t)&minus;&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>)&rarr;0 and ({dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t)&minus;{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>)&rarr;0 as t&rarr;&infin;, for all kinematic error profiles &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>). Hence, the equilibrium e&equals;0 is asymptotically stable, and the controller achieves successful tracking irrespective of the profile of kinematic error. Proof of this algorithm is set out in the Appendix.</PDAT></PTEXT></PARA>
<PARA ID="P-00066" LVL="7"><PTEXT><PDAT>Simulation and Experimental Results</PDAT></PTEXT></PARA>
<PARA ID="P-00067" LVL="0"><PTEXT><PDAT>The control algorithms described above can be implemented in simulation using the ordinary differential equation solver in MATLAB. The experimental implementation is carried out using a dedicated harmonic drive test setup depicted in FIG. </PDAT><HIL><BOLD><PDAT>7</PDAT></BOLD></HIL><PDAT>. Specifically, the experimental system </PDAT><HIL><BOLD><PDAT>100</PDAT></BOLD></HIL><PDAT> comprises a servo motor </PDAT><HIL><BOLD><PDAT>110</PDAT></BOLD></HIL><PDAT>, a harmonic drive module </PDAT><HIL><BOLD><PDAT>120</PDAT></BOLD></HIL><PDAT> (HDC-40 manufactured by Harmonic Drive Technologies of Peabody Mass.), and a digital control module </PDAT><HIL><BOLD><PDAT>130</PDAT></BOLD></HIL><PDAT>. Digital control module </PDAT><HIL><BOLD><PDAT>130</PDAT></BOLD></HIL><PDAT> has an electromechanical interface with the harmonic drive module so as to acquire system information using various sensors (not shown). In particular, the motor position is monitored by a rotary encoder (resolution&equals;0.045&deg;), the load position is measured by a laser rotary encoder (resolution&equals;0.0018&deg;), and the load torque is measured with a DC operated non-contact rotating torque sensor (Note that torque sensor is not used for the purpose of this work). As it can be seen, the experimental system was operated in the vertical plane.</PDAT></PTEXT></PARA>
<PARA ID="P-00068" LVL="7"><PTEXT><PDAT>Experimental Implementation</PDAT></PTEXT></PARA>
<PARA ID="P-00069" LVL="0"><PTEXT><PDAT>The experimental implementation of the control schemes presented above does not require any prior information regarding the profile of the kinematic error &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>. All the required terms in the control law are computed on-line. This section deals with different issues involved in these computations.</PDAT></PTEXT></PARA>
<PARA ID="P-00070" LVL="7"><PTEXT><PDAT>Computation of Y</PDAT></PTEXT></PARA>
<PARA ID="P-00071" LVL="0"><PTEXT><PDAT>Digital implementation of Y can be realized using a causal approximation of derivative terms in equation (5). Thus, </PDAT>
<CWU>
<MATH-US ID="MATH-US-00008">
<MATHEMATICA ID="MATHEMATICA-00008" ALT="mathematica file" FILE="US06459940-20021001-M00008.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>Y</mi>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mrow>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>l</mi>
                  </msub>
                </mrow>
                <mo>/</mo>
                <mrow>
                  <mo>&dd;</mo>
                  <mi>t</mi>
                </mrow>
              </mrow>
              <mrow>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
                <mo>/</mo>
                <mrow>
                  <mo>&dd;</mo>
                  <mi>t</mi>
                </mrow>
              </mrow>
            </mfrac>
            <mo>=</mo>
            <mrow>
              <mfrac>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>l</mi>
                  </msub>
                </mrow>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
              </mfrac>
              <mo>&TildeTilde;</mo>
              <mfrac>
                <mrow>
                  <mi>&Delta;</mi>
                  <mo>&it;</mo>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>l</mi>
                  </msub>
                </mrow>
                <mrow>
                  <mi>&Delta;</mi>
                  <mo>&it;</mo>
                  <mstyle>
                    <mtext>&emsp;</mtext>
                  </mstyle>
                  <mo>&it;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
              </mfrac>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>17</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00008" ALT="embedded image" FILE="US06459940-20021001-M00008.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00072" LVL="7"><PTEXT><PDAT>where the operator &Dgr; represents the difference between the value of variable at a given sampling instant and that at a previous sampling instant. As &Dgr;&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>43 0, equation (17) indicates a possible singularity. The following analysis implements the computation devoid of singularity. The variational analysis of equation (1) shows that </PDAT>
<CWU>
<MATH-US ID="MATH-US-00009">
<MATHEMATICA ID="MATHEMATICA-00009" ALT="mathematica file" FILE="US06459940-20021001-M00009.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&dd;</mo>
          <mover>
            <mi>&theta;</mi>
            <mo>~</mo>
          </mover>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mo>&dd;</mo>
              <msub>
                <mi>&theta;</mi>
                <mi>m</mi>
              </msub>
            </mrow>
            <mi>N</mi>
          </mfrac>
          <mo>-</mo>
          <mrow>
            <mrow>
              <mo>&dd;</mo>
              <msub>
                <mi>&theta;</mi>
                <mi>l</mi>
              </msub>
            </mrow>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>18</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00009" ALT="embedded image" FILE="US06459940-20021001-M00009.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00073" LVL="0"><PTEXT><PDAT>Dividing the equation by d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>, rearranging the terms, and taking limit as d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>43 0 on both sides, gives </PDAT>
<CWU>
<MATH-US ID="MATH-US-00010">
<MATHEMATICA ID="MATHEMATICA-00010" ALT="mathematica file" FILE="US06459940-20021001-M00010.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <munder>
            <mi>lim</mi>
            <mrow>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
              <mo>&RightArrow;</mo>
              <mn>0</mn>
            </mrow>
          </munder>
          <mo>&it;</mo>
          <mi>Y</mi>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <munder>
              <mi>lim</mi>
              <mrow>
                <mrow>
                  <mo>&dd;</mo>
                  <msub>
                    <mi>&theta;</mi>
                    <mi>m</mi>
                  </msub>
                </mrow>
                <mo>&RightArrow;</mo>
                <mn>0</mn>
              </mrow>
            </munder>
            <mo>&it;</mo>
            <mfrac>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
            </mfrac>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>N</mi>
            </mfrac>
            <mo>-</mo>
            <mrow>
              <munder>
                <mi>lim</mi>
                <mrow>
                  <mrow>
                    <mo>&dd;</mo>
                    <msub>
                      <mi>&theta;</mi>
                      <mi>m</mi>
                    </msub>
                  </mrow>
                  <mo>&RightArrow;</mo>
                  <mn>0</mn>
                </mrow>
              </munder>
              <mo>&it;</mo>
              <mrow>
                <mfrac>
                  <mrow>
                    <mo>&dd;</mo>
                    <mover>
                      <mi>&theta;</mi>
                      <mo>~</mo>
                    </mover>
                  </mrow>
                  <mrow>
                    <mo>&dd;</mo>
                    <msub>
                      <mi>&theta;</mi>
                      <mi>m</mi>
                    </msub>
                  </mrow>
                </mfrac>
                <mo>.</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>19</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00010" ALT="embedded image" FILE="US06459940-20021001-M00010.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00074" LVL="0"><PTEXT><PDAT>The term d&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>/d&thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>represents the slope of the kinematic error curve. As d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>43 0, this term tends to be constant at a given motor position &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>. Hence as d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>43 0, it follows from Equation (19) that Y tends to remain constant at whatever value it has at that position. This constant value can not be equal to 1/N as per the property B</PDAT><HIL><BOLD><PDAT>1</PDAT></BOLD></HIL><PDAT> (see Appendix). With this understanding, the computation of Y is implemented devoid of singularity.</PDAT></PTEXT></PARA>
<PARA ID="P-00075" LVL="0"><PTEXT><PDAT>Another issue in computing Y is that the numerical approximation of a derivative induces unnecessary high frequency components. To reduce these high frequency components and to reduce further the error in computation of &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;, Y is filtered using a suitable second order low pass filter.</PDAT></PTEXT></PARA>
<PARA ID="P-00076" LVL="7"><PTEXT><PDAT>Computation of &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;</PDAT></PTEXT></PARA>
<PARA ID="P-00077" LVL="0"><PTEXT><PDAT>From equation (6), we can get d&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>/d&thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>as </PDAT>
<CWU>
<MATH-US ID="MATH-US-00011">
<MATHEMATICA ID="MATHEMATICA-00011" ALT="mathematica file" FILE="US06459940-20021001-M00011.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msup>
            <mover>
              <mi>&theta;</mi>
              <mo>~</mo>
            </mover>
            <mi>&prime;</mi>
          </msup>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mrow>
                <mo>&dd;</mo>
                <mover>
                  <mi>&theta;</mi>
                  <mo>~</mo>
                </mover>
              </mrow>
              <mrow>
                <mo>&dd;</mo>
                <msub>
                  <mi>&theta;</mi>
                  <mi>m</mi>
                </msub>
              </mrow>
            </mfrac>
            <mo>=</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <mi>N</mi>
              </mfrac>
              <mo>-</mo>
              <mi>Y</mi>
            </mrow>
          </mrow>
        </mrow>
        <mo>,</mo>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>20</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00011" ALT="embedded image" FILE="US06459940-20021001-M00011.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00078" LVL="7"><PTEXT><PDAT>where Y is computed as in the previous section. Next, we can represent &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime; using a similar causal approximation of derivative as </PDAT>
<CWU>
<MATH-US ID="MATH-US-00012">
<MATHEMATICA ID="MATHEMATICA-00012" ALT="mathematica file" FILE="US06459940-20021001-M00012.NB"/>
<MATHML>
<math>
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msup>
          <mover>
            <mi>&theta;</mi>
            <mo>~</mo>
          </mover>
          <mi>&Prime;</mi>
        </msup>
        <mo>&TildeTilde;</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mi>&Delta;</mi>
              <mo>&it;</mo>
              <mstyle>
                <mtext>&emsp;</mtext>
              </mstyle>
              <mo>&it;</mo>
              <msup>
                <mover>
                  <mi>&theta;</mi>
                  <mo>~</mo>
                </mover>
                <mi>&prime;</mi>
              </msup>
            </mrow>
            <msub>
              <mi>&Delta;&theta;</mi>
              <mi>m</mi>
            </msub>
          </mfrac>
          <mo>.</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>21</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</MATHML>
<EMI ID="EMI-M00012" ALT="embedded image" FILE="US06459940-20021001-M00012.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00079" LVL="7"><PTEXT><PDAT>This formula can be used to compute the second derivative &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;. Again, we may expect a singularity as &Dgr;&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&rarr;0. As in the previous case, the singularity can be avoided by obtaining the value of &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime; in the limiting case as &Dgr;&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&rarr;0, or equivalently as d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&rarr;0. Analysis in the previous case indicates that &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&prime;&equals;d&thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>/d&thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>tends to be a constant as d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&rarr;0. In the similar manner, &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;, which represents the slope of &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime; curve tends to remain constant as d&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&rarr;0. In this case again, to remove the high frequency components induced by the approximation of derivative, the signal &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime; is filtered using a second order low pass filter.</PDAT></PTEXT></PARA>
<PARA ID="P-00080" LVL="7"><PTEXT><PDAT>Compensation for Friction</PDAT></PTEXT></PARA>
<PARA ID="P-00081" LVL="0"><PTEXT><PDAT>The friction in the drive is not considered in the mathematical model. Hence the experimental conditions are tailored to suit the model. A static Coulomb friction model for compensation is assumed and unidirectional motion is maintained to avoid dynamic friction effects. The control input is modified based on the Coulomb model used for compensating friction:</PDAT></PTEXT></PARA>
<PARA ID="P-00082" LVL="0"><PTEXT><F><PTEXT><HIL><ITALIC><PDAT>u&equals;&tgr;</PDAT></ITALIC></HIL><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&plus;F</PDAT></ITALIC></HIL><HIL><SB><PDAT>f</PDAT></SB></HIL><PDAT>,&emsp;&emsp;(22)</PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00083" LVL="7"><PTEXT><PDAT>where F</PDAT><HIL><SB><PDAT>f </PDAT></SB></HIL><PDAT>represents the Coulomb friction term. This friction is identified based on simple experiments. To realize the unidirectional motion in the set-point and trajectory tracking experiments, the gain parameters K</PDAT><HIL><SB><PDAT>p </PDAT></SB></HIL><PDAT>and K</PDAT><HIL><SB><PDAT>d </PDAT></SB></HIL><PDAT>are chosen to avoid overshoot. Also, in tracking experiments, the reference trajectory is chosen such that the reference velocity does not change sign, thereby ensuring unidirectional motion for purposes of analysis.</PDAT></PTEXT></PARA>
<PARA ID="P-00084" LVL="7"><PTEXT><PDAT>Set-point Control Results</PDAT></PTEXT></PARA>
<PARA ID="P-00085" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 9</PDAT></FGREF><PDAT> presents the simulation and experimental error history in an exemplary implementation of the set-point control strategy. It was observed that the load position error (&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>) finally goes to zero in simulation and to a point within the encoder resolution in experiments. Thus, a successful compensation of kinematic error in set-point control of harmonic drive is achieved.</PDAT></PTEXT></PARA>
<PARA ID="P-00086" LVL="0"><PTEXT><PDAT>In the steady state, the observation of motor position error (computed as &thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>N) shows a constant error that corresponds to the kinematic error at the final motor position. The final kinematic error can have different value in simulation and experiments. This is because the kinematic error profile used in simulation may differ from that in the experiments due to its dependence on different factors mentioned above. Also, a phase lag between the two profiles can be another source of this difference. From the final shift in the motor position, we conclude that the controller dynamically adjusts the motor position so as to make the load position error-free. In this way, the controller achieves the complete compensation for the error. Close observation of the results shows that there is an overshoot in the results of simulation but not in those of experiments for the same gain values. This can be attributed to the dynamic friction effects which become dominant near zero velocities.</PDAT></PTEXT></PARA>
<PARA ID="P-00087" LVL="7"><PTEXT><PDAT>Tracking Control Results</PDAT></PTEXT></PARA>
<PARA ID="P-00088" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 10</PDAT></FGREF><PDAT> shows the simulation and experimental steady state results when the load position tracks a trajectory defined by &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>(t)&equals;2 sin(&pgr;t/2)&plus;10t. The gain values used in tracking are also listed in FIG. </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT>. Note that the trajectory is chosen to have a unidirectional motion to avoid dynamic friction effects, and lower velocities are used to minimize the unmodeled flexibility effects. We observe that the load position error again goes to zero in simulation. Experimental results show approximately 40 percent reduction in load position error. </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 11</PDAT></FGREF><PDAT> illustrates this reduction in tracking error as compared to the kinematic error produced in the absence of the controller. Thus, successful tracking of load position is achieved within the experimental constraints.</PDAT></PTEXT></PARA>
<PARA ID="P-00089" LVL="0"><PTEXT><PDAT>The small amplitude high frequency discrepancy in the experimental results can be attributed to unmodeled flexibility effects and the error in the computation of numerical derivative &thgr;</PDAT><HIL><SB><PDAT>k</PDAT></SB></HIL><PDAT>&Prime;. Again, the Coulomb friction model which was assumed to represent the friction in the drive may not be rich enough for the purpose of complete friction compensation. The motor position error profile in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 10</PDAT></FGREF><PDAT> shows the reflected kinematic error both in simulation and experiments. Thus, the tracking controller also adjusts the motor position dynamically so as to make the load position error-free.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>CONCLUSION</PDAT></STEXT></H>
<PARA ID="P-00090" LVL="0"><PTEXT><PDAT>This work presents nonlinear control algorithms for closed loop compensation for kinematic error in set-point and trajectory tracking with harmonic drives. Using the Lyapunov stability theory, it has been shown that the steady state error in the load position can be driven to zero with these algorithms. Furthermore, these algorithms do not require any information regarding the nonlinear, drive-specific kinematic error profile. The experimental and the simulation results verify the effectiveness of these algorithms. Thus these profile-independent algorithms can compensate for the kinematic error in harmonic drives under varying operating conditions and, hence, are useful for applications involving precision control of harmonic drives.</PDAT></PTEXT></PARA>
<PARA ID="P-00091" LVL="7"><PTEXT><PDAT>Mathematical Preliminaries</PDAT></PTEXT></PARA>
<PARA ID="P-00092" LVL="7"><PTEXT><PDAT>Notations</PDAT></PTEXT></PARA>
<PARA ID="P-00093" LVL="2"><PTEXT><PDAT>L</PDAT><HIL><SB><PDAT>&infin;</PDAT></SB></HIL><HIL><SP><PDAT>n</PDAT></SP></HIL><PDAT>&equals;&lcub;f: R</PDAT><HIL><SB><PDAT>&plus;</PDAT></SB></HIL><PDAT>&rarr;R</PDAT><HIL><SP><PDAT>n </PDAT></SP></HIL><PDAT>such that f is Lebesgue measurable and &par;f&par;</PDAT><HIL><SB><PDAT>&infin;</PDAT></SB></HIL><PDAT>&lt;&infin;&rcub;,</PDAT></PTEXT></PARA>
<PARA ID="P-00094" LVL="2"><PTEXT><PDAT>L</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><HIL><SP><PDAT>n</PDAT></SP></HIL><PDAT>&equals;&lcub;f: R</PDAT><HIL><SB><PDAT>&plus;</PDAT></SB></HIL><PDAT>&rarr;R</PDAT><HIL><SP><PDAT>n </PDAT></SP></HIL><PDAT>such that f is Lebesgue measurable and &par;f&par;</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>&lt;&infin;&rcub;,</PDAT></PTEXT></PARA>
<PARA ID="P-00095" LVL="7"><PTEXT><PDAT>where &par;f&par;</PDAT><HIL><SB><PDAT>&infin; and &par;f&par;</PDAT></SB></HIL><HIL><SB><PDAT>2 </PDAT></SB></HIL><PDAT>are given by</PDAT></PTEXT></PARA>
<PARA ID="P-00096" LVL="2"><PTEXT><PDAT>&par;f&par;</PDAT><HIL><SB><PDAT>&infin;</PDAT></SB></HIL><PDAT>&equals;ess sup &par;f(t)&par;, t&egr;&lsqb;</PDAT><HIL><BOLD><PDAT>0</PDAT></BOLD></HIL><PDAT>,&infin;),</PDAT></PTEXT></PARA>
<PARA ID="P-00097" LVL="2"><PTEXT><PDAT>&par;f&par;</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><PDAT>&equals;&lcub;&int;</PDAT><HIL><SB><PDAT>0</PDAT></SB></HIL><HIL><SP><PDAT>&infin;</PDAT></SP></HIL><PDAT>&par;f(t)&par;</PDAT><HIL><SP><PDAT>2 </PDAT></SP></HIL><PDAT>dt&rcub;</PDAT><HIL><SP><PDAT>&frac12;</PDAT></SP></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00098" LVL="7"><PTEXT><PDAT>Corollary of Barbalat Lemma &lsqb; &rsqb;</PDAT></PTEXT></PARA>
<PARA ID="P-00099" LVL="2"><PTEXT><PDAT>If f(t), &lsqb;f&bsol;dot&rsqb;(t)&egr;L</PDAT><HIL><SB><PDAT>&infin;</PDAT></SB></HIL><HIL><SP><PDAT>n </PDAT></SP></HIL><PDAT>and f(t)&egr;L</PDAT><HIL><SB><PDAT>2</PDAT></SB></HIL><HIL><SP><PDAT>n</PDAT></SP></HIL><PDAT>, then f(t)&rarr;0 as t&rarr;&infin;.</PDAT></PTEXT></PARA>
</BTEXT>
</DETDESC>
</SDODE>
<SDOCL>
<H LVL="1"><STEXT><PDAT>What is claimed is: </PDAT></STEXT></H>
<CL>
<CLM ID="CLM-00001">
<PARA ID="P-00100" LVL="0"><PTEXT><PDAT>1. A method for tracking control of kinematic error in a harmonic drive system having a motor side and a load side, comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>calculating a control input, &tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>, for the harmonic drive using the equation </PDAT></PTEXT></CLMSTEP>
<PARA ID="P-00101" LVL="7"><PTEXT><PDAT>where</PDAT></PTEXT></PARA>
<PARA ID="P-00102" LVL="0"><PTEXT><F><PTEXT><PDAT>&tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&equals;Y</PDAT></ITALIC></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)(&tgr;</PDAT><HIL><SB><PDAT>md</PDAT></SB></HIL><HIL><ITALIC><PDAT>&plus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>p</PDAT></SB></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><HIL><ITALIC><PDAT>&minus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>d</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>), </PDAT></PTEXT></F><PDAT></PDAT>
<CWU>
<MATH-US ID="MATH-US-00013">
<MATHEMATICA ID="MATHEMATICA-00013" ALT="mathematica file" FILE="US06459940-20021001-M00013.NB"/>
<MATHML>
<math>
<mrow>
  <mrow>
    <mi>and</mi>
    <mo>&it;</mo>
    <mstyle>
      <mtext>&emsp;</mtext>
    </mstyle>
    <mo>&it;</mo>
    <msub>
      <mi>&tau;</mi>
      <mi>md</mi>
    </msub>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mi>Jm</mi>
            <msup>
              <mi>Y</mi>
              <mn>2</mn>
            </msup>
          </mfrac>
          <mo>+</mo>
          <msub>
            <mi>J</mi>
            <mi>l</mi>
          </msub>
        </mrow>
        <mo>)</mo>
      </mrow>
      <mo>&it;</mo>
      <msubsup>
        <mover>
          <mi>&theta;</mi>
          <mi>&DoubleDot;</mi>
        </mover>
        <mi>l</mi>
        <mi>r</mi>
      </msubsup>
    </mrow>
    <mo>+</mo>
    <mrow>
      <mfrac>
        <mrow>
          <msub>
            <mi>J</mi>
            <mi>m</mi>
          </msub>
          <mo>&it;</mo>
          <msup>
            <mover>
              <mover>
                <mi>&theta;</mi>
                <mi>_</mi>
              </mover>
              <mi>_</mi>
            </mover>
            <mi>&Prime;</mi>
          </msup>
        </mrow>
        <msup>
          <mi>Y</mi>
          <mn>4</mn>
        </msup>
      </mfrac>
      <mo>&it;</mo>
      <msub>
        <mover>
          <mi>&theta;</mi>
          <mo>.</mo>
        </mover>
        <mi>l</mi>
      </msub>
      <mo>&it;</mo>
      <msubsup>
        <mover>
          <mi>&theta;</mi>
          <mo>.</mo>
        </mover>
        <mi>l</mi>
        <mi>&tau;</mi>
      </msubsup>
    </mrow>
    <mo>+</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mfrac>
          <msub>
            <mi>B</mi>
            <mi>m</mi>
          </msub>
          <msup>
            <mi>Y</mi>
            <mn>2</mn>
          </msup>
        </mfrac>
        <mo>+</mo>
        <msub>
          <mi>B</mi>
          <mi>l</mi>
        </msub>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00013" ALT="embedded image" FILE="US06459940-20021001-M00013.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
<PARA ID="P-00103" LVL="7"><PTEXT><PDAT>where Y is a nonlinear function of kinematic error, K</PDAT><HIL><SB><PDAT>p </PDAT></SB></HIL><PDAT>and K</PDAT><HIL><SB><PDAT>d </PDAT></SB></HIL><PDAT>are positive constants, &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>is the motor position of the harmonic drive, &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e </PDAT></SP></HIL><PDAT>is the error defined as &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l. </PDAT></SB></HIL><PDAT>where &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>is the load position and &thgr;</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>is the desired load angle, {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>&equals;d&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>/dt, {umlaut over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>&equals;d</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><PDAT>/dt</PDAT><HIL><SP><PDAT>2</PDAT></SP></HIL><PDAT>, {dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>r</PDAT></SP></HIL><PDAT>&equals;d&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>r</PDAT></SP></HIL><PDAT>/dt, J</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>is inertia on the motor side, J</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>is inertia on the load side, B</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>is damping on the motor side, and B</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>is damping on the load side.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00002">
<PARA ID="P-00104" LVL="0"><PTEXT><PDAT>2. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation: </PDAT>
<CWU>
<MATH-US ID="MATH-US-00014">
<MATHEMATICA ID="MATHEMATICA-00014" ALT="mathematica file" FILE="US06459940-20021001-M00014.NB"/>
<MATHML>
<math>
<mrow>
  <mi>Y</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <mn>1</mn>
      <mi>N</mi>
    </mfrac>
    <mo>-</mo>
    <mrow>
      <mfrac>
        <mrow>
          <mo>&dd;</mo>
          <mover>
            <mi>&theta;</mi>
            <mo>~</mo>
          </mover>
        </mrow>
        <mrow>
          <mo>&dd;</mo>
          <msub>
            <mi>&theta;</mi>
            <mi>m</mi>
          </msub>
        </mrow>
      </mfrac>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00014" ALT="embedded image" FILE="US06459940-20021001-M00014.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
</CLM>
<CLM ID="CLM-00003">
<PARA ID="P-00105" LVL="0"><PTEXT><PDAT>3. The method according to </PDAT><CLREF ID="CLM-00002"><PDAT>claim 2</PDAT></CLREF><PDAT>, wherein Y is filtered using a second order low pass filter.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00004">
<PARA ID="P-00106" LVL="0"><PTEXT><PDAT>4. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation: </PDAT>
<CWU>
<MATH-US ID="MATH-US-00015">
<MATHEMATICA ID="MATHEMATICA-00015" ALT="mathematica file" FILE="US06459940-20021001-M00015.NB"/>
<MATHML>
<math>
<mrow>
  <mi>Y</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <mrow>
        <mo>&dd;</mo>
        <msub>
          <mi>&theta;</mi>
          <mi>l</mi>
        </msub>
      </mrow>
      <mrow>
        <mo>&dd;</mo>
        <msub>
          <mi>&theta;</mi>
          <mi>m</mi>
        </msub>
      </mrow>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00015" ALT="embedded image" FILE="US06459940-20021001-M00015.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
</CLM>
<CLM ID="CLM-00005">
<PARA ID="P-00107" LVL="0"><PTEXT><PDAT>5. The method according to </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation: </PDAT>
<CWU>
<MATH-US ID="MATH-US-00016">
<MATHEMATICA ID="MATHEMATICA-00016" ALT="mathematica file" FILE="US06459940-20021001-M00016.NB"/>
<MATHML>
<math>
<mrow>
  <mi>Y</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <msub>
        <mi>&Delta;&theta;</mi>
        <mi>l</mi>
      </msub>
      <msub>
        <mi>&Delta;&theta;</mi>
        <mi>m</mi>
      </msub>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00016" ALT="embedded image" FILE="US06459940-20021001-M00016.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
</CLM>
<CLM ID="CLM-00006">
<PARA ID="P-00108" LVL="0"><PTEXT><PDAT>6. A method for set point control of kinematic error in a set-point in a harmonic drive system having a motor side and a load side, comprising:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>calculating a control input, &tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>, for the harmonic drive using the equation </PDAT></PTEXT></CLMSTEP>
<PARA ID="P-00109" LVL="0"><PTEXT><F><PTEXT><PDAT>&tgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><HIL><ITALIC><PDAT>&equals;Y</PDAT></ITALIC></HIL><PDAT>(&thgr;</PDAT><HIL><SB><PDAT>m</PDAT></SB></HIL><PDAT>)(</PDAT><HIL><ITALIC><PDAT>K</PDAT></ITALIC></HIL><HIL><SB><PDAT>p</PDAT></SB></HIL><PDAT>&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e</PDAT></SP></HIL><HIL><ITALIC><PDAT>&minus;K</PDAT></ITALIC></HIL><HIL><SB><PDAT>d</PDAT></SB></HIL><PDAT>{dot over (&thgr;)}</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>), </PDAT></PTEXT></F></PTEXT></PARA>
<PARA ID="P-00110" LVL="7"><PTEXT><PDAT>where Y is a nonlinear function of the kinematic error, K</PDAT><HIL><SB><PDAT>p </PDAT></SB></HIL><PDAT>and K</PDAT><HIL><SB><PDAT>d </PDAT></SB></HIL><PDAT>are positive constants, &thgr;</PDAT><HIL><SB><PDAT>m </PDAT></SB></HIL><PDAT>is the motor position of the harmonic drive, &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><HIL><SP><PDAT>e </PDAT></SP></HIL><PDAT>is the error defined as &thgr;</PDAT><HIL><SB><PDAT>l,r</PDAT></SB></HIL><PDAT>&minus;&thgr;</PDAT><HIL><SB><PDAT>l. </PDAT></SB></HIL><PDAT>where &thgr;</PDAT><HIL><SB><PDAT>l </PDAT></SB></HIL><PDAT>is the load position and &thgr;</PDAT><HIL><SB><PDAT>l,r </PDAT></SB></HIL><PDAT>is the desired load angle, and &thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>&equals;d&thgr;</PDAT><HIL><SB><PDAT>l</PDAT></SB></HIL><PDAT>/dt.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00007">
<PARA ID="P-00111" LVL="0"><PTEXT><PDAT>7. The method according to </PDAT><CLREF ID="CLM-00006"><PDAT>claim 6</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation: </PDAT>
<CWU>
<MATH-US ID="MATH-US-00017">
<MATHEMATICA ID="MATHEMATICA-00017" ALT="mathematica file" FILE="US06459940-20021001-M00017.NB"/>
<MATHML>
<math>
<mrow>
  <mi>Y</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <mn>1</mn>
      <mi>N</mi>
    </mfrac>
    <mo>-</mo>
    <mrow>
      <mfrac>
        <mrow>
          <mo>&dd;</mo>
          <mover>
            <mi>&theta;</mi>
            <mo>~</mo>
          </mover>
        </mrow>
        <mrow>
          <mo>&dd;</mo>
          <msub>
            <mi>&theta;</mi>
            <mi>m</mi>
          </msub>
        </mrow>
      </mfrac>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00017" ALT="embedded image" FILE="US06459940-20021001-M00017.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
</CLM>
<CLM ID="CLM-00008">
<PARA ID="P-00112" LVL="0"><PTEXT><PDAT>8. The method according to </PDAT><CLREF ID="CLM-00007"><PDAT>claim 7</PDAT></CLREF><PDAT>, wherein Y is filtered using a second order low pass filter.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00009">
<PARA ID="P-00113" LVL="0"><PTEXT><PDAT>9. The method according to </PDAT><CLREF ID="CLM-00006"><PDAT>claim 6</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation: </PDAT>
<CWU>
<MATH-US ID="MATH-US-00018">
<MATHEMATICA ID="MATHEMATICA-00018" ALT="mathematica file" FILE="US06459940-20021001-M00018.NB"/>
<MATHML>
<math>
<mrow>
  <mi>Y</mi>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <mrow>
        <mo>&dd;</mo>
        <msub>
          <mi>&theta;</mi>
          <mi>l</mi>
        </msub>
      </mrow>
      <mrow>
        <mo>&dd;</mo>
        <msub>
          <mi>&theta;</mi>
          <mi>m</mi>
        </msub>
      </mrow>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</MATHML>
<EMI ID="EMI-M00018" ALT="embedded image" FILE="US06459940-20021001-M00018.TIF"/>
</MATH-US>
</CWU>
</PTEXT></PARA>
</CLM>
<CLM ID="CLM-00010">
<PARA ID="P-00114" LVL="0"><PTEXT><PDAT>10. The method according to </PDAT><CLREF ID="CLM-00006"><PDAT>claim 6</PDAT></CLREF><PDAT> wherein Y is calculated according to the following equation:</PDAT></PTEXT></PARA>
</CLM>
</CL>
</SDOCL>
<SDODR ID="DRAWINGS">
<EMI ID="EMI-D00000" ALT="embedded image" FILE="US06459940-20021001-D00000.TIF"/>
<EMI ID="EMI-D00001" ALT="embedded image" FILE="US06459940-20021001-D00001.TIF"/>
<EMI ID="EMI-D00002" ALT="embedded image" FILE="US06459940-20021001-D00002.TIF"/>
<EMI ID="EMI-D00003" ALT="embedded image" FILE="US06459940-20021001-D00003.TIF"/>
<EMI ID="EMI-D00004" ALT="embedded image" FILE="US06459940-20021001-D00004.TIF"/>
<EMI ID="EMI-D00005" ALT="embedded image" FILE="US06459940-20021001-D00005.TIF"/>
<EMI ID="EMI-D00006" ALT="embedded image" FILE="US06459940-20021001-D00006.TIF"/>
<EMI ID="EMI-D00007" ALT="embedded image" FILE="US06459940-20021001-D00007.TIF"/>
<EMI ID="EMI-D00008" ALT="embedded image" FILE="US06459940-20021001-D00008.TIF"/>
</SDODR>
</PATDOC>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PATDOC SYSTEM "ST32-US-Grant-025xml.dtd" [
<!ENTITY US06460124-20021001-D00000.TIF SYSTEM "US06460124-20021001-D00000.TIF" NDATA TIF>
<!ENTITY US06460124-20021001-D00001.TIF SYSTEM "US06460124-20021001-D00001.TIF" NDATA TIF>
<!ENTITY US06460124-20021001-D00002.TIF SYSTEM "US06460124-20021001-D00002.TIF" NDATA TIF>
<!ENTITY US06460124-20021001-D00003.TIF SYSTEM "US06460124-20021001-D00003.TIF" NDATA TIF>
]>
<PATDOC DTD="2.5" STATUS="Build 20020101">
<SDOBI>
<B100>
<B110><DNUM><PDAT>06460124</PDAT></DNUM></B110>
<B130><PDAT>B1</PDAT></B130>
<B140><DATE><PDAT>20021001</PDAT></DATE></B140>
<B190><PDAT>US</PDAT></B190>
</B100>
<B200>
<B210><DNUM><PDAT>09693030</PDAT></DNUM></B210>
<B211US><PDAT>09</PDAT></B211US>
<B220><DATE><PDAT>20001020</PDAT></DATE></B220>
</B200>
<B400>
<B472>
<B474US><PDAT>31</PDAT></B474US>
</B472>
</B400>
<B500>
<B510>
<B511><PDAT>G06F 1208</PDAT></B511>
<B512><PDAT>G06F 1300</PDAT></B512>
<B516><PDAT>7</PDAT></B516>
</B510>
<B520>
<B521><PDAT>711163</PDAT></B521>
<B522><PDAT>711119</PDAT></B522>
<B522><PDAT>711151</PDAT></B522>
</B520>
<B540><STEXT><PDAT>Method of using delays to speed processing of inferred critical program portions</PDAT></STEXT></B540>
<B560>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4318182</PDAT></DNUM>
<DATE><PDAT>19820300</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Bachman et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>709105</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>4320451</PDAT></DNUM>
<DATE><PDAT>19820300</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Bachman et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>709106</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5136691</PDAT></DNUM>
<DATE><PDAT>19920800</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Baror</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>711139</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>5185878</PDAT></DNUM>
<DATE><PDAT>19930200</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Baror et al.</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>711123</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B561>
<PCIT>
<DOC><DNUM><PDAT>6014728</PDAT></DNUM>
<DATE><PDAT>20000100</PDAT></DATE>
<KIND><PDAT>A</PDAT></KIND>
</DOC>
<PARTY-US>
<NAM><SNM><STEXT><PDAT>Baror</PDAT></STEXT></SNM></NAM>
</PARTY-US>
<PNC><PDAT>711133</PDAT></PNC></PCIT><CITED-BY-EXAMINER/>
</B561>
<B562><NCIT><STEXT><PDAT>James R. Goodman, et al.; Efficient Synchronization Primitives For Large-Scale Cache-Coherent Multiprocessors; 1989 ACM 0-89791.</PDAT></STEXT></NCIT><CITED-BY-OTHER/></B562>
</B560>
<B570>
<B577><PDAT>20</PDAT></B577>
<B578US><PDAT>19</PDAT></B578US>
</B570>
<B580>
<B582><PDAT>711100</PDAT></B582>
<B582><PDAT>711119</PDAT></B582>
<B582><PDAT>711125</PDAT></B582>
<B582><PDAT>711145</PDAT></B582>
<B582><PDAT>711147</PDAT></B582>
<B582><PDAT>711151</PDAT></B582>
<B582><PDAT>711154</PDAT></B582>
<B582><PDAT>711158</PDAT></B582>
<B582><PDAT>711163</PDAT></B582>
</B580>
<B590><B595><PDAT>3</PDAT></B595><B596><PDAT>6</PDAT></B596><B597US/>
</B590>
</B500>
<B700>
<B720>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Alain</PDAT></FNM><SNM><STEXT><PDAT>Kagi</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Portland</PDAT></CITY>
<STATE><PDAT>OR</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>James R.</PDAT></FNM><SNM><STEXT><PDAT>Goodman</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Madison</PDAT></CITY>
<STATE><PDAT>WI</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
<B721>
<PARTY-US>
<NAM><FNM><PDAT>Ravi</PDAT></FNM><SNM><STEXT><PDAT>Rajwar</PDAT></STEXT></SNM></NAM>
<ADR>
<CITY><PDAT>Madison</PDAT></CITY>
<STATE><PDAT>WI</PDAT></STATE>
</ADR>
</PARTY-US>
</B721>
</B720>
<B730>
<B731>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Wisconsin Alumni Research Foundation</PDAT></STEXT></ONM></NAM>
<ADR><CITY><PDAT>Madison</PDAT></CITY><STATE><PDAT>WI</PDAT></STATE></ADR>
</PARTY-US>
</B731>
<B732US>
<PDAT>02</PDAT>
</B732US>
</B730>
<B740>
<B741>
<PARTY-US>
<NAM><ONM><STEXT><PDAT>Quarles &amp; Brady LLP</PDAT></STEXT></ONM></NAM>
</PARTY-US>
</B741>
</B740>
<B745>
<B746>
<PARTY-US>
<NAM><FNM><PDAT>Tuan V.</PDAT></FNM><SNM><STEXT><PDAT>Thai</PDAT></STEXT></SNM></NAM>
</PARTY-US>
</B746>
<B748US><PDAT>2186</PDAT></B748US>
</B745>
</B700>
</SDOBI>
<SDOAB>
<BTEXT>
<PARA ID="P-00001" LVL="0"><PTEXT><PDAT>Critical sections of a program, providing exclusive access to shared data in a multi-processor architecture may be inferred from standard instructions and used to invoke a cache protocol that delays the response of requests of other cache and thus counter intuitively improving performance of the system. During this delay, read-only copies of data may be provided and the delay may recognize two priorities of requests, one of which is not delayed so as to improve the release of locks held by different processors.</PDAT></PTEXT></PARA>
</BTEXT>
</SDOAB>
<SDODE>
<GOVINT>
<BTEXT>
<H LVL="1"><STEXT><PDAT>STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH OR DEVELOPMENT</PDAT></STEXT></H>
<PARA ID="P-00002" LVL="0"><PTEXT><PDAT>This invention was made with United States government support awarded by the following agency: NSF 9810114.</PDAT></PTEXT></PARA>
<PARA ID="P-00003" LVL="0"><PTEXT><PDAT>The United States has certain rights in this invention.</PDAT></PTEXT></PARA>
</BTEXT>
</GOVINT>
<BRFSUM>
<BTEXT>
<H LVL="1"><STEXT><PDAT>CROSS-REFERENCE TO RELATED APPLICATIONS</PDAT></STEXT></H>
<H LVL="1"><STEXT><PDAT>Background of the Invention</PDAT></STEXT></H>
<PARA ID="P-00004" LVL="0"><PTEXT><PDAT>The present invention relates to computer architectures for multiprocessor systems and in particular to an architecture providing improved cache control when coordinating the exclusive use of data among multiple processors.</PDAT></PTEXT></PARA>
<PARA ID="P-00005" LVL="0"><PTEXT><PDAT>Computer architectures employing multiple processors working with a common memory are of particular interest in web servers. In such an application, each processor may serve a different web site whose content and programs are shared from the common memory.</PDAT></PTEXT></PARA>
<PARA ID="P-00006" LVL="0"><PTEXT><PDAT>In situations like this, each of the processors may need to modify the shared data. For example, in the implementation of a transaction-based reservation system, multiple processors handling reservations for different customers must read and write common data indicating the number of seats available. If the processors are not coordinated in their use of the common data, serious error can occur. For example, a first processor may read a variable indicating an available airline seat and then set that variable indicating that the seat has been reserved by the processor&apos;s customer. If a second processor reads the same variable prior to setting by the first processor, it may, based on that read, erroneously set the variable again, with the result that the seat is double booked.</PDAT></PTEXT></PARA>
<PARA ID="P-00007" LVL="0"><PTEXT><PDAT>To avoid these problems, it is common to use synchronizing instructions for portions of a code (often called critical sections) in which simultaneous access by more than one processor is prohibited.</PDAT></PTEXT></PARA>
<PARA ID="P-00008" LVL="0"><PTEXT><PDAT>Synchronizing instructions may be used in two general ways. The first is that the synchronization instruction may provide an atomic function, that is, a function that cannot be interrupted, once begun, by any other processor. Such instructions may perform an atomic read/modify/write sequence as could be used in the above example. A modification of this use is a pair of &ldquo;bookend&rdquo; synchronization instructions (such as Load Lock/Store Conditional) that provide a quasi-atomic execution of intervening instructions, in which interruption by other processors cannot be prevented, but can be detected so that the instructions may be repeated until no interruption occurs.</PDAT></PTEXT></PARA>
<PARA ID="P-00009" LVL="0"><PTEXT><PDAT>The second way is that the synchronizing instruction may be used to take ownership of a lock variable, which must be owned for modification of other shared data. An atomic synchronization instruction is used to check for the availability of the lock (by checking its value) and if it is available, to take ownership of the lock variable (by changing its value).</PDAT></PTEXT></PARA>
<PARA ID="P-00010" LVL="0"><PTEXT><PDAT>In the first use of synchronization instructions, the critical section is short and well defined by the critical section. In the second case, where a lock variable is acquired, the critical section may be arbitrarily long and is not well defined. &ldquo;Synchronization instruction&rdquo; as used herein refers broadly to memory access instruction that permits mutual exclusion operations, that is, the exclusion of concurrent access to the same memory addresses by other processors during the access operations.</PDAT></PTEXT></PARA>
<PARA ID="P-00011" LVL="0"><PTEXT><PDAT>Like single processor systems, multiprocessors systems may employ cache memory. Cache memory is typically redundant local memory of limited size that may be accessed much faster than the larger main memory. A cache controller associated with the cache attempts to prefetch data that will be used by an executing program and thus to eliminate the delay required for accessing data on the main memory. The use of cache memory generally recognizes the reality that processor speeds are much faster than memory access speeds.</PDAT></PTEXT></PARA>
<PARA ID="P-00012" LVL="0"><PTEXT><PDAT>In multiprocessor systems, sophisticated cache coordination protocols, known in the art, are used to ensure that multiple copies of data from the main memory are properly managed to avoid errors caused by different processors working on their different cache copies of main memory. These protocols may work by means of bus communication between different cache controllers, or by using a single common directory indicating the status of multiple caches and their contents. In these cases, the protocols provide for unique ownership of data when a processor writes to its cache copy through an invalidation of other copies. Alternatively, the protocols may broadcast all processor writes without providing for unique ownership.</PDAT></PTEXT></PARA>
<PARA ID="P-00013" LVL="0"><PTEXT><PDAT>In addition to the obvious delays resulting from lock contention, synchronization instructions used in multiprocessor systems can create inefficiencies in the movement of data between main memory and the caches of the multiple processors. For example, after execution of the synchronization instructions necessary to acquire a lock variable by a first processor, and the loading of a cache line holding the lock variable into the cache of the first processor, a second processor may attempt to acquire the same lock. The lock variable is then transferred to the cache of the second processor, where it cannot be acquired because the lock is already owned, and then must be transferred back again to the first processor for release of the lock, and then transferred to the second processor again for the lock to be acquired. As is understood in the art, a cache line is the normal smallest unit of data transfer into a cache from another cache or memory.</PDAT></PTEXT></PARA>
<PARA ID="P-00014" LVL="0"><PTEXT><PDAT>One of the present inventors has recognized in a jointly authored prior art paper entitled </PDAT><HIL><ITALIC><PDAT>Efficient Synchronization Primitives For Large-Scale Cache-Coherent Shared-Memory Multiprocessors, </PDAT></ITALIC></HIL><PDAT>published April 1989 in the &ldquo;Proceedings of the Third Symposium on Architectural Support for Programming Languages and Operating Systems&rdquo;, pgs. 64-75, that many of these problems could be avoided by having the programmer or compiler explicitly identify critical sections. By providing an explicit demarcation of the critical section through special delimiting instructions, a processor holding a lock as part of the execution of a critical section would be empowered to defer requests by other caches for the cache line holding the lock variable until the lock was released. Each processor waiting for the lock, including the deferred processor, would effectively form a queue for that lock providing a more efficient method of sharing access to the common synchronized data.</PDAT></PTEXT></PARA>
<PARA ID="P-00015" LVL="0"><PTEXT><PDAT>Unfortunately such a system requires both a change in architecture and a fundamental rewriting of existing programs and/or compilers in order to indicate the boundaries of the critical sections. While such changes may occur on future generations of programming languages and programs, they do not address the large body of existing programs that might be executed in a multiprocessor system.</PDAT></PTEXT></PARA>
<H LVL="1"><STEXT><PDAT>BRIEF SUMMARY OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00016" LVL="0"><PTEXT><PDAT>The present invention recognizes that with a high degree of reliability, the location and size of a critical section can be inferred without the need for special delineators. Generally, the beginning of the critical section may be inferred by the occurrence of any of a number of pre-existing synchronization instructions. The end of the synchronizing section, while less easy to determine, may be inferred from a second synchronization instruction forming part of a bookend synchronization instruction pair or by the writing to the same memory location accessed by the first synchronization instruction, which is assumed to be a release of a lock variable.</PDAT></PTEXT></PARA>
<PARA ID="P-00017" LVL="0"><PTEXT><PDAT>Specifically then, the present invention provides a method of controlling a cache used in a computer having multiple processors and caches communicating through memory. In a first step of the method, as a program is executed by a first processor, a probable initiation of a critical section in the program is inferred from the standard instructions being executed. In response to this inference, the cache of the first processor is loaded with at least one synchronization variable. Prior to completion of the critical section of the executed program, response to other caches requesting write access to the synchronization variable is delayed.</PDAT></PTEXT></PARA>
<PARA ID="P-00018" LVL="0"><PTEXT><PDAT>It is therefore one object of the invention to improve data flow between caches during execution of a critical section of a program, in a way that will work with preexisting programs (or programs that have been generated by pre-existing compilers) that have not been modified to explicitly delineate the critical sections. The ability to infer, during program execution, probable initiation and termination of a critical section allows intervening cache requests to be delayed improving global performance of the multiprocessor system.</PDAT></PTEXT></PARA>
<PARA ID="P-00019" LVL="0"><PTEXT><PDAT>The beginning of the critical section may be inferred by detecting at least one instruction normally associated with a synchronizing operation, for example, a LOAD-LINKED type instruction.</PDAT></PTEXT></PARA>
<PARA ID="P-00020" LVL="0"><PTEXT><PDAT>Thus it is an object of the invention to provide a simple way of hardware detection of the beginning of a critical section.</PDAT></PTEXT></PARA>
<PARA ID="P-00021" LVL="0"><PTEXT><PDAT>The delayed cache requests may be specially designated &ldquo;deferrable&rdquo; requests and the cache controller may also recognize &ldquo;undeferrable&rdquo; requests for write access wherein prior to completion of the critical section, the cache controller responds without delay to other caches requesting undeferrable write access to the synchronization variable.</PDAT></PTEXT></PARA>
<PARA ID="P-00022" LVL="0"><PTEXT><PDAT>It is thus another object of the invention to improve cache operation where the critical section is wrongly inferred to have ended and another cache has loaded the data of the &ldquo;lock variable&rdquo; that must be re-obtained by the cache of the first processor so that a lock can be released. The undeferrable requests allow the first processor to recover the lock variable so it can release the lock variable without being delayed by the delay mechanism it applied to other processors.</PDAT></PTEXT></PARA>
<PARA ID="P-00023" LVL="0"><PTEXT><PDAT>The cache controller may mark a response to an undeferrable request with an instruction to release the synchronization variable back to the first processor at the conclusion of the requesting processor&apos;s use of the synchronization variable.</PDAT></PTEXT></PARA>
<PARA ID="P-00024" LVL="0"><PTEXT><PDAT>Yet another object of the invention is to permit undeferrable requests to override the delay mechanism of the present invention without disrupting the queue formed by deferrable requests among processors.</PDAT></PTEXT></PARA>
<PARA ID="P-00025" LVL="0"><PTEXT><PDAT>The cache controller of the first processor may obtain the synchronization variable for a synchronization operation by making a deferrable request to memory or other caches.</PDAT></PTEXT></PARA>
<PARA ID="P-00026" LVL="0"><PTEXT><PDAT>It is therefore another object of the invention for all caches to conform to the convention of deferrable and undeferrable requests both in requesting synchronization variables and in response to requests.</PDAT></PTEXT></PARA>
<PARA ID="P-00027" LVL="0"><PTEXT><PDAT>The cache controller may provide read access to the synchronization variable to the caches requesting deferrable access while delaying the response to the caches requesting write access.</PDAT></PTEXT></PARA>
<PARA ID="P-00028" LVL="0"><PTEXT><PDAT>Thus it is another object of the invention to allow caches that are placed in queue by the delay, to nevertheless resolve the value of lock variables that may be used in their critical sections, without giving them control of the cache for writing.</PDAT></PTEXT></PARA>
<PARA ID="P-00029" LVL="0"><PTEXT><PDAT>The critical section of the executed program may modify protected data and its relationship to the synchronization variable may be inferred. A request by a second processor for the synchronization variable, or possibly even the protected data, may trigger a response from the first processor including not only the synchronization variable, but other data associated with the lock, and provided before it is requested by the second processor.</PDAT></PTEXT></PARA>
<PARA ID="P-00030" LVL="0"><PTEXT><PDAT>Thus it is another object of the invention to collocate lock data and protected data to be modified so as to provide more rapid execution of critical sections.</PDAT></PTEXT></PARA>
<PARA ID="P-00031" LVL="0"><PTEXT><PDAT>A delayed request for access to the synchronization variable may be buffered and upon completion of the critical section by the first processor, the cache controller may provide the synchronization variable to the processor associated with the first buffered request with the synchronization variable.</PDAT></PTEXT></PARA>
<PARA ID="P-00032" LVL="0"><PTEXT><PDAT>Thus one additional object of the invention is to provide a queuing of processors needing to execute the critical section.</PDAT></PTEXT></PARA>
<PARA ID="P-00033" LVL="0"><PTEXT><PDAT>Completion of the critical section may be inferred when the first processor issues a first write instruction to the address of the synchronization variable. That write instruction may, but need not be, a STORE-CONDITIONAL-type instruction.</PDAT></PTEXT></PARA>
<PARA ID="P-00034" LVL="0"><PTEXT><PDAT>Thus it is another object of the invention to provide a simple method of inferring the conclusion of a critical section.</PDAT></PTEXT></PARA>
<PARA ID="P-00035" LVL="0"><PTEXT><PDAT>Alternatively, the completion of the critical section may be determined by the given processor issuing a second write instruction to the address of the synchronization variable. The second instruction may be a standard store-type instruction.</PDAT></PTEXT></PARA>
<PARA ID="P-00036" LVL="0"><PTEXT><PDAT>Thus it is another object of the invention to provide an inferential rule which works both for short critical sections, composed of a single, atomic or quasi-atomic operation, and for long critical sections providing a lock-based modification of many data elements.</PDAT></PTEXT></PARA>
<PARA ID="P-00037" LVL="0"><PTEXT><PDAT>Whether the critical section is a short or long form may be determined by consulting a prediction table.</PDAT></PTEXT></PARA>
<PARA ID="P-00038" LVL="0"><PTEXT><PDAT>Thus it is another object of the invention to provide for speculation as to the type of use of the critical section allowing for flexible implementation of the invention without modification of the program by the programmer for a compiler.</PDAT></PTEXT></PARA>
<PARA ID="P-00039" LVL="0"><PTEXT><PDAT>The foregoing objects and advantages may not apply to all embodiments of the inventions and are not intended to define the scope of the invention, for which purpose claims are provided. In the following description, reference is made to the accompanying drawings, which form a part hereof, and in which there is shown by way of illustration, a preferred embodiment of the invention. Such embodiment also does not define the scope of the invention and reference must be made therefore to the claims for this purpose.</PDAT></PTEXT></PARA>
</BTEXT>
</BRFSUM>
<DRWDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>BRIEF DESCRIPTION OF THE DRAWINGS</PDAT></STEXT></H>
<PARA ID="P-00040" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> is a block diagram of a multiprocessor system showing processors with their associated caches and cache controllers and/or part of the common memory holding an executable program and data and having a memory controller, such as may be used in the present invention;</PDAT></PTEXT></PARA>
<PARA ID="P-00041" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT> is a flow chart showing a short critical section of the executable program of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> in which data is modified quasi-atomically;</PDAT></PTEXT></PARA>
<PARA ID="P-00042" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT> is a figure similar to that of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT> showing a long form of a critical section in which a lock variable is obtained quasi-atomically and used to control access to other lock data;</PDAT></PTEXT></PARA>
<PARA ID="P-00043" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT> is a state diagram showing the operation of the cache controller of the present invention detecting the critical sections of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2 and 3</PDAT></FGREF><PDAT> including states of inferring the beginning of the synchronization and inferring the end of the synchronization;</PDAT></PTEXT></PARA>
<PARA ID="P-00044" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT> is a flow chart of the steps executed by the cache controllers of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> in the states of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT> of inferring the beginning of a critical section and the end of the critical section; and</PDAT></PTEXT></PARA>
<PARA ID="P-00045" LVL="0"><PTEXT><FGREF ID="DRAWINGS"><PDAT>FIG. 6</PDAT></FGREF><PDAT> is a representation of a data table held by the cache controller for execution of the present invention and in particular for inferring short and long versions of FIGS. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT> and </PDAT><HIL><BOLD><PDAT>3</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
</BTEXT>
</DRWDESC>
<DETDESC>
<BTEXT>
<H LVL="1"><STEXT><PDAT>DETAILED DESCRIPTION OF THE INVENTION</PDAT></STEXT></H>
<PARA ID="P-00046" LVL="0"><PTEXT><PDAT>Referring now to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT>, a multiprocessor computer architecture </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> includes a number of processor units </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b </PDAT></ITALIC></HIL><PDAT>connected via a bus structure </PDAT><HIL><BOLD><PDAT>14</PDAT></BOLD></HIL><PDAT> to a common memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00047" LVL="0"><PTEXT><PDAT>The processor units </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> include processors </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b</PDAT></ITALIC></HIL><PDAT>, respectively, communicating with corresponding cache systems </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and </PDAT><HIL><BOLD><PDAT>18</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b </PDAT></ITALIC></HIL><PDAT>holding a cache (</PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b</PDAT></ITALIC></HIL><PDAT>, respectively) and a cache controller (</PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>a </PDAT></ITALIC></HIL><PDAT>and </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><HIL><ITALIC><PDAT>b</PDAT></ITALIC></HIL><PDAT>, respectively) the latter controlling the loading of the cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> from main memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> as part of its prefetching function.</PDAT></PTEXT></PARA>
<PARA ID="P-00048" LVL="0"><PTEXT><PDAT>Memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> holds a program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> (including generally instructions and data) that may be executed by the processor units </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>. The memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> also includes a memory controller </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> which provides operating logic for synchronization instructions of the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00049" LVL="0"><PTEXT><PDAT>Generally, the multiprocessor computer architecture </PDAT><HIL><BOLD><PDAT>10</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 1</PDAT></FGREF><PDAT> may coordinate the movement of data among its caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> using a bus-based protocol wherein the responsibility for cache coordination rests in commands passed between cache controllers </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> or using a directory-based system where cache ownership information is in a directory </PDAT><HIL><BOLD><PDAT>28</PDAT></BOLD></HIL><PDAT> held within memory showing ownership of cache data. Both techniques are well known in the art, and the present invention is an addition to either of a bus-based or directory system as will be apparent to those of ordinary skill in the art from the following discussion. Thus the present invention is not limited to one particular cache coordination technique nor, as will be explained further below, to a particular architecture or instruction set and is applicable to systems where the memory is distributed among the processor units as may be done in some architectures.</PDAT></PTEXT></PARA>
<PARA ID="P-00050" LVL="0"><PTEXT><PDAT>The program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> may include synchronization instructions which serve to give a single processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> exclusive access to a piece of critical data without concern that it will be modified by other processors during that access time. Two particular instructions, the LOAD-LINKED instruction and the STORE-CONDITIONAL instruction, which are executed as a sequential pair, will be described in the preferred embodiment. As will be understood from the following discussion, however, the present invention is not limited to these architectures but may work with any instruction set where a critical section can be inferred from instructions or sequences of instructions.</PDAT></PTEXT></PARA>
<PARA ID="P-00051" LVL="0"><PTEXT><PDAT>Referring now to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 2 and 3</PDAT></FGREF><PDAT>, critical sections of the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> will tend to occur in one of two forms: a short-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2 and a</PDAT></FGREF><PDAT> long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; shown in FIG. </PDAT><HIL><BOLD><PDAT>3</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00052" LVL="0"><PTEXT><PDAT>Referring to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 1 and 2</PDAT></FGREF><PDAT>, the short-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> begins with a LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> and ends with a STORE-CONDITIONAL instruction </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT>. As is understood in the art, the LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> sets a flag which serves to notify the memory controller </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> that the particular address being loaded should be monitored for reading or writing by other processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> at any time after the LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> but prior to the STORE-CONDITIONAL instruction </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT>. Any such reading and writing clears the load-linked flag (not shown) that may be accessed by the cache controllers </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT>. The STORE-CONDITIONAL instruction attempts to writes to the address referenced by the LOAD-LINKED instruction and only if the load-linked flag is still set (indicating the memory location was not affected or read in the intervening time) the STORE-CONDITIONAL is a success, otherwise, the store condition fails. This success or failure can be tested for in a subsequent instruction in the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00053" LVL="0"><PTEXT><PDAT>Instructions like LOAD-LINKED and STORE-CONDITIONAL (albeit with different names) are found in a variety of commercially available or well-documented computer architectures including the Alpha AXP architecture, the IBM Power PC architecture and the MIPS RISC architecture. Thus, as used herein, instructions that access a memory location and provide for hardware monitoring of subsequent access to that memory locations, for the purpose of effective atomic execution, will be referred to as LOAD-LINKED-type instruction. Instructions that access a memory after a LOAD-LINKED-type instruction, and return a result dependant on whether the memory location was accessed after the LOAD-LINKED-type instruction by another processor will be referred to as STORE-CONDITIONAL-type instructions.</PDAT></PTEXT></PARA>
<PARA ID="P-00054" LVL="0"><PTEXT><PDAT>Referring only to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT>, a short-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> beginning with a LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> provides for a reading of a synchronization variable named COUNT. In this example, the next instruction </PDAT><HIL><BOLD><PDAT>34</PDAT></BOLD></HIL><PDAT> increments COUNT, for example, such as might be used to keep track of the number of hits at a web site using a common counter variable. It will be understood that other instructions </PDAT><HIL><BOLD><PDAT>34</PDAT></BOLD></HIL><PDAT> may also be used. Next, instruction </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT> executes a STORE-CONDITIONAL instruction on the same synchronization variable of COUNT. This is the conclusion of the critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00055" LVL="0"><PTEXT><PDAT>At succeeding instruction </PDAT><HIL><BOLD><PDAT>38</PDAT></BOLD></HIL><PDAT>, the result of the STORE-CONDITIONAL instruction is tested to see if COUNT was successfully stored by STORE-CONDITIONAL instruction prior to any modification of COUNT by another processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>. If not, the program may loop back to the LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>32</PDAT></BOLD></HIL><PDAT> as indicated. Otherwise it proceeds onward.</PDAT></PTEXT></PARA>
<PARA ID="P-00056" LVL="0"><PTEXT><PDAT>The present invention recognizes that the short-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> is delimited by LOAD-LINKED and STORE-CONDITIONAL instructions and thus may be readily identified solely by hardware during execution of the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> without modification of the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT>. This allows the present invention to work with legacy and current implementations of programs and compilers.</PDAT></PTEXT></PARA>
<PARA ID="P-00057" LVL="0"><PTEXT><PDAT>Referring now to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT>, a simple example of the long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; begins with a LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>42</PDAT></BOLD></HIL><PDAT> loading synchronization variable LOCK. Here LOCK provides a locking mechanism enforced by the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> which requires any processor executing the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> to read the LOCK variable and not to modify other locked data if another processor has set the LOCK variable. In a variation of this long form, a standard LOAD instruction of the LOCK variable may precede the LOAD-LINKED instruction to avoid undesirable side effects of spinning on a LOAD LINKED instruction. Both of these forms, and others, allow the beginning of the critical section to be inferred from executed instructions, in this case, the LOAD-LINKED instruction.</PDAT></PTEXT></PARA>
<PARA ID="P-00058" LVL="0"><PTEXT><PDAT>At LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>42</PDAT></BOLD></HIL><PDAT>, the LOCK variable is checked to see if it is free indicated for example by LOCK being equal to zero. If not, the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> may spin at LOAD-LINKED instruction </PDAT><HIL><BOLD><PDAT>42</PDAT></BOLD></HIL><PDAT> looping back to instruction </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT>. If the lock is available (LOCK being equal to one), then the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> proceeds to STORE-CONDITIONAL instruction </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT>, executing on LOCK setting it equal to one to indicate that the lock is now being held by the processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> executing this instance of the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00059" LVL="0"><PTEXT><PDAT>At instruction </PDAT><HIL><BOLD><PDAT>46</PDAT></BOLD></HIL><PDAT>, the result of the STORE-CONDITIONAL is tested. If the STORE-CONDITIONAL was a failure, indicating that another processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> may have read and written to LOCK in between instructions </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT> and </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT>, the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> loops back to instruction </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT> to begin again. Otherwise, the program </PDAT><HIL><BOLD><PDAT>29</PDAT></BOLD></HIL><PDAT> assumes that lock is held by it and it proceeds to instruction </PDAT><HIL><BOLD><PDAT>48</PDAT></BOLD></HIL><PDAT> to execute a number of instructions on locked data. An example of protected data might be airline reservation information, which must be read, modified and cross-referenced prior to any interruption by another processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00060" LVL="0"><PTEXT><PDAT>Finally, the lock is released by conventional store instruction </PDAT><HIL><BOLD><PDAT>51</PDAT></BOLD></HIL><PDAT> unsetting the LOCK synchronization variable. Here an inference that the long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; ends at STORE-CONDITIONAL instruction </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> would be an error. The present invention accounts for both of these modes as will be described.</PDAT></PTEXT></PARA>
<PARA ID="P-00061" LVL="0"><PTEXT><PDAT>Referring now to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>, each cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> operating independently or under the guidance of a directory </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> executes firmware implementing a state diagram beginning at an INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT>. INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> indicates according to normal convention that the cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> associated with the processor unit </PDAT><HIL><BOLD><PDAT>12</PDAT></BOLD></HIL><PDAT> does not contain valid data that may be read or written to.</PDAT></PTEXT></PARA>
<PARA ID="P-00062" LVL="0"><PTEXT><PDAT>Referring now also to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIGS. 5 and 6</PDAT></FGREF><PDAT>, in the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT>, each cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> monitors the instructions executed by its processor </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> to detect a LOAD-LINKED instruction as indicated by process block </PDAT><HIL><BOLD><PDAT>52</PDAT></BOLD></HIL><PDAT>. The value of the program counter </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT> (not shown) of the processor </PDAT><HIL><BOLD><PDAT>16</PDAT></BOLD></HIL><PDAT> at the detected LOAD-LINKED instruction is enrolled in a lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> (shown in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 6</PDAT></FGREF><PDAT>) held by each cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> or in a directory </PDAT><HIL><BOLD><PDAT>24</PDAT></BOLD></HIL><PDAT> accessible to the cache controllers </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT>. The program counter value </PDAT><HIL><BOLD><PDAT>56</PDAT></BOLD></HIL><PDAT> uniquely identifies the LOAD-LINKED instruction and is associated with a load address </PDAT><HIL><BOLD><PDAT>58</PDAT></BOLD></HIL><PDAT> in memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> which that LOAD-LINKED instruction accesses.</PDAT></PTEXT></PARA>
<PARA ID="P-00063" LVL="0"><PTEXT><PDAT>At succeeding process block </PDAT><HIL><BOLD><PDAT>60</PDAT></BOLD></HIL><PDAT>, a deferrable request for exclusive use of a cache line (being a block of data from memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT>) holding the synchronization variable indicated in the LOAD-LINKED instruction is sent to all other caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> and to memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00064" LVL="0"><PTEXT><PDAT>Referring to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>, at this point, there is an inferred beginning of a critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> (or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime;) indicated by state transition </PDAT><HIL><BOLD><PDAT>62</PDAT></BOLD></HIL><PDAT> from the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> to the LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00065" LVL="0"><PTEXT><PDAT>As indicated in </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT>, the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> now checks the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> as indicated by process block </PDAT><HIL><BOLD><PDAT>66</PDAT></BOLD></HIL><PDAT>. Initially the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> will provide a prediction value </PDAT><HIL><BOLD><PDAT>59</PDAT></BOLD></HIL><PDAT> predicting the use of a short form of the critical section shown in FIG. </PDAT><HIL><BOLD><PDAT>2</PDAT></BOLD></HIL><PDAT>. During both of the LOCK REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT>, as indicated by instruction </PDAT><HIL><BOLD><PDAT>68</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT>, the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> begins recording the cache lines </PDAT><HIL><BOLD><PDAT>61</PDAT></BOLD></HIL><PDAT> (memory addresses) access during the critical section. These lines </PDAT><HIL><BOLD><PDAT>61</PDAT></BOLD></HIL><PDAT> may be stored in the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT>. This optional feature may be used as will be described below to forward to later requesting caches not only the lock variable but also the protected data and thus will only be used for long form prediction.</PDAT></PTEXT></PARA>
<PARA ID="P-00066" LVL="0"><PTEXT><PDAT>During the LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT> as indicated by state transition </PDAT><HIL><BOLD><PDAT>74</PDAT></BOLD></HIL><PDAT>, deferrable read ownership exclusive requests from other caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> will be ignored. However, the first such deferrable request will be buffered by the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> so that it may respond at the conclusion of its critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; by supplying the cache line directly to one first requesting cache. In this way, a queuing structure is naturally formed of caches making the deferrable request. On the other hand, during the LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT> as indicated by state transition </PDAT><HIL><BOLD><PDAT>84</PDAT></BOLD></HIL><PDAT> undeferrable read ownership exclusive requests from other caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> will be serviced promptly per standard cache behavior.</PDAT></PTEXT></PARA>
<PARA ID="P-00067" LVL="0"><PTEXT><PDAT>Referring again to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>, the cache controller remains in the LOCK REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT> until the requested data is obtained by the cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> either from another cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> or from memory </PDAT><HIL><BOLD><PDAT>17</PDAT></BOLD></HIL><PDAT> as indicated by state transition </PDAT><HIL><BOLD><PDAT>70</PDAT></BOLD></HIL><PDAT> whereupon the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> moves to the LOCK HELD state </PDAT><HIL><BOLD><PDAT>72</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00068" LVL="0"><PTEXT><PDAT>In the LOCK HELD state </PDAT><HIL><BOLD><PDAT>72</PDAT></BOLD></HIL><PDAT>, as with the LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT>, as indicated by state transition </PDAT><HIL><BOLD><PDAT>76</PDAT></BOLD></HIL><PDAT>, deferrable read ownership exclusive requests from other caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> will be ignored. However, the first such deferrable request will be buffered by the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> so that it may respond at the conclusion of its critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; by supplying the cache line directly to one first requesting cache.</PDAT></PTEXT></PARA>
<PARA ID="P-00069" LVL="0"><PTEXT><PDAT>During the LOCK-HELD state </PDAT><HIL><BOLD><PDAT>72</PDAT></BOLD></HIL><PDAT>, a standard or undeferrable request for exclusive ownership request from another cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> may be received. The way in which the cache controller treats the undeferrable request depends on whether it has predicted a short-form or a long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; as controlled by branch instruction </PDAT><HIL><BOLD><PDAT>80</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00070" LVL="0"><PTEXT><PDAT>In the case of a predicted short-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>, as indicated by the right hand branch of instruction </PDAT><HIL><BOLD><PDAT>80</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT>, then undeferrable requests for exclusive ownership of the cache are dealt with within a few cycles on an immediate basis as indicated by process block </PDAT><HIL><BOLD><PDAT>95</PDAT></BOLD></HIL><PDAT> in FIG. </PDAT><HIL><BOLD><PDAT>5</PDAT></BOLD></HIL><PDAT> and state transition </PDAT><HIL><BOLD><PDAT>82</PDAT></BOLD></HIL><PDAT> from LOCK-HELD state </PDAT><HIL><BOLD><PDAT>72</PDAT></BOLD></HIL><PDAT> in FIG. </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>. As mentioned above, this undeferrable request allows the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> to release the cache line to another cache that in fact has the lock (even though the current cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> has the data) so that the other cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> may release the lock. When the cache contents are released in response to an undeferrable request, the response may be marked so that the receiving cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> returns ownership of the cache back to the initial cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> when it is done. The other caches </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> then do not flush their buffered deferrable requests upon the undeferrable request so that a queue of deferrable requests survives the interruption of the undeferrable request. Deferrable requests are ignored at process block </PDAT><HIL><BOLD><PDAT>95</PDAT></BOLD></HIL><PDAT> corresponding to the above described state transition </PDAT><HIL><BOLD><PDAT>76</PDAT></BOLD></HIL><PDAT> of FIG. </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>. By preserving the queue of deferrable requests, which was established by the timing of the various processors arriving at their critical sections, the risk of a single processor dominating the lock (for example, the fastest requester) is reduced.</PDAT></PTEXT></PARA>
<PARA ID="P-00071" LVL="0"><PTEXT><PDAT>Decision block </PDAT><HIL><BOLD><PDAT>96</PDAT></BOLD></HIL><PDAT> looks for a STORE CONDITIONAL instruction (e.g., instruction </PDAT><HIL><BOLD><PDAT>36</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 2</PDAT></FGREF><PDAT>) to infer the end of the critical section. Upon occurrence of the STORE-CONDITIONAL instruction tested for by decision block </PDAT><HIL><BOLD><PDAT>96</PDAT></BOLD></HIL><PDAT>, the end of the critical section is inferred at state transition </PDAT><HIL><BOLD><PDAT>90</PDAT></BOLD></HIL><PDAT> (of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>) and the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> executes process block </PDAT><HIL><BOLD><PDAT>98</PDAT></BOLD></HIL><PDAT> (described below) and moves into the PRESENT state </PDAT><HIL><BOLD><PDAT>92</PDAT></BOLD></HIL><PDAT>, indicating that it has the lock and lock data but not ownership of the lock. A time out like that described with respect to process block </PDAT><HIL><BOLD><PDAT>88</PDAT></BOLD></HIL><PDAT> also applies to infer an end of the critical section.</PDAT></PTEXT></PARA>
<PARA ID="P-00072" LVL="0"><PTEXT><PDAT>Referring now to instruction </PDAT><HIL><BOLD><PDAT>86</PDAT></BOLD></HIL><PDAT> following instruction </PDAT><HIL><BOLD><PDAT>80</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 5</PDAT></FGREF><PDAT> on the left hand branch, if a long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; is predicted, then deferrable requests are delayed at state transitions </PDAT><HIL><BOLD><PDAT>76</PDAT></BOLD></HIL><PDAT>&prime;, however, a &ldquo;tear-off&rdquo; copy of the requested data may be forwarded to the requesting cache. A tear-off copy provides read ownership of the data but not write ownership and thus allows, for example, another cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> in the LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT> to evaluate whether it can receive the lock and thus to move onto other tasks or to spin at the request as the programmer desires. The tear-off copy also allows speculative execution beyond the synchronization instruction by the requesting cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> such as normally is prevented by most architectures using a synchronization instruction.</PDAT></PTEXT></PARA>
<PARA ID="P-00073" LVL="0"><PTEXT><PDAT>At process block </PDAT><HIL><BOLD><PDAT>88</PDAT></BOLD></HIL><PDAT>, any write instruction (e.g., instruction </PDAT><HIL><BOLD><PDAT>51</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT>) after a first STORE-CONDITIONAL instruction (e.g., instruction </PDAT><HIL><BOLD><PDAT>44</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT>) referencing the same address as the LOAD LINKED instruction (e.g., instruction </PDAT><HIL><BOLD><PDAT>40</PDAT></BOLD></HIL><PDAT> of </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 3</PDAT></FGREF><PDAT>) is used to infer the end of the critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; and to cause the transition to the PRESENT state </PDAT><HIL><BOLD><PDAT>92</PDAT></BOLD></HIL><PDAT> of FIG. </PDAT><HIL><BOLD><PDAT>4</PDAT></BOLD></HIL><PDAT>. As a practical matter, process block </PDAT><HIL><BOLD><PDAT>88</PDAT></BOLD></HIL><PDAT> also includes a timer timing the elapsed time since entry into LOCK HELD state </PDAT><HIL><BOLD><PDAT>72</PDAT></BOLD></HIL><PDAT> and if that time exceeds a predetermined value, the end of the critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> is also inferred. The cache controller then moves to process block </PDAT><HIL><BOLD><PDAT>98</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00074" LVL="0"><PTEXT><PDAT>At process block </PDAT><HIL><BOLD><PDAT>98</PDAT></BOLD></HIL><PDAT>, the lock data and lock variable serving as a synchronization variable are released. The present invention allows the lock variable to be in the same cache line as the protected data that is manipulated when the processor has the lock. This is termed collocation and is normally undesirable as requests by other processors for the protected data takes the data from the processor which has control of the lock, and to no effect since the lock is required to use the protected data. The delay of deferrable requests of the present invention, however, makes collocation extremely efficient. The present invention goes further than this by providing &ldquo;virtual collocation&rdquo; in the collection of a list of data accessed during the critical section per process block </PDAT><HIL><BOLD><PDAT>68</PDAT></BOLD></HIL><PDAT> described above. The cache lines of this data are forwarded to the next processor in the deferrable request based queue, thus anticipating the data that the processor will need. Note that unlike collocation, virtual collocation does not require that the protected data be in the same cache line as the lock variable.</PDAT></PTEXT></PARA>
<PARA ID="P-00075" LVL="0"><PTEXT><PDAT>As used herein, &ldquo;synchronization variable&rdquo; shall refer to data used in a mutual exclusion operation including the lock variable and the protected data described above.</PDAT></PTEXT></PARA>
<PARA ID="P-00076" LVL="0"><PTEXT><PDAT>From the PRESENT state </PDAT><HIL><BOLD><PDAT>92</PDAT></BOLD></HIL><PDAT>, the cache controller may proceed to the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> as indicated by state transition </PDAT><HIL><BOLD><PDAT>94</PDAT></BOLD></HIL><PDAT>. This may be triggered by the receipt of a deferrable request, an undeferrable request, or the processing of previously buffered low or undeferrable requests at state transitions </PDAT><HIL><BOLD><PDAT>74</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>76</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00077" LVL="0"><PTEXT><PDAT>At the time of transition to the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT>, the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> may review the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> associated with the particular lock and forward to the next cache and queue whose request has been buffered, the associated cache lines </PDAT><HIL><BOLD><PDAT>61</PDAT></BOLD></HIL><PDAT> used during the critical section. In this way, subsequent caches access to the necessary data for the synchronization will be much improved.</PDAT></PTEXT></PARA>
<PARA ID="P-00078" LVL="0"><PTEXT><PDAT>The row of the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> for each critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; identified by the program counter value for the LOCK LINKED instruction may be retained and used each time that synchronization instruction is encountered. Determination of whether the prediction value </PDAT><HIL><BOLD><PDAT>59</PDAT></BOLD></HIL><PDAT> in the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT> is corrected may be determined after the fact by evaluating the efficiency of data flow through the cache and used to update the lock predictor table </PDAT><HIL><BOLD><PDAT>54</PDAT></BOLD></HIL><PDAT>.</PDAT></PTEXT></PARA>
<PARA ID="P-00079" LVL="0"><PTEXT><PDAT>Referring now again to </PDAT><FGREF ID="DRAWINGS"><PDAT>FIG. 4</PDAT></FGREF><PDAT>, the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> of the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> may also move via state transition </PDAT><HIL><BOLD><PDAT>102</PDAT></BOLD></HIL><PDAT> to a LINE REQUESTED state </PDAT><HIL><BOLD><PDAT>103</PDAT></BOLD></HIL><PDAT> where the cache </PDAT><HIL><BOLD><PDAT>20</PDAT></BOLD></HIL><PDAT> may contain the same data as requested at LOCK-REQUESTED state </PDAT><HIL><BOLD><PDAT>64</PDAT></BOLD></HIL><PDAT> but where it is not inferred to be a critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; by detection of a LOADLOCKED instruction. If the data line requested is obtained, the cache controller </PDAT><HIL><BOLD><PDAT>22</PDAT></BOLD></HIL><PDAT> proceeds to PRESENT state </PDAT><HIL><BOLD><PDAT>92</PDAT></BOLD></HIL><PDAT> along state transition </PDAT><HIL><BOLD><PDAT>104</PDAT></BOLD></HIL><PDAT>. Alternatively, the cache controller may move to the INVALID state </PDAT><HIL><BOLD><PDAT>50</PDAT></BOLD></HIL><PDAT> along state transition </PDAT><HIL><BOLD><PDAT>106</PDAT></BOLD></HIL><PDAT> if a deferrable or undeferrable request for exclusive ownership is received.</PDAT></PTEXT></PARA>
<PARA ID="P-00080" LVL="0"><PTEXT><PDAT>While the inference of a short-form or long-form critical section </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT> or </PDAT><HIL><BOLD><PDAT>30</PDAT></BOLD></HIL><PDAT>&prime; is relatively simple, when LOAD-LOCKED type instructions are provided, it will be recognized that more sophisticated instruction sequence patterns can be used so as to allow this inference with a variety of different architectures. Further the invention is not limited to the synchronization instruction of LOAD LOCKED/STORE-CONDITIONAL but may be used for true atomic instructions such as FETCH&amp;&phgr;-type instructions.</PDAT></PTEXT></PARA>
<PARA ID="P-00081" LVL="0"><PTEXT><PDAT>It is specifically intended that the present invention not be limited to the embodiments and illustrations contained herein, but that modified forms of those embodiments including portions of the embodiments and combinations of elements of different embodiments also be included as come within the scope of the following claims.</PDAT></PTEXT></PARA>
</BTEXT>
</DETDESC>
</SDODE>
<SDOCL>
<H LVL="1"><STEXT><PDAT>We claim: </PDAT></STEXT></H>
<CL>
<CLM ID="CLM-00001">
<PARA ID="P-00082" LVL="0"><PTEXT><PDAT>1. A method of cache control for a computer having multiple processors and associated caches communicating through memory, comprising the steps of:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>(a) during execution of a program by a given processor, infer from execution of the program, a probable entry into a critical section having at least one synchronization variable; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>(b) prior to completion of the execution of the inferred critical section, introducing added delay in responding to other caches requesting access to at least one of the synchronization variables, wherein delayed requests are deferrable requests and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>(c) detect when the inferred critical section has been wrongly inferred and terminate the delay in responding to an other request. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00002">
<PARA ID="P-00083" LVL="0"><PTEXT><PDAT>2. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein the detection of a probable execution of a critical section includes detecting a beginning of the critical section as marked by a synchronization instruction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00003">
<PARA ID="P-00084" LVL="0"><PTEXT><PDAT>3. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein the instruction is a LOAD LOCK type instruction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00004">
<PARA ID="P-00085" LVL="0"><PTEXT><PDAT>4. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> including during step (b), performing operations requiring mutual exclusion.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00005">
<PARA ID="P-00086" LVL="0"><PTEXT><PDAT>5. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein the cache control method also recognizes an undeferrable access request and wherein in step (c) terminates the delay in responding to the other request that is an undeferrable request.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00006">
<PARA ID="P-00087" LVL="0"><PTEXT><PDAT>6. The method of </PDAT><CLREF ID="CLM-00005"><PDAT>claim 5</PDAT></CLREF><PDAT> wherein the cache controller marks the response to undeferrable requests with an instruction to release the synchronization variable back to the given processor at the conclusion of the other cache&apos;s use of the synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00007">
<PARA ID="P-00088" LVL="0"><PTEXT><PDAT>7. The method of </PDAT><CLREF ID="CLM-00005"><PDAT>claim 5</PDAT></CLREF><PDAT> wherein during step (b) the cache controller obtains a synchronization variable for loading by making a deferrable request of the memory and other caches.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00008">
<PARA ID="P-00089" LVL="0"><PTEXT><PDAT>8. The method of </PDAT><CLREF ID="CLM-00005"><PDAT>claim 5</PDAT></CLREF><PDAT> wherein at step (b) the cache controller provides to the other cache&apos;s requesting write access to the synchronization variable, instead a read only record of what the synchronization variable was at a previous time.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00009">
<PARA ID="P-00090" LVL="0"><PTEXT><PDAT>9. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein the critical section of the executed program accesses a lock variable and protected data and wherein at step (b) the cache controller loads into the cache of the given processor the lock variable and the protected data.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00010">
<PARA ID="P-00091" LVL="0"><PTEXT><PDAT>10. The method of </PDAT><CLREF ID="CLM-00009"><PDAT>claim 9</PDAT></CLREF><PDAT> wherein the protected data is not in the same cache line as the lock variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00011">
<PARA ID="P-00092" LVL="0"><PTEXT><PDAT>11. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> wherein at step (b) a delayed request for write access is buffered and including step (c) upon completion of the critical section, responding to the buffered request with the synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00012">
<PARA ID="P-00093" LVL="0"><PTEXT><PDAT>12. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> whereupon at step (b) completion of the critical section is determined by the given processor issuing an instruction after step (a) modifying the synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00013">
<PARA ID="P-00094" LVL="0"><PTEXT><PDAT>13. The method of </PDAT><CLREF ID="CLM-00012"><PDAT>claim 12</PDAT></CLREF><PDAT> where the instruction modifying the synchronization variable is a synchronization instruction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00014">
<PARA ID="P-00095" LVL="0"><PTEXT><PDAT>14. The method of </PDAT><CLREF ID="CLM-00013"><PDAT>claim 13</PDAT></CLREF><PDAT> wherein instruction modifying the synchronization variable is a STORE CONDITIONAL type instruction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00015">
<PARA ID="P-00096" LVL="0"><PTEXT><PDAT>15. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> whereupon at step (b) completion of the critical section is determined by the given processor issuing a second instruction modifying the synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00016">
<PARA ID="P-00097" LVL="0"><PTEXT><PDAT>16. The method of </PDAT><CLREF ID="CLM-00015"><PDAT>claim 15</PDAT></CLREF><PDAT> wherein the second write instruction is a standard STORE type instruction.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00017">
<PARA ID="P-00098" LVL="0"><PTEXT><PDAT>17. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> whereupon at step (b) completion of the critical section is determined by a predetermined time-out value measured from the time of entry into the critical section.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00018">
<PARA ID="P-00099" LVL="0"><PTEXT><PDAT>18. The method of </PDAT><CLREF ID="CLM-00001"><PDAT>claim 1</PDAT></CLREF><PDAT> whereupon at step (b) completion of the critical section is determined by consulting a prediction table predicting a likelihood that the critical section terminates at a first or second writing of the synchronization variable after step (a) and wherein the prediction table is initially set to predict that the critical section ends after the first writing of the synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
<CLM ID="CLM-00019">
<PARA ID="P-00100" LVL="0"><PTEXT><PDAT>19. A method of cache control for a computer having multiple processors and associated caches communicating through memory, comprising the steps of:</PDAT></PTEXT></PARA>
<CLMSTEP LVL="2"><PTEXT><PDAT>(a) during execution of a program executed by a given processor, detect execution of a critical section of the program; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>(b) load into the cache of the given processor, a first synchronization variable to perform operations requiring mutual exclusion; </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>(c) record access of the processor of other synchronization variables during execution of the critical section of the program; and </PDAT></PTEXT></CLMSTEP>
<CLMSTEP LVL="2"><PTEXT><PDAT>(d) upon completion of the execution of the critical section of the program, release to another cache requesting access to the first synchronization variable the first synchronization variable and the other synchronization variables. </PDAT></PTEXT></CLMSTEP>
</CLM>
<CLM ID="CLM-00020">
<PARA ID="P-00101" LVL="0"><PTEXT><PDAT>20. The method of </PDAT><CLREF ID="CLM-00017"><PDAT>claim 17</PDAT></CLREF><PDAT> wherein the other synchronization variables are not in the same cache line as the first synchronization variable.</PDAT></PTEXT></PARA>
</CLM>
</CL>
</SDOCL>
<SDODR ID="DRAWINGS">
<EMI ID="EMI-D00000" ALT="embedded image" FILE="US06460124-20021001-D00000.TIF"/>
<EMI ID="EMI-D00001" ALT="embedded image" FILE="US06460124-20021001-D00001.TIF"/>
<EMI ID="EMI-D00002" ALT="embedded image" FILE="US06460124-20021001-D00002.TIF"/>
<EMI ID="EMI-D00003" ALT="embedded image" FILE="US06460124-20021001-D00003.TIF"/>
</SDODR>
</PATDOC>

